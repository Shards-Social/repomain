{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samth\\\\repomain-1\\\\src\\\\components\\\\ImageUpload\\\\ImageUpload.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { update } from \"../../features/userSlice\";\nimport { showModal } from \"../../features/modalSlice\";\nimport useFetch from \"../../hooks/useFetch\";\nimport Compress from \"compress.js\";\nimport { updateDPService } from \"../../services/userServices\";\nimport \"./imageupload.css\";\nimport { getUsers } from \"../../features/usersSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageUpload = _ref => {\n  _s();\n  let {\n    close\n  } = _ref;\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const dispatch = useDispatch();\n  const customFetch = useFetch();\n  const compress = new Compress();\n  const loadImage = e => {\n    const input = e.target;\n    if (!input) return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      setPreview(e.target.result);\n    };\n    input.files[0] && reader.readAsDataURL(input.files[0]);\n    const files = [...input.files];\n    compress.compress(files, {\n      size: 0.5,\n      quality: 0.75,\n      maxWidth: 1000,\n      maxHeight: 1000,\n      resize: true,\n      rotate: false\n    }).then(data => {\n      var _data$, _data$2;\n      setImage(Compress.convertBase64ToFile((_data$ = data[0]) === null || _data$ === void 0 ? void 0 : _data$.data, (_data$2 = data[0]) === null || _data$2 === void 0 ? void 0 : _data$2.ext));\n    });\n  };\n  const submitHandler = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"image\", image);\n    dispatch(showModal({}));\n    const data = await customFetch(updateDPService, formData);\n    if (data) {\n      dispatch(getUsers({\n        customFetch\n      }));\n      dispatch(update({\n        profileImage: data.user.profileImage,\n        id: data.user._id\n      }));\n      close();\n      dispatch(showModal({\n        msg: \"Success\"\n      }));\n      setImage(null);\n      setPreview(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submitHandler,\n    className: \"imageupload\",\n    children: [preview && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: preview,\n      alt: \"upload-preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btns\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"dp-image\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"dp-image\",\n        accept: \"image/png, image/jpeg\",\n        onChange: loadImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this), image && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: close,\n        type: \"reset\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, this);\n};\n_s(ImageUpload, \"B666UfZZGWwOj/mv/VXzgMZcr3M=\", false, function () {\n  return [useDispatch, useFetch];\n});\n_c = ImageUpload;\nexport default ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"names":["React","useState","useDispatch","update","showModal","useFetch","Compress","updateDPService","getUsers","ImageUpload","close","image","setImage","preview","setPreview","dispatch","customFetch","compress","loadImage","e","input","target","reader","FileReader","onload","result","files","readAsDataURL","size","quality","maxWidth","maxHeight","resize","rotate","then","data","convertBase64ToFile","ext","submitHandler","preventDefault","formData","FormData","append","profileImage","user","id","_id","msg"],"sources":["C:/Users/samth/repomain-1/src/components/ImageUpload/ImageUpload.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { update } from \"../../features/userSlice\";\r\nimport { showModal } from \"../../features/modalSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Compress from \"compress.js\";\r\nimport { updateDPService } from \"../../services/userServices\";\r\nimport \"./imageupload.css\";\r\nimport { getUsers } from \"../../features/usersSlice\";\r\n\r\nconst ImageUpload = ({ close }) => {\r\n\tconst [image, setImage] = useState(null);\r\n\tconst [preview, setPreview] = useState(null);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\tconst compress = new Compress();\r\n\r\n\tconst loadImage = e => {\r\n\t\tconst input = e.target;\r\n\t\tif (!input) return;\r\n\t\tvar reader = new FileReader();\r\n\t\treader.onload = function (e) {\r\n\t\t\tsetPreview(e.target.result);\r\n\t\t};\r\n\t\tinput.files[0] && reader.readAsDataURL(input.files[0]);\r\n\t\tconst files = [...input.files];\r\n\t\tcompress\r\n\t\t\t.compress(files, {\r\n\t\t\t\tsize: 0.5,\r\n\t\t\t\tquality: 0.75,\r\n\t\t\t\tmaxWidth: 1000,\r\n\t\t\t\tmaxHeight: 1000,\r\n\t\t\t\tresize: true,\r\n\t\t\t\trotate: false,\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetImage(Compress.convertBase64ToFile(data[0]?.data, data[0]?.ext));\r\n\t\t\t});\r\n\t};\r\n\r\n\tconst submitHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", image);\r\n\t\tdispatch(showModal({}));\r\n\t\tconst data = await customFetch(updateDPService, formData);\r\n\t\tif (data) {\r\n\t\t\tdispatch(getUsers({ customFetch }));\r\n\t\t\tdispatch(update({ profileImage: data.user.profileImage, id: data.user._id }));\r\n\t\t\tclose();\r\n\t\t\tdispatch(showModal({ msg: \"Success\" }));\r\n\t\t\tsetImage(null);\r\n\t\t\tsetPreview(null);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={submitHandler} className=\"imageupload\">\r\n\t\t\t{preview && <img src={preview} alt=\"upload-preview\" />}\r\n\t\t\t<div className=\"btns\">\r\n\t\t\t\t<label htmlFor=\"dp-image\">Upload</label>\r\n\t\t\t\t<input type=\"file\" id=\"dp-image\" accept=\"image/png, image/jpeg\" onChange={loadImage} />\r\n\t\t\t\t{image && <button type=\"submit\">Submit</button>}\r\n\t\t\t\t<button onClick={close} type=\"reset\">\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default ImageUpload;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}