{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samth\\\\repomain-1\\\\src\\\\components\\\\Comment\\\\Comment.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { dp } from \"../../assets\";\nimport { deleteComment, editComment, replyComment } from \"../../features/postSlice\";\nimport useFetch from \"../../hooks/useFetch\";\nimport useConfirmation from \"../Confirmation/useConfirmation\";\nimport Input from \"../Input/Input\";\nimport Options from \"../Options/Options\";\nimport \"./comment.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Comment = _ref => {\n  _s();\n  let {\n    comment,\n    postId\n  } = _ref;\n  const {\n    users\n  } = useSelector(state => state.users);\n  const user = users.find(user => user._id === comment.commentedBy);\n  const customFetch = useFetch();\n  const dispatch = useDispatch();\n  const {\n    id\n  } = useSelector(state => state.user);\n  const [isEditing, setIsEditing] = useState(false);\n  const [isReplying, setIsReplying] = useState(false);\n  const deleteCommentHandler = () => {\n    if (comment.commentId) {\n      dispatch(deleteComment({\n        replyId: comment._id,\n        postId,\n        customFetch,\n        commentId: comment.commentId\n      }));\n    } else dispatch(deleteComment({\n      commentId: comment._id,\n      postId,\n      customFetch\n    }));\n  };\n  const editCommentHandler = value => {\n    if (comment.commentId) {\n      dispatch(editComment({\n        replyId: comment._id,\n        postId,\n        customFetch,\n        commentId: comment.commentId,\n        comment: value\n      }));\n    } else dispatch(editComment({\n      commentId: comment._id,\n      postId,\n      comment: value,\n      customFetch\n    }));\n    setIsEditing(false);\n  };\n  const replyHandler = value => {\n    dispatch(replyComment({\n      commentId: comment.commentId || comment._id,\n      id: postId,\n      comment: value,\n      replyTo: user === null || user === void 0 ? void 0 : user.name,\n      customFetch\n    }));\n    setIsReplying(false);\n  };\n  const {\n    Confirmation: DeleteConfirm,\n    toggleShow\n  } = useConfirmation(deleteCommentHandler, \"Are you sure, You want to delete the comment?\");\n  const options = {\n    Reply: () => setIsReplying(true)\n  };\n  if (id === (user === null || user === void 0 ? void 0 : user._id)) {\n    options.Delete = toggleShow;\n    options.Edit = () => setIsEditing(true);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment__group\",\n    children: [DeleteConfirm, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/user/${user === null || user === void 0 ? void 0 : user._id}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: (user === null || user === void 0 ? void 0 : user.profileImage) || dp,\n          alt: `${user === null || user === void 0 ? void 0 : user.name}-dp`,\n          className: \"comment__dp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: (user === null || user === void 0 ? void 0 : user.name) || \"user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"comment__text\",\n          children: [(comment === null || comment === void 0 ? void 0 : comment.replyTo) && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"@\", comment.replyTo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 28\n          }, this), \" \", comment === null || comment === void 0 ? void 0 : comment.comment]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Options, {\n        options: options,\n        id: comment._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), isEditing && /*#__PURE__*/_jsxDEV(Input, {\n      placeholder: \"Edit Comment\",\n      handler: editCommentHandler,\n      initialValue: comment === null || comment === void 0 ? void 0 : comment.comment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }, this), isReplying && /*#__PURE__*/_jsxDEV(Input, {\n      placeholder: `Reply to ${user === null || user === void 0 ? void 0 : user.name}`,\n      handler: replyHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 3\n  }, this);\n};\n_s(Comment, \"9keAhkcAncu25Q0wVJwfUJbH/Yk=\", false, function () {\n  return [useSelector, useFetch, useDispatch, useSelector, useConfirmation];\n});\n_c = Comment;\nexport default Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Link","dp","deleteComment","editComment","replyComment","useFetch","useConfirmation","Input","Options","Comment","comment","postId","users","state","user","find","_id","commentedBy","customFetch","dispatch","id","isEditing","setIsEditing","isReplying","setIsReplying","deleteCommentHandler","commentId","replyId","editCommentHandler","value","replyHandler","replyTo","name","Confirmation","DeleteConfirm","toggleShow","options","Reply","Delete","Edit","profileImage"],"sources":["C:/Users/samth/repomain-1/src/components/Comment/Comment.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { dp } from \"../../assets\";\r\nimport { deleteComment, editComment, replyComment } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport useConfirmation from \"../Confirmation/useConfirmation\";\r\nimport Input from \"../Input/Input\";\r\nimport Options from \"../Options/Options\";\r\nimport \"./comment.css\";\r\n\r\nconst Comment = ({ comment, postId }) => {\r\n\tconst { users } = useSelector(state => state.users);\r\n\tconst user = users.find(user => user._id === comment.commentedBy);\r\n\r\n\tconst customFetch = useFetch();\r\n\tconst dispatch = useDispatch();\r\n\tconst { id } = useSelector(state => state.user);\r\n\r\n\tconst [isEditing, setIsEditing] = useState(false);\r\n\tconst [isReplying, setIsReplying] = useState(false);\r\n\r\n\tconst deleteCommentHandler = () => {\r\n\t\tif (comment.commentId) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdeleteComment({ replyId: comment._id, postId, customFetch, commentId: comment.commentId })\r\n\t\t\t);\r\n\t\t} else dispatch(deleteComment({ commentId: comment._id, postId, customFetch }));\r\n\t};\r\n\r\n\tconst editCommentHandler = value => {\r\n\t\tif (comment.commentId) {\r\n\t\t\tdispatch(\r\n\t\t\t\teditComment({\r\n\t\t\t\t\treplyId: comment._id,\r\n\t\t\t\t\tpostId,\r\n\t\t\t\t\tcustomFetch,\r\n\t\t\t\t\tcommentId: comment.commentId,\r\n\t\t\t\t\tcomment: value,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else dispatch(editComment({ commentId: comment._id, postId, comment: value, customFetch }));\r\n\t\tsetIsEditing(false);\r\n\t};\r\n\r\n\tconst replyHandler = value => {\r\n\t\tdispatch(\r\n\t\t\treplyComment({\r\n\t\t\t\tcommentId: comment.commentId || comment._id,\r\n\t\t\t\tid: postId,\r\n\t\t\t\tcomment: value,\r\n\t\t\t\treplyTo: user?.name,\r\n\t\t\t\tcustomFetch,\r\n\t\t\t})\r\n\t\t);\r\n\t\tsetIsReplying(false);\r\n\t};\r\n\r\n\tconst { Confirmation: DeleteConfirm, toggleShow } = useConfirmation(\r\n\t\tdeleteCommentHandler,\r\n\t\t\"Are you sure, You want to delete the comment?\"\r\n\t);\r\n\r\n\tconst options = { Reply: () => setIsReplying(true) };\r\n\tif (id === user?._id) {\r\n\t\toptions.Delete = toggleShow;\r\n\t\toptions.Edit = () => setIsEditing(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comment__group\">\r\n\t\t\t{DeleteConfirm}\r\n\t\t\t<div className=\"comment\">\r\n\t\t\t\t<Link to={`/user/${user?._id}`}>\r\n\t\t\t\t\t<img src={user?.profileImage || dp} alt={`${user?.name}-dp`} className=\"comment__dp\" />\r\n\t\t\t\t</Link>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h3>{user?.name || \"user\"}</h3>\r\n\t\t\t\t\t<p className=\"comment__text\">\r\n\t\t\t\t\t\t{comment?.replyTo && <span>@{comment.replyTo}</span>} {comment?.comment}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Options options={options} id={comment._id} />\r\n\t\t\t</div>\r\n\t\t\t{isEditing && (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tplaceholder=\"Edit Comment\"\r\n\t\t\t\t\thandler={editCommentHandler}\r\n\t\t\t\t\tinitialValue={comment?.comment}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{isReplying && <Input placeholder={`Reply to ${user?.name}`} handler={replyHandler} />}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Comment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}