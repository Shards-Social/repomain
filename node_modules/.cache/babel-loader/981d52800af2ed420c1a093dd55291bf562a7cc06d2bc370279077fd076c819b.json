{"ast":null,"code":"import React,{useState}from\"react\";import{dp,clockIcon,cakeIcon,locationIcon,mailIcon,cameraIcon}from\"../../assets\";import SetupProfile from\"../SetupProfile/SetupProfile\";import ImageUpload from\"../ImageUpload/ImageUpload\";import useFetch from\"../../hooks/useFetch\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{createChat}from\"../../features/messageSlice\";import Backdrop from\"../Backdrop/Backdrop\";import{setIsLoading,showModal}from\"../../features/modalSlice\";import\"./profilecard.css\";import{logout}from\"../../features/userSlice\";import getDateString from\"../../utils/getDateString\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileCard=_ref=>{let{id,isOwnProfile}=_ref;const{users:{users},user:{isGuest}}=useSelector(state=>state);const user=users.find(user=>user._id===id)||{};const[isEditing,setIsEditing]=useState(false);const[isUploading,setIsUploading]=useState(false);const customFetch=useFetch();const dispatch=useDispatch();const navigate=useNavigate();let{name,email,about,dob,location,createdAt,profileImage}=user;createdAt=\"Joined on \".concat(getDateString(createdAt));dob=getDateString(dob);const sendMessage=async()=>{if(isGuest)return dispatch(showModal({msg:\"Please log in to continue\"}));dispatch(setIsLoading(true));dispatch(createChat({customFetch,id})).then(()=>{if(window.innerWidth<801)navigate(\"/chat/messenger\");else navigate(\"/chat\");dispatch(setIsLoading(false));});};const hideUploading=()=>{setIsUploading(false);};const hideEditing=()=>{setIsEditing(false);};return/*#__PURE__*/_jsxs(\"section\",{className:\"profilecard gradient-border\",children:[isOwnProfile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Backdrop,{show:isEditing,onClose:hideEditing,children:/*#__PURE__*/_jsx(SetupProfile,{close:hideEditing,user:user})}),/*#__PURE__*/_jsx(Backdrop,{show:isUploading,onClose:hideUploading,children:/*#__PURE__*/_jsx(ImageUpload,{close:hideUploading})})]}),/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:profileImage||dp,alt:\"profile_image\",className:\"profilecard__dp roundimage\"}),isOwnProfile&&/*#__PURE__*/_jsx(\"div\",{className:\"dp-upload\",children:/*#__PURE__*/_jsx(\"img\",{src:cameraIcon,alt:\"change_profile_image\",onClick:()=>setIsUploading(true)})})]}),/*#__PURE__*/_jsx(\"h1\",{children:name||\"User\"}),/*#__PURE__*/_jsx(\"h2\",{children:about||\"About\"})]}),/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profilecard__info\",children:[/*#__PURE__*/_jsx(\"img\",{src:clockIcon,alt:\"join date\"}),/*#__PURE__*/_jsx(\"h3\",{children:createdAt})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profilecard__info\",children:[/*#__PURE__*/_jsx(\"img\",{src:locationIcon,alt:\"location\"}),/*#__PURE__*/_jsx(\"h3\",{children:location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profilecard__info\",children:[/*#__PURE__*/_jsx(\"img\",{src:mailIcon,alt:\"mail\"}),/*#__PURE__*/_jsx(\"h3\",{children:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profilecard__info\",children:[/*#__PURE__*/_jsx(\"img\",{src:cakeIcon,alt:\"date of birth\"}),/*#__PURE__*/_jsx(\"h3\",{children:dob})]})]}),isOwnProfile?/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>dispatch(logout()),children:\"Logout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),children:\"Edit Profile\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Message\"}),/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"Add Friend\"})]})]});};export default ProfileCard;","map":{"version":3,"names":["React","useState","dp","clockIcon","cakeIcon","locationIcon","mailIcon","cameraIcon","SetupProfile","ImageUpload","useFetch","useDispatch","useSelector","useNavigate","createChat","Backdrop","setIsLoading","showModal","logout","getDateString","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProfileCard","_ref","id","isOwnProfile","users","user","isGuest","state","find","_id","isEditing","setIsEditing","isUploading","setIsUploading","customFetch","dispatch","navigate","name","email","about","dob","location","createdAt","profileImage","concat","sendMessage","msg","then","window","innerWidth","hideUploading","hideEditing","className","children","show","onClose","close","src","alt","onClick","disabled"],"sources":["C:/Users/samth/repomain-1/src/components/ProfileCard/ProfileCard.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { dp, clockIcon, cakeIcon, locationIcon, mailIcon, cameraIcon } from \"../../assets\";\r\nimport SetupProfile from \"../SetupProfile/SetupProfile\";\r\nimport ImageUpload from \"../ImageUpload/ImageUpload\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { createChat } from \"../../features/messageSlice\";\r\nimport Backdrop from \"../Backdrop/Backdrop\";\r\nimport { setIsLoading, showModal } from \"../../features/modalSlice\";\r\nimport \"./profilecard.css\";\r\nimport { logout } from \"../../features/userSlice\";\r\nimport getDateString from \"../../utils/getDateString\";\r\n\r\nconst ProfileCard = ({ id, isOwnProfile }) => {\r\n\tconst {\r\n\t\tusers: { users },\r\n\t\tuser: { isGuest },\r\n\t} = useSelector(state => state);\r\n\tconst user = users.find(user => user._id === id) || {};\r\n\tconst [isEditing, setIsEditing] = useState(false);\r\n\tconst [isUploading, setIsUploading] = useState(false);\r\n\r\n\tconst customFetch = useFetch();\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\r\n\tlet { name, email, about, dob, location, createdAt, profileImage } = user;\r\n\tcreatedAt = `Joined on ${getDateString(createdAt)}`;\r\n\tdob = getDateString(dob);\r\n\r\n\tconst sendMessage = async () => {\r\n\t\tif (isGuest) return dispatch(showModal({ msg: \"Please log in to continue\" }));\r\n\t\tdispatch(setIsLoading(true));\r\n\t\tdispatch(createChat({ customFetch, id })).then(() => {\r\n\t\t\tif (window.innerWidth < 801) navigate(\"/chat/messenger\");\r\n\t\t\telse navigate(\"/chat\");\r\n\t\t\tdispatch(setIsLoading(false));\r\n\t\t});\r\n\t};\r\n\r\n\tconst hideUploading = () => {\r\n\t\tsetIsUploading(false);\r\n\t};\r\n\tconst hideEditing = () => {\r\n\t\tsetIsEditing(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"profilecard gradient-border\">\r\n\t\t\t{isOwnProfile && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Backdrop show={isEditing} onClose={hideEditing}>\r\n\t\t\t\t\t\t<SetupProfile close={hideEditing} user={user} />\r\n\t\t\t\t\t</Backdrop>\r\n\t\t\t\t\t<Backdrop show={isUploading} onClose={hideUploading}>\r\n\t\t\t\t\t\t<ImageUpload close={hideUploading} />\r\n\t\t\t\t\t</Backdrop>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t<header>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={profileImage || dp}\r\n\t\t\t\t\t\talt=\"profile_image\"\r\n\t\t\t\t\t\tclassName=\"profilecard__dp roundimage\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{isOwnProfile && (\r\n\t\t\t\t\t\t<div className=\"dp-upload\">\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={cameraIcon}\r\n\t\t\t\t\t\t\t\talt=\"change_profile_image\"\r\n\t\t\t\t\t\t\t\tonClick={() => setIsUploading(true)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<h1>{name || \"User\"}</h1>\r\n\t\t\t\t<h2>{about || \"About\"}</h2>\r\n\t\t\t</header>\r\n\t\t\t<article>\r\n\t\t\t\t<div className=\"profilecard__info\">\r\n\t\t\t\t\t<img src={clockIcon} alt=\"join date\" />\r\n\t\t\t\t\t<h3>{createdAt}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profilecard__info\">\r\n\t\t\t\t\t<img src={locationIcon} alt=\"location\" />\r\n\t\t\t\t\t<h3>{location}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profilecard__info\">\r\n\t\t\t\t\t<img src={mailIcon} alt=\"mail\" />\r\n\t\t\t\t\t<h3>{email}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profilecard__info\">\r\n\t\t\t\t\t<img src={cakeIcon} alt=\"date of birth\" />\r\n\t\t\t\t\t<h3>{dob}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t</article>\r\n\t\t\t{isOwnProfile ? (\r\n\t\t\t\t<div className=\"btn-group\">\r\n\t\t\t\t\t<button onClick={() => dispatch(logout())}>Logout</button>\r\n\t\t\t\t\t<button onClick={() => setIsEditing(true)}>Edit Profile</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"btn-group\">\r\n\t\t\t\t\t<button onClick={sendMessage}>Message</button>\r\n\t\t\t\t\t<button disabled>Add Friend</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default ProfileCard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}