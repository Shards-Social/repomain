{"ast":null,"code":"import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import CreatePost from\"../../components/CreatePost/CreatePost\";import InfinityScroll from\"../../components/InfinityScroll/InfinityScroll\";import Online from\"../../components/Online/Online\";import Posts from\"../../components/Post/Posts\";import ProfileCard from\"../../components/ProfileCard/ProfileCard\";import{setAllPosts}from\"../../features/postSlice\";import useFetch from\"../../hooks/useFetch\";import{fetchPostsService}from\"../../services/postServices\";import Guest from\"../../components/ProfileCard/Guest\";import\"./home.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const{post:{allPosts:{posts,page,isLoading}},user:{id,isGuest}}=useSelector(state=>state);const customFetch=useFetch();const dispatch=useDispatch();const getNextPage=async()=>{const data=await customFetch(fetchPostsService,{page:page+1});dispatch(setAllPosts({posts:posts.concat(data.posts),page:data.page}));return data.posts.length;};return/*#__PURE__*/_jsxs(\"section\",{className:\"home\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home__left\",children:isGuest?/*#__PURE__*/_jsx(Guest,{}):/*#__PURE__*/_jsx(ProfileCard,{id:id,isOwnProfile:true})}),/*#__PURE__*/_jsx(InfinityScroll,{getNextPage:getNextPage,children:/*#__PURE__*/_jsxs(\"main\",{className:\"home__center\",children:[isGuest||/*#__PURE__*/_jsx(CreatePost,{}),/*#__PURE__*/_jsx(Posts,{posts:posts,isLoading:isLoading})]})}),/*#__PURE__*/_jsx(\"aside\",{className:\"home__right gradient-border\",children:/*#__PURE__*/_jsx(Online,{})})]});};export default Home;","map":{"version":3,"names":["React","useDispatch","useSelector","CreatePost","InfinityScroll","Online","Posts","ProfileCard","setAllPosts","useFetch","fetchPostsService","Guest","jsx","_jsx","jsxs","_jsxs","Home","post","allPosts","posts","page","isLoading","user","id","isGuest","state","customFetch","dispatch","getNextPage","data","concat","length","className","children","isOwnProfile"],"sources":["C:/Users/samth/repomain-1/src/pages/Home/Home.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport CreatePost from \"../../components/CreatePost/CreatePost\";\r\nimport InfinityScroll from \"../../components/InfinityScroll/InfinityScroll\";\r\nimport Online from \"../../components/Online/Online\";\r\nimport Posts from \"../../components/Post/Posts\";\r\nimport ProfileCard from \"../../components/ProfileCard/ProfileCard\";\r\nimport { setAllPosts } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { fetchPostsService } from \"../../services/postServices\";\r\nimport Guest from \"../../components/ProfileCard/Guest\";\r\nimport \"./home.css\";\r\n\r\nconst Home = () => {\r\n\tconst {\r\n\t\tpost: {\r\n\t\t\tallPosts: { posts, page, isLoading },\r\n\t\t},\r\n\t\tuser: { id, isGuest },\r\n\t} = useSelector(state => state);\r\n\r\n\tconst customFetch = useFetch();\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst getNextPage = async () => {\r\n\t\tconst data = await customFetch(fetchPostsService, { page: page + 1 });\r\n\t\tdispatch(setAllPosts({ posts: posts.concat(data.posts), page: data.page }));\r\n\t\treturn data.posts.length;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"home\">\r\n\t\t\t<div className=\"home__left\">{isGuest ? <Guest /> : <ProfileCard id={id} isOwnProfile />}</div>\r\n\t\t\t<InfinityScroll getNextPage={getNextPage}>\r\n\t\t\t\t<main className=\"home__center\">\r\n\t\t\t\t\t{isGuest || <CreatePost />}\r\n\t\t\t\t\t<Posts posts={posts} isLoading={isLoading} />\r\n\t\t\t\t</main>\r\n\t\t\t</InfinityScroll>\r\n\t\t\t<aside className=\"home__right gradient-border\">\r\n\t\t\t\t<Online />\r\n\t\t\t</aside>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAO,CAAAC,UAAU,KAAM,wCAAwC,CAC/D,MAAO,CAAAC,cAAc,KAAM,gDAAgD,CAC3E,MAAO,CAAAC,MAAM,KAAM,gCAAgC,CACnD,MAAO,CAAAC,KAAK,KAAM,6BAA6B,CAC/C,MAAO,CAAAC,WAAW,KAAM,0CAA0C,CAClE,OAASC,WAAW,KAAQ,0BAA0B,CACtD,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAC3C,OAASC,iBAAiB,KAAQ,6BAA6B,CAC/D,MAAO,CAAAC,KAAK,KAAM,oCAAoC,CACtD,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpB,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CAClB,KAAM,CACLC,IAAI,CAAE,CACLC,QAAQ,CAAE,CAAEC,KAAK,CAAEC,IAAI,CAAEC,SAAU,CACpC,CAAC,CACDC,IAAI,CAAE,CAAEC,EAAE,CAAEC,OAAQ,CACrB,CAAC,CAAGtB,WAAW,CAACuB,KAAK,EAAIA,KAAK,CAAC,CAE/B,KAAM,CAAAC,WAAW,CAAGjB,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAAkB,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAA2B,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAH,WAAW,CAAChB,iBAAiB,CAAE,CAAEU,IAAI,CAAEA,IAAI,CAAG,CAAE,CAAC,CAAC,CACrEO,QAAQ,CAACnB,WAAW,CAAC,CAAEW,KAAK,CAAEA,KAAK,CAACW,MAAM,CAACD,IAAI,CAACV,KAAK,CAAC,CAAEC,IAAI,CAAES,IAAI,CAACT,IAAK,CAAC,CAAC,CAAC,CAC3E,MAAO,CAAAS,IAAI,CAACV,KAAK,CAACY,MAAM,CACzB,CAAC,CAED,mBACChB,KAAA,YAASiB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACxBpB,IAAA,QAAKmB,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAET,OAAO,cAAGX,IAAA,CAACF,KAAK,GAAE,CAAC,cAAGE,IAAA,CAACN,WAAW,EAACgB,EAAE,CAAEA,EAAG,CAACW,YAAY,MAAE,CAAC,CAAM,CAAC,cAC9FrB,IAAA,CAACT,cAAc,EAACwB,WAAW,CAAEA,WAAY,CAAAK,QAAA,cACxClB,KAAA,SAAMiB,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC5BT,OAAO,eAAIX,IAAA,CAACV,UAAU,GAAE,CAAC,cAC1BU,IAAA,CAACP,KAAK,EAACa,KAAK,CAAEA,KAAM,CAACE,SAAS,CAAEA,SAAU,CAAE,CAAC,EACxC,CAAC,CACQ,CAAC,cACjBR,IAAA,UAAOmB,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC7CpB,IAAA,CAACR,MAAM,GAAE,CAAC,CACJ,CAAC,EACA,CAAC,CAEZ,CAAC,CAED,cAAe,CAAAW,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}