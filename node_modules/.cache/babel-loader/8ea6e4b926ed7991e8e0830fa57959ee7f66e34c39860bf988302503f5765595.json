{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Input from\"../../components/Input/Input\";import Comments from\"../../components/Comments/Comments\";import Post from\"../../components/Post/Post\";import Online from\"../../components/Online/Online\";import{useParams,useLocation}from\"react-router\";import Cookies from\"js-cookie\";import{useDispatch}from\"react-redux\";import{setSinglePost,commentPost}from\"../../features/postSlice\";import useFetch from\"../../hooks/useFetch\";import{useSelector}from\"react-redux\";import{fetchPostsService}from\"../../services/postServices\";import\"./singlepost.css\";import{Post as PostLoading}from\"../../components/Post/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SinglePost=()=>{var _Cookies$get;const{id}=useParams();const{embed}=Object.fromEntries(useLocation().search.slice(1).split(\"&\").map(ele=>ele.split(\"=\")));const{token}=JSON.parse((_Cookies$get=Cookies.get(\"user\"))!==null&&_Cookies$get!==void 0?_Cookies$get:\"{}\");const{singlePost}=useSelector(state=>state.post);const[isLoading,setIsLoading]=useState(true);const dispatch=useDispatch();const customFetch=useFetch();useEffect(()=>{(async()=>{setIsLoading(true);const data=await customFetch(fetchPostsService,{id});if(data)dispatch(setSinglePost(data.post));setIsLoading(false);})();},[id,token,dispatch,customFetch]);const commentHandler=async comment=>{dispatch(commentPost({customFetch,id:singlePost._id,comment}));};if(embed)return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(PostLoading,{}):/*#__PURE__*/_jsx(Post,{post:singlePost})});return/*#__PURE__*/_jsxs(\"section\",{className:\"singlepost\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"singlepost__left\",children:[isLoading?/*#__PURE__*/_jsx(PostLoading,{singlepost:true}):/*#__PURE__*/_jsx(Post,{singlepost:true,post:singlePost}),/*#__PURE__*/_jsxs(\"article\",{className:\"singlepost__comments\",children:[/*#__PURE__*/_jsx(Comments,{post:singlePost}),/*#__PURE__*/_jsx(Input,{placeholder:\"Write a comment...\",handler:commentHandler,showEmoji:true})]})]}),/*#__PURE__*/_jsx(\"article\",{className:\"singlepost__right gradient-border\",children:/*#__PURE__*/_jsx(Online,{})})]});};export default SinglePost;","map":{"version":3,"names":["React","useEffect","useState","Input","Comments","Post","Online","useParams","useLocation","Cookies","useDispatch","setSinglePost","commentPost","useFetch","useSelector","fetchPostsService","PostLoading","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SinglePost","_Cookies$get","id","embed","Object","fromEntries","search","slice","split","map","ele","token","JSON","parse","get","singlePost","state","post","isLoading","setIsLoading","dispatch","customFetch","data","commentHandler","comment","_id","children","className","singlepost","placeholder","handler","showEmoji"],"sources":["C:/Users/samth/repomain-1/src/pages/Singlepost/SinglePost.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Input from \"../../components/Input/Input\";\r\nimport Comments from \"../../components/Comments/Comments\";\r\nimport Post from \"../../components/Post/Post\";\r\nimport Online from \"../../components/Online/Online\";\r\nimport { useParams, useLocation } from \"react-router\";\r\nimport Cookies from \"js-cookie\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setSinglePost, commentPost } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { fetchPostsService } from \"../../services/postServices\";\r\nimport \"./singlepost.css\";\r\nimport { Post as PostLoading } from \"../../components/Post/Loading\";\r\n\r\nconst SinglePost = () => {\r\n\tconst { id } = useParams();\r\n\tconst { embed } = Object.fromEntries(\r\n\t\tuseLocation()\r\n\t\t\t.search.slice(1)\r\n\t\t\t.split(\"&\")\r\n\t\t\t.map(ele => ele.split(\"=\"))\r\n\t);\r\n\tconst { token } = JSON.parse(Cookies.get(\"user\") ?? \"{}\");\r\n\tconst { singlePost } = useSelector(state => state.post);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tconst data = await customFetch(fetchPostsService, { id });\r\n\t\t\tif (data) dispatch(setSinglePost(data.post));\r\n\t\t\tsetIsLoading(false);\r\n\t\t})();\r\n\t}, [id, token, dispatch, customFetch]);\r\n\r\n\tconst commentHandler = async comment => {\r\n\t\tdispatch(commentPost({ customFetch, id: singlePost._id, comment }));\r\n\t};\r\n\r\n\tif (embed) return <>{isLoading ? <PostLoading /> : <Post post={singlePost} />}</>;\r\n\r\n\treturn (\r\n\t\t<section className=\"singlepost\">\r\n\t\t\t<div className=\"singlepost__left\">\r\n\t\t\t\t{isLoading ? <PostLoading singlepost={true} /> : <Post singlepost={true} post={singlePost} />}\r\n\t\t\t\t<article className=\"singlepost__comments\">\r\n\t\t\t\t\t<Comments post={singlePost} />\r\n\t\t\t\t\t<Input placeholder=\"Write a comment...\" handler={commentHandler} showEmoji />\r\n\t\t\t\t</article>\r\n\t\t\t</div>\r\n\t\t\t<article className=\"singlepost__right gradient-border\">\r\n\t\t\t\t<Online />\r\n\t\t\t</article>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default SinglePost;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}