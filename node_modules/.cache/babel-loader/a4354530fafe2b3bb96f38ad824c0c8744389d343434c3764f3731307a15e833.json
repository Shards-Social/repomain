{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import Cookies from\"js-cookie\";import axiosConfig from\"../services/axiosConfig\";const initialState={id:\"\",name:\"\",profileImage:\"\",token:\"\",isGuest:\"\"};let interceptor;const userSlice=createSlice({name:\"user\",initialState,reducers:{login:(state,action)=>{const{id,name,profileImage,token,isGuest}=action.payload;Cookies.set(\"user\",JSON.stringify(action.payload),{expires:30});interceptor=axiosConfig.interceptors.request.use(config=>{config.headers[\"Authorization\"]=\"Bearer \".concat(token);return config;},error=>Promise.reject(error));return{id,name,profileImage,token,isGuest:!!isGuest};},logout:state=>{Cookies.remove(\"user\");axiosConfig.interceptors.request.eject(interceptor);return initialState;},update:(state,action)=>{const{payload}=action;Object.keys(payload).map(key=>state[key]=payload[key]);Cookies.set(\"user\",JSON.stringify(state));}}});export const{login,logout,update}=userSlice.actions;export default userSlice.reducer;","map":{"version":3,"names":["createSlice","Cookies","axiosConfig","initialState","id","name","profileImage","token","isGuest","interceptor","userSlice","reducers","login","state","action","payload","set","JSON","stringify","expires","interceptors","request","use","config","headers","concat","error","Promise","reject","logout","remove","eject","update","Object","keys","map","key","actions","reducer"],"sources":["C:/Users/samth/repomain-1/src/features/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport Cookies from \"js-cookie\";\r\nimport axiosConfig from \"../services/axiosConfig\";\r\n\r\nconst initialState = {\r\n\tid: \"\",\r\n\tname: \"\",\r\n\tprofileImage: \"\",\r\n\ttoken: \"\",\r\n\tisGuest: \"\",\r\n};\r\n\r\nlet interceptor;\r\n\r\nconst userSlice = createSlice({\r\n\tname: \"user\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tlogin: (state, action) => {\r\n\t\t\tconst { id, name, profileImage, token, isGuest } = action.payload;\r\n\t\t\tCookies.set(\"user\", JSON.stringify(action.payload), { expires: 30 });\r\n\t\t\tinterceptor = axiosConfig.interceptors.request.use(\r\n\t\t\t\tconfig => {\r\n\t\t\t\t\tconfig.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t},\r\n\t\t\t\terror => Promise.reject(error)\r\n\t\t\t);\r\n\t\t\treturn { id, name, profileImage, token, isGuest: !!isGuest };\r\n\t\t},\r\n\t\tlogout: state => {\r\n\t\t\tCookies.remove(\"user\");\r\n\t\t\taxiosConfig.interceptors.request.eject(interceptor);\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\tupdate: (state, action) => {\r\n\t\t\tconst { payload } = action;\r\n\t\t\tObject.keys(payload).map(key => (state[key] = payload[key]));\r\n\t\t\tCookies.set(\"user\", JSON.stringify(state));\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { login, logout, update } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CAEjD,KAAM,CAAAC,YAAY,CAAG,CACpBC,EAAE,CAAE,EAAE,CACNC,IAAI,CAAE,EAAE,CACRC,YAAY,CAAE,EAAE,CAChBC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACV,CAAC,CAED,GAAI,CAAAC,WAAW,CAEf,KAAM,CAAAC,SAAS,CAAGV,WAAW,CAAC,CAC7BK,IAAI,CAAE,MAAM,CACZF,YAAY,CACZQ,QAAQ,CAAE,CACTC,KAAK,CAAEA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACzB,KAAM,CAAEV,EAAE,CAAEC,IAAI,CAAEC,YAAY,CAAEC,KAAK,CAAEC,OAAQ,CAAC,CAAGM,MAAM,CAACC,OAAO,CACjEd,OAAO,CAACe,GAAG,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACJ,MAAM,CAACC,OAAO,CAAC,CAAE,CAAEI,OAAO,CAAE,EAAG,CAAC,CAAC,CACpEV,WAAW,CAAGP,WAAW,CAACkB,YAAY,CAACC,OAAO,CAACC,GAAG,CACjDC,MAAM,EAAI,CACTA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAalB,KAAK,CAAE,CACnD,MAAO,CAAAgB,MAAM,CACd,CAAC,CACDG,KAAK,EAAIC,OAAO,CAACC,MAAM,CAACF,KAAK,CAC9B,CAAC,CACD,MAAO,CAAEtB,EAAE,CAAEC,IAAI,CAAEC,YAAY,CAAEC,KAAK,CAAEC,OAAO,CAAE,CAAC,CAACA,OAAQ,CAAC,CAC7D,CAAC,CACDqB,MAAM,CAAEhB,KAAK,EAAI,CAChBZ,OAAO,CAAC6B,MAAM,CAAC,MAAM,CAAC,CACtB5B,WAAW,CAACkB,YAAY,CAACC,OAAO,CAACU,KAAK,CAACtB,WAAW,CAAC,CACnD,MAAO,CAAAN,YAAY,CACpB,CAAC,CACD6B,MAAM,CAAEA,CAACnB,KAAK,CAAEC,MAAM,GAAK,CAC1B,KAAM,CAAEC,OAAQ,CAAC,CAAGD,MAAM,CAC1BmB,MAAM,CAACC,IAAI,CAACnB,OAAO,CAAC,CAACoB,GAAG,CAACC,GAAG,EAAKvB,KAAK,CAACuB,GAAG,CAAC,CAAGrB,OAAO,CAACqB,GAAG,CAAE,CAAC,CAC5DnC,OAAO,CAACe,GAAG,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC,CAAC,CAC3C,CACD,CACD,CAAC,CAAC,CAEF,MAAO,MAAM,CAAED,KAAK,CAAEiB,MAAM,CAAEG,MAAO,CAAC,CAAGtB,SAAS,CAAC2B,OAAO,CAE1D,cAAe,CAAA3B,SAAS,CAAC4B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}