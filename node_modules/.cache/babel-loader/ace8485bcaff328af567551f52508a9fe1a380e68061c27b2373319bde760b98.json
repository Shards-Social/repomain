{"ast":null,"code":"import React,{useState}from\"react\";import{dp,closeIcon,searchIcon,hamburger,chatIcon,homeIcon}from\"../../assets\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{setIsLoading,toggleSidebar}from\"../../features/modalSlice\";import useFetch from\"../../hooks/useFetch\";import SearchResults from\"../SearchResults/SearchResults\";import{fetchUsersService}from\"../../services/userServices\";import{fetchPostsService}from\"../../services/postServices\";import\"./appbar.css\";import{logout}from\"../../features/userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Appbar=()=>{//global states\nconst{user:{id,profileImage,isGuest},modal:{isSidebarVisible}}=useSelector(state=>state);//local states\nconst[query,setQuery]=useState(\"\");const[searchResult,setSearchResult]=useState({});const dispatch=useDispatch();const customFetch=useFetch();const searchHandler=async e=>{e.preventDefault();if(query.length>0){dispatch(setIsLoading(true));const{posts}=await customFetch(fetchPostsService,{query});const{users}=await customFetch(fetchUsersService,{query});setSearchResult({posts,users});dispatch(setIsLoading(false));}};const reset=()=>{setQuery(\"\");setSearchResult({});};const gotoLogin=()=>dispatch(logout());return/*#__PURE__*/_jsxs(\"header\",{className:searchResult.posts||searchResult.users?\"appbar topZ\":\"appbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hamburger\",onClick:()=>dispatch(toggleSidebar(!isSidebarVisible)),children:/*#__PURE__*/_jsx(\"img\",{src:isSidebarVisible?closeIcon:hamburger,alt:\"hamburger\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:homeIcon,alt:\"home\",className:\"home-icon\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:searchHandler,className:\"searchform\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"aria-label\":\"search\",children:/*#__PURE__*/_jsx(\"img\",{src:searchIcon,alt:\"search\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tap to search...\",value:query,onChange:e=>setQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:reset,type:\"button\",\"aria-label\":\"clear search\",children:/*#__PURE__*/_jsx(\"img\",{src:closeIcon,alt:\"close\",className:\"close\"})}),(searchResult.posts||searchResult.users)&&/*#__PURE__*/_jsx(SearchResults,{searchResult:searchResult,reset:reset})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"appbar__profile\",children:isGuest?/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",onClick:gotoLogin,children:\"Login\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(id),children:/*#__PURE__*/_jsx(\"img\",{src:profileImage||dp,alt:\"profileImage\",className:\"appbar__profile__dp\",title:\"profile\"})}),/*#__PURE__*/_jsx(Link,{to:\"/chat\",children:/*#__PURE__*/_jsx(\"img\",{src:chatIcon,alt:\"chat\",className:\"chat\"})})]})})]});};export default Appbar;","map":{"version":3,"names":["React","useState","dp","closeIcon","searchIcon","hamburger","chatIcon","homeIcon","Link","useDispatch","useSelector","setIsLoading","toggleSidebar","useFetch","SearchResults","fetchUsersService","fetchPostsService","logout","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Appbar","user","id","profileImage","isGuest","modal","isSidebarVisible","state","query","setQuery","searchResult","setSearchResult","dispatch","customFetch","searchHandler","e","preventDefault","length","posts","users","reset","gotoLogin","className","children","onClick","src","alt","to","onSubmit","type","placeholder","value","onChange","target","concat","title"],"sources":["C:/Users/samth/repomain-1/src/components/Appbar/Appbar.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { dp, closeIcon, searchIcon, hamburger, chatIcon, homeIcon } from \"../../assets\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setIsLoading, toggleSidebar } from \"../../features/modalSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport SearchResults from \"../SearchResults/SearchResults\";\r\nimport { fetchUsersService } from \"../../services/userServices\";\r\nimport { fetchPostsService } from \"../../services/postServices\";\r\nimport \"./appbar.css\";\r\nimport { logout } from \"../../features/userSlice\";\r\n\r\nconst Appbar = () => {\r\n\t//global states\r\n\tconst {\r\n\t\tuser: { id, profileImage, isGuest },\r\n\t\tmodal: { isSidebarVisible },\r\n\t} = useSelector(state => state);\r\n\r\n\t//local states\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [searchResult, setSearchResult] = useState({});\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tconst searchHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tif (query.length > 0) {\r\n\t\t\tdispatch(setIsLoading(true));\r\n\t\t\tconst { posts } = await customFetch(fetchPostsService, { query });\r\n\t\t\tconst { users } = await customFetch(fetchUsersService, { query });\r\n\t\t\tsetSearchResult({ posts, users });\r\n\t\t\tdispatch(setIsLoading(false));\r\n\t\t}\r\n\t};\r\n\r\n\tconst reset = () => {\r\n\t\tsetQuery(\"\");\r\n\t\tsetSearchResult({});\r\n\t};\r\n\r\n\tconst gotoLogin = () => dispatch(logout());\r\n\r\n\treturn (\r\n\t\t<header className={searchResult.posts || searchResult.users ? \"appbar topZ\" : \"appbar\"}>\r\n\t\t\t<div className=\"hamburger\" onClick={() => dispatch(toggleSidebar(!isSidebarVisible))}>\r\n\t\t\t\t<img src={isSidebarVisible ? closeIcon : hamburger} alt=\"hamburger\" />\r\n\t\t\t</div>\r\n\t\t\t<Link to=\"/\">\r\n\t\t\t\t<img src={homeIcon} alt=\"home\" className=\"home-icon\" />\r\n\t\t\t</Link>\r\n\t\t\t<form onSubmit={searchHandler} className=\"searchform\">\r\n\t\t\t\t<button type=\"submit\" aria-label=\"search\">\r\n\t\t\t\t\t<img src={searchIcon} alt=\"search\" />\r\n\t\t\t\t</button>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Tap to search...\"\r\n\t\t\t\t\tvalue={query}\r\n\t\t\t\t\tonChange={e => setQuery(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t\t<button onClick={reset} type=\"button\" aria-label=\"clear search\">\r\n\t\t\t\t\t<img src={closeIcon} alt=\"close\" className=\"close\" />\r\n\t\t\t\t</button>\r\n\t\t\t\t{(searchResult.posts || searchResult.users) && (\r\n\t\t\t\t\t<SearchResults searchResult={searchResult} reset={reset} />\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t\t<nav className=\"appbar__profile\">\r\n\t\t\t\t{isGuest ? (\r\n\t\t\t\t\t<button className=\"login-btn\" onClick={gotoLogin}>\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link to={`/user/${id}`}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={profileImage || dp}\r\n\t\t\t\t\t\t\t\talt=\"profileImage\"\r\n\t\t\t\t\t\t\t\tclassName=\"appbar__profile__dp\"\r\n\t\t\t\t\t\t\t\ttitle=\"profile\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<Link to=\"/chat\">\r\n\t\t\t\t\t\t\t<img src={chatIcon} alt=\"chat\" className=\"chat\" />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</nav>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Appbar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}