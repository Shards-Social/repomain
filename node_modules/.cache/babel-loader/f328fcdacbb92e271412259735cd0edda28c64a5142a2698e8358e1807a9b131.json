{"ast":null,"code":"import React,{useCallback,useState}from\"react\";import{useEffect}from\"react\";import{useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const InfinityScroll=_ref=>{let{getNextPage,children,offset=10}=_ref;const contentRef=useRef();const[isFinished,setIsFinished]=useState(false);const[isLoading,setIsLoading]=useState(false);const handler=useCallback(async()=>{const content=contentRef.current;if(!content)return;const{height,top}=content.getBoundingClientRect();const remainingSpaceAtBottom=window.innerHeight+top*-1-height;const isReachedBottom=remainingSpaceAtBottom>offset;if(isReachedBottom&&!isFinished&&!isLoading){setIsLoading(true);const length=await getNextPage();if(!length)setIsFinished(true);setIsLoading(false);}},[isLoading,isFinished,offset,getNextPage]);useEffect(()=>{document.addEventListener(\"scroll\",handler);return()=>document.removeEventListener(\"scroll\",handler);},[handler]);return/*#__PURE__*/_jsx(\"div\",{className:\"infinityScroll\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"infinityScroll__content\",ref:contentRef,children:[children,!isFinished&&isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading__circle\"})]})});};export default InfinityScroll;","map":{"version":3,"names":["React","useCallback","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","InfinityScroll","_ref","getNextPage","children","offset","contentRef","isFinished","setIsFinished","isLoading","setIsLoading","handler","content","current","height","top","getBoundingClientRect","remainingSpaceAtBottom","window","innerHeight","isReachedBottom","length","document","addEventListener","removeEventListener","className","ref"],"sources":["C:/Users/samth/repomain-1/src/components/InfinityScroll/InfinityScroll.jsx"],"sourcesContent":["import React, { useCallback, useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\n\r\nconst InfinityScroll = ({ getNextPage, children, offset = 10 }) => {\r\n\tconst contentRef = useRef();\r\n\tconst [isFinished, setIsFinished] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst handler = useCallback(async () => {\r\n\t\tconst content = contentRef.current;\r\n\t\tif (!content) return;\r\n\t\tconst { height, top } = content.getBoundingClientRect();\r\n\t\tconst remainingSpaceAtBottom = window.innerHeight + top * -1 - height;\r\n\t\tconst isReachedBottom = remainingSpaceAtBottom > offset;\r\n\t\tif (isReachedBottom && !isFinished && !isLoading) {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tconst length = await getNextPage();\r\n\t\t\tif (!length) setIsFinished(true);\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t}, [isLoading, isFinished, offset, getNextPage]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener(\"scroll\", handler);\r\n\t\treturn () => document.removeEventListener(\"scroll\", handler);\r\n\t}, [handler]);\r\n\r\n\treturn (\r\n\t\t<div className=\"infinityScroll\">\r\n\t\t\t<div className=\"infinityScroll__content\" ref={contentRef}>\r\n\t\t\t\t{children}\r\n\t\t\t\t{!isFinished && isLoading && <div className=\"loading__circle\" />}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default InfinityScroll;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,QAAQ,KAAQ,OAAO,CACpD,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA4C,IAA3C,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,MAAM,CAAG,EAAG,CAAC,CAAAH,IAAA,CAC7D,KAAM,CAAAI,UAAU,CAAGV,MAAM,CAAC,CAAC,CAC3B,KAAM,CAACW,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAiB,OAAO,CAAGlB,WAAW,CAAC,SAAY,CACvC,KAAM,CAAAmB,OAAO,CAAGN,UAAU,CAACO,OAAO,CAClC,GAAI,CAACD,OAAO,CAAE,OACd,KAAM,CAAEE,MAAM,CAAEC,GAAI,CAAC,CAAGH,OAAO,CAACI,qBAAqB,CAAC,CAAC,CACvD,KAAM,CAAAC,sBAAsB,CAAGC,MAAM,CAACC,WAAW,CAAGJ,GAAG,CAAG,CAAC,CAAC,CAAGD,MAAM,CACrE,KAAM,CAAAM,eAAe,CAAGH,sBAAsB,CAAGZ,MAAM,CACvD,GAAIe,eAAe,EAAI,CAACb,UAAU,EAAI,CAACE,SAAS,CAAE,CACjDC,YAAY,CAAC,IAAI,CAAC,CAClB,KAAM,CAAAW,MAAM,CAAG,KAAM,CAAAlB,WAAW,CAAC,CAAC,CAClC,GAAI,CAACkB,MAAM,CAAEb,aAAa,CAAC,IAAI,CAAC,CAChCE,YAAY,CAAC,KAAK,CAAC,CACpB,CACD,CAAC,CAAE,CAACD,SAAS,CAAEF,UAAU,CAAEF,MAAM,CAAEF,WAAW,CAAC,CAAC,CAEhDR,SAAS,CAAC,IAAM,CACf2B,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,CAAEZ,OAAO,CAAC,CAC5C,MAAO,IAAMW,QAAQ,CAACE,mBAAmB,CAAC,QAAQ,CAAEb,OAAO,CAAC,CAC7D,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CAEb,mBACCb,IAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAArB,QAAA,cAC9BJ,KAAA,QAAKyB,SAAS,CAAC,yBAAyB,CAACC,GAAG,CAAEpB,UAAW,CAAAF,QAAA,EACvDA,QAAQ,CACR,CAACG,UAAU,EAAIE,SAAS,eAAIX,IAAA,QAAK2B,SAAS,CAAC,iBAAiB,CAAE,CAAC,EAC5D,CAAC,CACF,CAAC,CAER,CAAC,CAED,cAAe,CAAAxB,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}