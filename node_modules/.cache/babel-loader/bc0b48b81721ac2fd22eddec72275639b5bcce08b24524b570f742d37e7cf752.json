{"ast":null,"code":"import React from\"react\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{dp}from\"../../assets\";import{deleteComment,editComment,replyComment}from\"../../features/postSlice\";import useFetch from\"../../hooks/useFetch\";import useConfirmation from\"../Confirmation/useConfirmation\";import Input from\"../Input/Input\";import Options from\"../Options/Options\";import\"./comment.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Comment=_ref=>{let{comment,postId}=_ref;const{users}=useSelector(state=>state.users);const user=users.find(user=>user._id===comment.commentedBy);const customFetch=useFetch();const dispatch=useDispatch();const{id}=useSelector(state=>state.user);const[isEditing,setIsEditing]=useState(false);const[isReplying,setIsReplying]=useState(false);const deleteCommentHandler=()=>{if(comment.commentId){dispatch(deleteComment({replyId:comment._id,postId,customFetch,commentId:comment.commentId}));}else dispatch(deleteComment({commentId:comment._id,postId,customFetch}));};const editCommentHandler=value=>{if(comment.commentId){dispatch(editComment({replyId:comment._id,postId,customFetch,commentId:comment.commentId,comment:value}));}else dispatch(editComment({commentId:comment._id,postId,comment:value,customFetch}));setIsEditing(false);};const replyHandler=value=>{dispatch(replyComment({commentId:comment.commentId||comment._id,id:postId,comment:value,replyTo:user===null||user===void 0?void 0:user.name,customFetch}));setIsReplying(false);};const{Confirmation:DeleteConfirm,toggleShow}=useConfirmation(deleteCommentHandler,\"Are you sure, You want to delete the comment?\");const options={Reply:()=>setIsReplying(true)};if(id===(user===null||user===void 0?void 0:user._id)){options.Delete=toggleShow;options.Edit=()=>setIsEditing(true);}return/*#__PURE__*/_jsxs(\"div\",{className:\"comment__group\",children:[DeleteConfirm,/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(user===null||user===void 0?void 0:user._id),children:/*#__PURE__*/_jsx(\"img\",{src:(user===null||user===void 0?void 0:user.profileImage)||dp,alt:\"\".concat(user===null||user===void 0?void 0:user.name,\"-dp\"),className:\"comment__dp\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:(user===null||user===void 0?void 0:user.name)||\"user\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"comment__text\",children:[(comment===null||comment===void 0?void 0:comment.replyTo)&&/*#__PURE__*/_jsxs(\"span\",{children:[\"@\",comment.replyTo]}),\" \",comment===null||comment===void 0?void 0:comment.comment]})]}),/*#__PURE__*/_jsx(Options,{options:options,id:comment._id})]}),isEditing&&/*#__PURE__*/_jsx(Input,{placeholder:\"Edit Comment\",handler:editCommentHandler,initialValue:comment===null||comment===void 0?void 0:comment.comment}),isReplying&&/*#__PURE__*/_jsx(Input,{placeholder:\"Reply to \".concat(user===null||user===void 0?void 0:user.name),handler:replyHandler})]});};export default Comment;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Link","dp","deleteComment","editComment","replyComment","useFetch","useConfirmation","Input","Options","jsx","_jsx","jsxs","_jsxs","Comment","_ref","comment","postId","users","state","user","find","_id","commentedBy","customFetch","dispatch","id","isEditing","setIsEditing","isReplying","setIsReplying","deleteCommentHandler","commentId","replyId","editCommentHandler","value","replyHandler","replyTo","name","Confirmation","DeleteConfirm","toggleShow","options","Reply","Delete","Edit","className","children","to","concat","src","profileImage","alt","placeholder","handler","initialValue"],"sources":["C:/Users/samth/repomain-1/src/components/Comment/Comment.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { dp } from \"../../assets\";\r\nimport { deleteComment, editComment, replyComment } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport useConfirmation from \"../Confirmation/useConfirmation\";\r\nimport Input from \"../Input/Input\";\r\nimport Options from \"../Options/Options\";\r\nimport \"./comment.css\";\r\n\r\nconst Comment = ({ comment, postId }) => {\r\n\tconst { users } = useSelector(state => state.users);\r\n\tconst user = users.find(user => user._id === comment.commentedBy);\r\n\r\n\tconst customFetch = useFetch();\r\n\tconst dispatch = useDispatch();\r\n\tconst { id } = useSelector(state => state.user);\r\n\r\n\tconst [isEditing, setIsEditing] = useState(false);\r\n\tconst [isReplying, setIsReplying] = useState(false);\r\n\r\n\tconst deleteCommentHandler = () => {\r\n\t\tif (comment.commentId) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdeleteComment({ replyId: comment._id, postId, customFetch, commentId: comment.commentId })\r\n\t\t\t);\r\n\t\t} else dispatch(deleteComment({ commentId: comment._id, postId, customFetch }));\r\n\t};\r\n\r\n\tconst editCommentHandler = value => {\r\n\t\tif (comment.commentId) {\r\n\t\t\tdispatch(\r\n\t\t\t\teditComment({\r\n\t\t\t\t\treplyId: comment._id,\r\n\t\t\t\t\tpostId,\r\n\t\t\t\t\tcustomFetch,\r\n\t\t\t\t\tcommentId: comment.commentId,\r\n\t\t\t\t\tcomment: value,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else dispatch(editComment({ commentId: comment._id, postId, comment: value, customFetch }));\r\n\t\tsetIsEditing(false);\r\n\t};\r\n\r\n\tconst replyHandler = value => {\r\n\t\tdispatch(\r\n\t\t\treplyComment({\r\n\t\t\t\tcommentId: comment.commentId || comment._id,\r\n\t\t\t\tid: postId,\r\n\t\t\t\tcomment: value,\r\n\t\t\t\treplyTo: user?.name,\r\n\t\t\t\tcustomFetch,\r\n\t\t\t})\r\n\t\t);\r\n\t\tsetIsReplying(false);\r\n\t};\r\n\r\n\tconst { Confirmation: DeleteConfirm, toggleShow } = useConfirmation(\r\n\t\tdeleteCommentHandler,\r\n\t\t\"Are you sure, You want to delete the comment?\"\r\n\t);\r\n\r\n\tconst options = { Reply: () => setIsReplying(true) };\r\n\tif (id === user?._id) {\r\n\t\toptions.Delete = toggleShow;\r\n\t\toptions.Edit = () => setIsEditing(true);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"comment__group\">\r\n\t\t\t{DeleteConfirm}\r\n\t\t\t<div className=\"comment\">\r\n\t\t\t\t<Link to={`/user/${user?._id}`}>\r\n\t\t\t\t\t<img src={user?.profileImage || dp} alt={`${user?.name}-dp`} className=\"comment__dp\" />\r\n\t\t\t\t</Link>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h3>{user?.name || \"user\"}</h3>\r\n\t\t\t\t\t<p className=\"comment__text\">\r\n\t\t\t\t\t\t{comment?.replyTo && <span>@{comment.replyTo}</span>} {comment?.comment}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Options options={options} id={comment._id} />\r\n\t\t\t</div>\r\n\t\t\t{isEditing && (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tplaceholder=\"Edit Comment\"\r\n\t\t\t\t\thandler={editCommentHandler}\r\n\t\t\t\t\tinitialValue={comment?.comment}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{isReplying && <Input placeholder={`Reply to ${user?.name}`} handler={replyHandler} />}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Comment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}