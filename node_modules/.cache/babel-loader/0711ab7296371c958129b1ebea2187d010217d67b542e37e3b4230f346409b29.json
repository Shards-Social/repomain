{"ast":null,"code":"import Database from './database.js';\nfunction noop() {}\nfunction run(fn) {\n  return fn();\n}\nfunction blank_object() {\n  return Object.create(null);\n}\nfunction run_all(fns) {\n  fns.forEach(run);\n}\nfunction is_function(thing) {\n  return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n  return a != a ? b == b : a !== b || a && typeof a === 'object' || typeof a === 'function';\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n  if (!src_url_equal_anchor) {\n    src_url_equal_anchor = document.createElement('a');\n  }\n  src_url_equal_anchor.href = url;\n  return element_src === src_url_equal_anchor.href;\n}\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\nfunction action_destroyer(action_result) {\n  return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction append(target, node) {\n  target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n  target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n  node.parentNode.removeChild(node);\n}\nfunction element(name) {\n  return document.createElement(name);\n}\nfunction text(data) {\n  return document.createTextNode(data);\n}\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return () => node.removeEventListener(event, handler, options);\n}\nfunction attr(node, attribute, value) {\n  if (value == null) node.removeAttribute(attribute);else if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\nfunction set_data(text, data) {\n  data = '' + data;\n  if (text.wholeText !== data) text.data = data;\n}\nfunction set_input_value(input, value) {\n  input.value = value == null ? '' : value;\n}\nfunction set_style(node, key, value, important) {\n  if (value === null) {\n    node.style.removeProperty(key);\n  } else {\n    node.style.setProperty(key, value, important ? 'important' : '');\n  }\n}\nlet current_component;\nfunction set_current_component(component) {\n  current_component = component;\n}\nconst dirty_components = [];\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n  if (!update_scheduled) {\n    update_scheduled = true;\n    resolved_promise.then(flush);\n  }\n}\nfunction tick() {\n  schedule_update();\n  return resolved_promise;\n}\nfunction add_render_callback(fn) {\n  render_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n  const saved_component = current_component;\n  do {\n    // first, call beforeUpdate functions\n    // and update components\n    while (flushidx < dirty_components.length) {\n      const component = dirty_components[flushidx];\n      flushidx++;\n      set_current_component(component);\n      update(component.$$);\n    }\n    set_current_component(null);\n    dirty_components.length = 0;\n    flushidx = 0;\n    while (binding_callbacks.length) binding_callbacks.pop()();\n    // then, once components are updated, call\n    // afterUpdate functions. This may cause\n    // subsequent updates...\n    for (let i = 0; i < render_callbacks.length; i += 1) {\n      const callback = render_callbacks[i];\n      if (!seen_callbacks.has(callback)) {\n        // ...so guard against infinite loops\n        seen_callbacks.add(callback);\n        callback();\n      }\n    }\n    render_callbacks.length = 0;\n  } while (dirty_components.length);\n  while (flush_callbacks.length) {\n    flush_callbacks.pop()();\n  }\n  update_scheduled = false;\n  seen_callbacks.clear();\n  set_current_component(saved_component);\n}\nfunction update($$) {\n  if ($$.fragment !== null) {\n    $$.update();\n    run_all($$.before_update);\n    const dirty = $$.dirty;\n    $$.dirty = [-1];\n    $$.fragment && $$.fragment.p($$.ctx, dirty);\n    $$.after_update.forEach(add_render_callback);\n  }\n}\nconst outroing = new Set();\nfunction transition_in(block, local) {\n  if (block && block.i) {\n    outroing.delete(block);\n    block.i(local);\n  }\n}\nconst globals = typeof window !== 'undefined' ? window : typeof globalThis !== 'undefined' ? globalThis : global;\nfunction destroy_block(block, lookup) {\n  block.d(1);\n  lookup.delete(block.key);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n  let o = old_blocks.length;\n  let n = list.length;\n  let i = o;\n  const old_indexes = {};\n  while (i--) old_indexes[old_blocks[i].key] = i;\n  const new_blocks = [];\n  const new_lookup = new Map();\n  const deltas = new Map();\n  i = n;\n  while (i--) {\n    const child_ctx = get_context(ctx, list, i);\n    const key = get_key(child_ctx);\n    let block = lookup.get(key);\n    if (!block) {\n      block = create_each_block(key, child_ctx);\n      block.c();\n    } else if (dynamic) {\n      block.p(child_ctx, dirty);\n    }\n    new_lookup.set(key, new_blocks[i] = block);\n    if (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n  }\n  const will_move = new Set();\n  const did_move = new Set();\n  function insert(block) {\n    transition_in(block, 1);\n    block.m(node, next);\n    lookup.set(block.key, block);\n    next = block.first;\n    n--;\n  }\n  while (o && n) {\n    const new_block = new_blocks[n - 1];\n    const old_block = old_blocks[o - 1];\n    const new_key = new_block.key;\n    const old_key = old_block.key;\n    if (new_block === old_block) {\n      // do nothing\n      next = new_block.first;\n      o--;\n      n--;\n    } else if (!new_lookup.has(old_key)) {\n      // remove old block\n      destroy(old_block, lookup);\n      o--;\n    } else if (!lookup.has(new_key) || will_move.has(new_key)) {\n      insert(new_block);\n    } else if (did_move.has(old_key)) {\n      o--;\n    } else if (deltas.get(new_key) > deltas.get(old_key)) {\n      did_move.add(new_key);\n      insert(new_block);\n    } else {\n      will_move.add(old_key);\n      o--;\n    }\n  }\n  while (o--) {\n    const old_block = old_blocks[o];\n    if (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n  }\n  while (n) insert(new_blocks[n - 1]);\n  return new_blocks;\n}\nfunction mount_component(component, target, anchor, customElement) {\n  const {\n    fragment,\n    on_mount,\n    on_destroy,\n    after_update\n  } = component.$$;\n  fragment && fragment.m(target, anchor);\n  if (!customElement) {\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n      const new_on_destroy = on_mount.map(run).filter(is_function);\n      if (on_destroy) {\n        on_destroy.push(...new_on_destroy);\n      } else {\n        // Edge case - component was destroyed immediately,\n        // most likely as a result of a binding initialising\n        run_all(new_on_destroy);\n      }\n      component.$$.on_mount = [];\n    });\n  }\n  after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n  const $$ = component.$$;\n  if ($$.fragment !== null) {\n    run_all($$.on_destroy);\n    $$.fragment && $$.fragment.d(detaching);\n    // TODO null out other refs, including component.$$ (but need to\n    // preserve final state?)\n    $$.on_destroy = $$.fragment = null;\n    $$.ctx = [];\n  }\n}\nfunction make_dirty(component, i) {\n  if (component.$$.dirty[0] === -1) {\n    dirty_components.push(component);\n    schedule_update();\n    component.$$.dirty.fill(0);\n  }\n  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles) {\n  let dirty = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : [-1];\n  const parent_component = current_component;\n  set_current_component(component);\n  const $$ = component.$$ = {\n    fragment: null,\n    ctx: null,\n    // state\n    props,\n    update: noop,\n    not_equal,\n    bound: blank_object(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    on_disconnect: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(parent_component ? parent_component.$$.context : []),\n    // everything else\n    callbacks: blank_object(),\n    dirty,\n    skip_bound: false,\n    root: options.target || parent_component.$$.root\n  };\n  append_styles && append_styles($$.root);\n  let ready = false;\n  $$.ctx = instance ? instance(component, options.props || {}, function (i, ret) {\n    const value = (arguments.length <= 2 ? 0 : arguments.length - 2) ? arguments.length <= 2 ? undefined : arguments[2] : ret;\n    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n      if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n      if (ready) make_dirty(component, i);\n    }\n    return ret;\n  }) : [];\n  $$.update();\n  ready = true;\n  run_all($$.before_update);\n  // `false` as a special case of no DOM component\n  $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n  if (options.target) {\n    {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      $$.fragment && $$.fragment.c();\n    }\n    mount_component(component, options.target, undefined, undefined);\n    flush();\n  }\n  set_current_component(parent_component);\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n  $destroy() {\n    destroy_component(this, 1);\n    this.$destroy = noop;\n  }\n  $on(type, callback) {\n    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n    callbacks.push(callback);\n    return () => {\n      const index = callbacks.indexOf(callback);\n      if (index !== -1) callbacks.splice(index, 1);\n    };\n  }\n  $set($$props) {\n    if (this.$$set && !is_empty($$props)) {\n      this.$$.skip_bound = true;\n      this.$$set($$props);\n      this.$$.skip_bound = false;\n    }\n  }\n}\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [[-1, '✨', 'custom'], [0, '😀', 'smileys-emotion'], [1, '👋', 'people-body'], [3, '🐱', 'animals-nature'], [4, '🍎', 'food-drink'], [5, '🏠️', 'travel-places'], [6, '⚽', 'activities'], [7, '📝', 'objects'], [8, '⛔️', 'symbols'], [9, '🏁', 'flags']].map(_ref => {\n  let [id, emoji, name] = _ref;\n  return {\n    id,\n    emoji,\n    name\n  };\n});\nconst groups = allGroups.slice(1);\nconst customGroup = allGroups[0];\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj(emoji) {\n  return emoji.unicode.includes('\\u200d');\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '🫠': 14,\n  '🥲': 13.1,\n  // smiling face with tear, technically from v13 but see note above\n  '🥻': 12.1,\n  // sari, technically from v12 but see note above\n  '🥰': 11,\n  '🤩': 5,\n  '👱‍♀️': 4,\n  '🤣': 3,\n  '👁️‍🗨️': 2,\n  '😀': 1,\n  '😐️': 0.7,\n  '😃': 0.6\n};\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '🖐️';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = ['😊', '😒', '♥️', '👍️', '😍', '😂', '😭', '☺️', '😔', '😩', '😏', '💕', '🙌', '😘'];\n\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' + '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n  const ctx = canvas.getContext('2d');\n  ctx.textBaseline = 'top';\n  ctx.font = \"100px \".concat(FONT_FAMILY);\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n  return ctx.getImageData(0, 0, 1, 1).data;\n};\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,');\n};\nfunction testColorEmojiSupported(text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2);\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n\nfunction determineEmojiSupportLevel() {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version;\n      }\n    }\n  } catch (e) {// canvas error\n  } finally {}\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1]; // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nconst emojiSupportLevelPromise = new Promise(resolve => rIC(() => resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n));\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone(str, skinTone) {\n  if (skinTone === 0) {\n    return str;\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) + String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) + str.substring(zwjIndex);\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1);\n}\nfunction halt(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement(decrement, val, arr) {\n  val += decrement ? -1 : 1;\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val;\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy(arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res;\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI(emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res;\n  };\n  return emojis.map(_ref2 => {\n    let {\n      unicode,\n      skins,\n      shortcodes,\n      url,\n      name,\n      category\n    } = _ref2;\n    return {\n      unicode,\n      name,\n      shortcodes,\n      url,\n      category,\n      id: unicode || name,\n      skins: skins && toSimpleSkinsMap(skins),\n      title: (shortcodes || []).join(', ')\n    };\n  });\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// Svelte action to calculate the width of an element and auto-update\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\nfunction calculateWidth(node, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => onUpdate(entries[0].contentRect.width));\n    resizeObserver.observe(node);\n  } else {\n    // just set the width once, don't bother trying to track it\n    rAF(() => onUpdate(node.getBoundingClientRect().width));\n  }\n\n  // cleanup function (called on destroy)\n  return {\n    destroy() {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    }\n  };\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth(node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width;\n  }\n}\nlet baselineEmojiWidth;\nfunction checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') {\n      // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n  }\n}\n\n// Measure after style/layout are complete\n\nconst requestPostAnimationFrame = callback => {\n  rAF(() => {\n    setTimeout(callback);\n  });\n};\n\n// like lodash's uniq\n\nfunction uniq(arr) {\n  return uniqBy(arr, _ => _);\n}\n\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v3.46.4 */\n\nconst {\n  Map: Map_1\n} = globals;\nfunction get_each_context(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[63] = list[i];\n  child_ctx[65] = i;\n  return child_ctx;\n}\nfunction get_each_context_1(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[66] = list[i];\n  child_ctx[65] = i;\n  return child_ctx;\n}\nfunction get_each_context_2(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[63] = list[i];\n  child_ctx[65] = i;\n  return child_ctx;\n}\nfunction get_each_context_3(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[69] = list[i];\n  return child_ctx;\n}\nfunction get_each_context_4(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[72] = list[i];\n  child_ctx[65] = i;\n  return child_ctx;\n}\n\n// (43:38) {#each skinTones as skinTone, i (skinTone)}\nfunction create_each_block_4(key_1, ctx) {\n  let div;\n  let t_value = /*skinTone*/ctx[72] + \"\";\n  let t;\n  let div_id_value;\n  let div_class_value;\n  let div_aria_selected_value;\n  let div_title_value;\n  let div_aria_label_value;\n  return {\n    key: key_1,\n    first: null,\n    c() {\n      div = element(\"div\");\n      t = text(t_value);\n      attr(div, \"id\", div_id_value = \"skintone-\" + /*i*/ctx[65]);\n      attr(div, \"class\", div_class_value = \"emoji hide-focus \" + ( /*i*/ctx[65] === /*activeSkinTone*/ctx[20] ? 'active' : ''));\n      attr(div, \"aria-selected\", div_aria_selected_value = /*i*/ctx[65] === /*activeSkinTone*/ctx[20]);\n      attr(div, \"role\", \"option\");\n      attr(div, \"title\", div_title_value = /*i18n*/ctx[0].skinTones[/*i*/ctx[65]]);\n      attr(div, \"tabindex\", \"-1\");\n      attr(div, \"aria-label\", div_aria_label_value = /*i18n*/ctx[0].skinTones[/*i*/ctx[65]]);\n      this.first = div;\n    },\n    m(target, anchor) {\n      insert(target, div, anchor);\n      append(div, t);\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (dirty[0] & /*skinTones*/512 && t_value !== (t_value = /*skinTone*/ctx[72] + \"\")) set_data(t, t_value);\n      if (dirty[0] & /*skinTones*/512 && div_id_value !== (div_id_value = \"skintone-\" + /*i*/ctx[65])) {\n        attr(div, \"id\", div_id_value);\n      }\n      if (dirty[0] & /*skinTones, activeSkinTone*/1049088 && div_class_value !== (div_class_value = \"emoji hide-focus \" + ( /*i*/ctx[65] === /*activeSkinTone*/ctx[20] ? 'active' : ''))) {\n        attr(div, \"class\", div_class_value);\n      }\n      if (dirty[0] & /*skinTones, activeSkinTone*/1049088 && div_aria_selected_value !== (div_aria_selected_value = /*i*/ctx[65] === /*activeSkinTone*/ctx[20])) {\n        attr(div, \"aria-selected\", div_aria_selected_value);\n      }\n      if (dirty[0] & /*i18n, skinTones*/513 && div_title_value !== (div_title_value = /*i18n*/ctx[0].skinTones[/*i*/ctx[65]])) {\n        attr(div, \"title\", div_title_value);\n      }\n      if (dirty[0] & /*i18n, skinTones*/513 && div_aria_label_value !== (div_aria_label_value = /*i18n*/ctx[0].skinTones[/*i*/ctx[65]])) {\n        attr(div, \"aria-label\", div_aria_label_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(div);\n    }\n  };\n}\n\n// (53:33) {#each groups as group (group.id)}\nfunction create_each_block_3(key_1, ctx) {\n  let button;\n  let div;\n  let t_value = /*group*/ctx[69].emoji + \"\";\n  let t;\n  let button_aria_controls_value;\n  let button_aria_label_value;\n  let button_aria_selected_value;\n  let button_title_value;\n  let mounted;\n  let dispose;\n  function click_handler() {\n    return /*click_handler*/ctx[49]( /*group*/ctx[69]);\n  }\n  return {\n    key: key_1,\n    first: null,\n    c() {\n      button = element(\"button\");\n      div = element(\"div\");\n      t = text(t_value);\n      attr(div, \"class\", \"nav-emoji emoji\");\n      attr(button, \"role\", \"tab\");\n      attr(button, \"class\", \"nav-button\");\n      attr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" + /*group*/ctx[69].id);\n      attr(button, \"aria-label\", button_aria_label_value = /*i18n*/ctx[0].categories[/*group*/ctx[69].name]);\n      attr(button, \"aria-selected\", button_aria_selected_value = ! /*searchMode*/ctx[4] && /*currentGroup*/ctx[13].id === /*group*/ctx[69].id);\n      attr(button, \"title\", button_title_value = /*i18n*/ctx[0].categories[/*group*/ctx[69].name]);\n      this.first = button;\n    },\n    m(target, anchor) {\n      insert(target, button, anchor);\n      append(button, div);\n      append(div, t);\n      if (!mounted) {\n        dispose = listen(button, \"click\", click_handler);\n        mounted = true;\n      }\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (dirty[0] & /*groups*/4096 && t_value !== (t_value = /*group*/ctx[69].emoji + \"\")) set_data(t, t_value);\n      if (dirty[0] & /*groups*/4096 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" + /*group*/ctx[69].id)) {\n        attr(button, \"aria-controls\", button_aria_controls_value);\n      }\n      if (dirty[0] & /*i18n, groups*/4097 && button_aria_label_value !== (button_aria_label_value = /*i18n*/ctx[0].categories[/*group*/ctx[69].name])) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n      if (dirty[0] & /*searchMode, currentGroup, groups*/12304 && button_aria_selected_value !== (button_aria_selected_value = ! /*searchMode*/ctx[4] && /*currentGroup*/ctx[13].id === /*group*/ctx[69].id)) {\n        attr(button, \"aria-selected\", button_aria_selected_value);\n      }\n      if (dirty[0] & /*i18n, groups*/4097 && button_title_value !== (button_title_value = /*i18n*/ctx[0].categories[/*group*/ctx[69].name])) {\n        attr(button, \"title\", button_title_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(button);\n      mounted = false;\n      dispose();\n    }\n  };\n}\n\n// (93:100) {:else}\nfunction create_else_block_1(ctx) {\n  let img;\n  let img_src_value;\n  return {\n    c() {\n      img = element(\"img\");\n      attr(img, \"class\", \"custom-emoji\");\n      if (!src_url_equal(img.src, img_src_value = /*emoji*/ctx[63].url)) attr(img, \"src\", img_src_value);\n      attr(img, \"alt\", \"\");\n      attr(img, \"loading\", \"lazy\");\n    },\n    m(target, anchor) {\n      insert(target, img, anchor);\n    },\n    p(ctx, dirty) {\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && !src_url_equal(img.src, img_src_value = /*emoji*/ctx[63].url)) {\n        attr(img, \"src\", img_src_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(img);\n    }\n  };\n}\n\n// (93:40) {#if emoji.unicode}\nfunction create_if_block_1(ctx) {\n  let t_value = /*unicodeWithSkin*/ctx[27]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]) + \"\";\n  let t;\n  return {\n    c() {\n      t = text(t_value);\n    },\n    m(target, anchor) {\n      insert(target, t, anchor);\n    },\n    p(ctx, dirty) {\n      if (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/33024 && t_value !== (t_value = /*unicodeWithSkin*/ctx[27]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]) + \"\")) set_data(t, t_value);\n    },\n    d(detaching) {\n      if (detaching) detach(t);\n    }\n  };\n}\n\n// (88:53) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\nfunction create_each_block_2(key_1, ctx) {\n  let button;\n  let button_role_value;\n  let button_aria_selected_value;\n  let button_aria_label_value;\n  let button_title_value;\n  let button_class_value;\n  let button_id_value;\n  function select_block_type(ctx, dirty) {\n    if ( /*emoji*/ctx[63].unicode) return create_if_block_1;\n    return create_else_block_1;\n  }\n  let current_block_type = select_block_type(ctx);\n  let if_block = current_block_type(ctx);\n  return {\n    key: key_1,\n    first: null,\n    c() {\n      button = element(\"button\");\n      if_block.c();\n      attr(button, \"role\", button_role_value = /*searchMode*/ctx[4] ? 'option' : 'menuitem');\n      attr(button, \"aria-selected\", button_aria_selected_value = /*searchMode*/ctx[4] ? /*i*/ctx[65] == /*activeSearchItem*/ctx[5] : '');\n      attr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ctx[28]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]));\n      attr(button, \"title\", button_title_value = /*emoji*/ctx[63].title);\n      attr(button, \"class\", button_class_value = \"emoji \" + ( /*searchMode*/ctx[4] && /*i*/ctx[65] === /*activeSearchItem*/ctx[5] ? 'active' : ''));\n      attr(button, \"id\", button_id_value = \"emo-\" + /*emoji*/ctx[63].id);\n      this.first = button;\n    },\n    m(target, anchor) {\n      insert(target, button, anchor);\n      if_block.m(button, null);\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n        if_block.p(ctx, dirty);\n      } else {\n        if_block.d(1);\n        if_block = current_block_type(ctx);\n        if (if_block) {\n          if_block.c();\n          if_block.m(button, null);\n        }\n      }\n      if (dirty[0] & /*searchMode*/16 && button_role_value !== (button_role_value = /*searchMode*/ctx[4] ? 'option' : 'menuitem')) {\n        attr(button, \"role\", button_role_value);\n      }\n      if (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/32816 && button_aria_selected_value !== (button_aria_selected_value = /*searchMode*/ctx[4] ? /*i*/ctx[65] == /*activeSearchItem*/ctx[5] : '')) {\n        attr(button, \"aria-selected\", button_aria_selected_value);\n      }\n      if (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/33024 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ctx[28]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]))) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && button_title_value !== (button_title_value = /*emoji*/ctx[63].title)) {\n        attr(button, \"title\", button_title_value);\n      }\n      if (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/32816 && button_class_value !== (button_class_value = \"emoji \" + ( /*searchMode*/ctx[4] && /*i*/ctx[65] === /*activeSearchItem*/ctx[5] ? 'active' : ''))) {\n        attr(button, \"class\", button_class_value);\n      }\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && button_id_value !== (button_id_value = \"emo-\" + /*emoji*/ctx[63].id)) {\n        attr(button, \"id\", button_id_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(button);\n      if_block.d();\n    }\n  };\n}\n\n// (69:36) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\nfunction create_each_block_1(key_1, ctx) {\n  let div0;\n  let t_value = ( /*searchMode*/ctx[4] ? /*i18n*/ctx[0].searchResultsLabel : /*emojiWithCategory*/ctx[66].category ? /*emojiWithCategory*/ctx[66].category : /*currentEmojisWithCategories*/ctx[15].length > 1 ? /*i18n*/ctx[0].categories.custom : /*i18n*/ctx[0].categories[/*currentGroup*/ctx[13].name]) + \"\";\n  let t;\n  let div0_id_value;\n  let div0_class_value;\n  let div1;\n  let each_blocks = [];\n  let each_1_lookup = new Map_1();\n  let div1_role_value;\n  let div1_aria_labelledby_value;\n  let div1_id_value;\n  let each_value_2 = /*emojiWithCategory*/ctx[66].emojis;\n  const get_key = ctx => /*emoji*/ctx[63].id;\n  for (let i = 0; i < each_value_2.length; i += 1) {\n    let child_ctx = get_each_context_2(ctx, each_value_2, i);\n    let key = get_key(child_ctx);\n    each_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\n  }\n  return {\n    key: key_1,\n    first: null,\n    c() {\n      div0 = element(\"div\");\n      t = text(t_value);\n      div1 = element(\"div\");\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      attr(div0, \"id\", div0_id_value = \"menu-label-\" + /*i*/ctx[65]);\n      attr(div0, \"class\", div0_class_value = \"category \" + ( /*currentEmojisWithCategories*/ctx[15].length === 1 && /*currentEmojisWithCategories*/ctx[15][0].category === '' ? 'gone' : ''));\n      attr(div0, \"aria-hidden\", \"true\");\n      attr(div1, \"class\", \"emoji-menu\");\n      attr(div1, \"role\", div1_role_value = /*searchMode*/ctx[4] ? 'listbox' : 'menu');\n      attr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" + /*i*/ctx[65]);\n      attr(div1, \"id\", div1_id_value = /*searchMode*/ctx[4] ? 'search-results' : '');\n      this.first = div0;\n    },\n    m(target, anchor) {\n      insert(target, div0, anchor);\n      append(div0, t);\n      insert(target, div1, anchor);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].m(div1, null);\n      }\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (dirty[0] & /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/40977 && t_value !== (t_value = ( /*searchMode*/ctx[4] ? /*i18n*/ctx[0].searchResultsLabel : /*emojiWithCategory*/ctx[66].category ? /*emojiWithCategory*/ctx[66].category : /*currentEmojisWithCategories*/ctx[15].length > 1 ? /*i18n*/ctx[0].categories.custom : /*i18n*/ctx[0].categories[/*currentGroup*/ctx[13].name]) + \"\")) set_data(t, t_value);\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && div0_id_value !== (div0_id_value = \"menu-label-\" + /*i*/ctx[65])) {\n        attr(div0, \"id\", div0_id_value);\n      }\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && div0_class_value !== (div0_class_value = \"category \" + ( /*currentEmojisWithCategories*/ctx[15].length === 1 && /*currentEmojisWithCategories*/ctx[15][0].category === '' ? 'gone' : ''))) {\n        attr(div0, \"class\", div0_class_value);\n      }\n      if (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin*/402686256) {\n        each_value_2 = /*emojiWithCategory*/ctx[66].emojis;\n        each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\n      }\n      if (dirty[0] & /*searchMode*/16 && div1_role_value !== (div1_role_value = /*searchMode*/ctx[4] ? 'listbox' : 'menu')) {\n        attr(div1, \"role\", div1_role_value);\n      }\n      if (dirty[0] & /*currentEmojisWithCategories*/32768 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" + /*i*/ctx[65])) {\n        attr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\n      }\n      if (dirty[0] & /*searchMode*/16 && div1_id_value !== (div1_id_value = /*searchMode*/ctx[4] ? 'search-results' : '')) {\n        attr(div1, \"id\", div1_id_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(div0);\n      if (detaching) detach(div1);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].d();\n      }\n    }\n  };\n}\n\n// (102:94) {:else}\nfunction create_else_block(ctx) {\n  let img;\n  let img_src_value;\n  return {\n    c() {\n      img = element(\"img\");\n      attr(img, \"class\", \"custom-emoji\");\n      if (!src_url_equal(img.src, img_src_value = /*emoji*/ctx[63].url)) attr(img, \"src\", img_src_value);\n      attr(img, \"alt\", \"\");\n      attr(img, \"loading\", \"lazy\");\n    },\n    m(target, anchor) {\n      insert(target, img, anchor);\n    },\n    p(ctx, dirty) {\n      if (dirty[0] & /*currentFavorites*/1024 && !src_url_equal(img.src, img_src_value = /*emoji*/ctx[63].url)) {\n        attr(img, \"src\", img_src_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(img);\n    }\n  };\n}\n\n// (102:34) {#if emoji.unicode}\nfunction create_if_block(ctx) {\n  let t_value = /*unicodeWithSkin*/ctx[27]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]) + \"\";\n  let t;\n  return {\n    c() {\n      t = text(t_value);\n    },\n    m(target, anchor) {\n      insert(target, t, anchor);\n    },\n    p(ctx, dirty) {\n      if (dirty[0] & /*currentFavorites, currentSkinTone*/1280 && t_value !== (t_value = /*unicodeWithSkin*/ctx[27]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]) + \"\")) set_data(t, t_value);\n    },\n    d(detaching) {\n      if (detaching) detach(t);\n    }\n  };\n}\n\n// (98:102) {#each currentFavorites as emoji, i (emoji.id)}\nfunction create_each_block(key_1, ctx) {\n  let button;\n  let button_aria_label_value;\n  let button_title_value;\n  let button_id_value;\n  function select_block_type_1(ctx, dirty) {\n    if ( /*emoji*/ctx[63].unicode) return create_if_block;\n    return create_else_block;\n  }\n  let current_block_type = select_block_type_1(ctx);\n  let if_block = current_block_type(ctx);\n  return {\n    key: key_1,\n    first: null,\n    c() {\n      button = element(\"button\");\n      if_block.c();\n      attr(button, \"role\", \"menuitem\");\n      attr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ctx[28]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]));\n      attr(button, \"title\", button_title_value = /*emoji*/ctx[63].title);\n      attr(button, \"class\", \"emoji\");\n      attr(button, \"id\", button_id_value = \"fav-\" + /*emoji*/ctx[63].id);\n      this.first = button;\n    },\n    m(target, anchor) {\n      insert(target, button, anchor);\n      if_block.m(button, null);\n    },\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\n        if_block.p(ctx, dirty);\n      } else {\n        if_block.d(1);\n        if_block = current_block_type(ctx);\n        if (if_block) {\n          if_block.c();\n          if_block.m(button, null);\n        }\n      }\n      if (dirty[0] & /*currentFavorites, currentSkinTone*/1280 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ctx[28]( /*emoji*/ctx[63], /*currentSkinTone*/ctx[8]))) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n      if (dirty[0] & /*currentFavorites*/1024 && button_title_value !== (button_title_value = /*emoji*/ctx[63].title)) {\n        attr(button, \"title\", button_title_value);\n      }\n      if (dirty[0] & /*currentFavorites*/1024 && button_id_value !== (button_id_value = \"fav-\" + /*emoji*/ctx[63].id)) {\n        attr(button, \"id\", button_id_value);\n      }\n    },\n    d(detaching) {\n      if (detaching) detach(button);\n      if_block.d();\n    }\n  };\n}\nfunction create_fragment(ctx) {\n  let section;\n  let div0;\n  let div4;\n  let div1;\n  let input;\n  let input_placeholder_value;\n  let input_aria_expanded_value;\n  let input_aria_activedescendant_value;\n  let label;\n  let t0_value = /*i18n*/ctx[0].searchLabel + \"\";\n  let t0;\n  let span0;\n  let t1_value = /*i18n*/ctx[0].searchDescription + \"\";\n  let t1;\n  let div2;\n  let button0;\n  let t2;\n  let button0_class_value;\n  let div2_class_value;\n  let span1;\n  let t3_value = /*i18n*/ctx[0].skinToneDescription + \"\";\n  let t3;\n  let div3;\n  let each_blocks_3 = [];\n  let each0_lookup = new Map_1();\n  let div3_class_value;\n  let div3_aria_label_value;\n  let div3_aria_activedescendant_value;\n  let div3_aria_hidden_value;\n  let div5;\n  let each_blocks_2 = [];\n  let each1_lookup = new Map_1();\n  let div5_aria_label_value;\n  let div7;\n  let div6;\n  let div8;\n  let t4;\n  let div8_class_value;\n  let div10;\n  let div9;\n  let each_blocks_1 = [];\n  let each2_lookup = new Map_1();\n  let div10_class_value;\n  let div10_role_value;\n  let div10_aria_label_value;\n  let div10_id_value;\n  let div11;\n  let each_blocks = [];\n  let each3_lookup = new Map_1();\n  let div11_class_value;\n  let div11_aria_label_value;\n  let button1;\n  let section_aria_label_value;\n  let mounted;\n  let dispose;\n  let each_value_4 = /*skinTones*/ctx[9];\n  const get_key = ctx => /*skinTone*/ctx[72];\n  for (let i = 0; i < each_value_4.length; i += 1) {\n    let child_ctx = get_each_context_4(ctx, each_value_4, i);\n    let key = get_key(child_ctx);\n    each0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\n  }\n  let each_value_3 = /*groups*/ctx[12];\n  const get_key_1 = ctx => /*group*/ctx[69].id;\n  for (let i = 0; i < each_value_3.length; i += 1) {\n    let child_ctx = get_each_context_3(ctx, each_value_3, i);\n    let key = get_key_1(child_ctx);\n    each1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\n  }\n  let each_value_1 = /*currentEmojisWithCategories*/ctx[15];\n  const get_key_2 = ctx => /*emojiWithCategory*/ctx[66].category;\n  for (let i = 0; i < each_value_1.length; i += 1) {\n    let child_ctx = get_each_context_1(ctx, each_value_1, i);\n    let key = get_key_2(child_ctx);\n    each2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\n  }\n  let each_value = /*currentFavorites*/ctx[10];\n  const get_key_3 = ctx => /*emoji*/ctx[63].id;\n  for (let i = 0; i < each_value.length; i += 1) {\n    let child_ctx = get_each_context(ctx, each_value, i);\n    let key = get_key_3(child_ctx);\n    each3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\n  }\n  return {\n    c() {\n      section = element(\"section\");\n      div0 = element(\"div\");\n      div4 = element(\"div\");\n      div1 = element(\"div\");\n      input = element(\"input\");\n      label = element(\"label\");\n      t0 = text(t0_value);\n      span0 = element(\"span\");\n      t1 = text(t1_value);\n      div2 = element(\"div\");\n      button0 = element(\"button\");\n      t2 = text( /*skinToneButtonText*/ctx[21]);\n      span1 = element(\"span\");\n      t3 = text(t3_value);\n      div3 = element(\"div\");\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].c();\n      }\n      div5 = element(\"div\");\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].c();\n      }\n      div7 = element(\"div\");\n      div6 = element(\"div\");\n      div8 = element(\"div\");\n      t4 = text( /*message*/ctx[18]);\n      div10 = element(\"div\");\n      div9 = element(\"div\");\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].c();\n      }\n      div11 = element(\"div\");\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n      button1 = element(\"button\");\n      button1.textContent = \"😀\";\n      attr(div0, \"class\", \"pad-top\");\n      attr(input, \"id\", \"search\");\n      attr(input, \"class\", \"search\");\n      attr(input, \"type\", \"search\");\n      attr(input, \"role\", \"combobox\");\n      attr(input, \"enterkeyhint\", \"search\");\n      attr(input, \"placeholder\", input_placeholder_value = /*i18n*/ctx[0].searchLabel);\n      attr(input, \"autocapitalize\", \"none\");\n      attr(input, \"autocomplete\", \"off\");\n      attr(input, \"spellcheck\", \"true\");\n      attr(input, \"aria-expanded\", input_aria_expanded_value = !!( /*searchMode*/ctx[4] && /*currentEmojis*/ctx[1].length));\n      attr(input, \"aria-controls\", \"search-results\");\n      attr(input, \"aria-describedby\", \"search-description\");\n      attr(input, \"aria-autocomplete\", \"list\");\n      attr(input, \"aria-activedescendant\", input_aria_activedescendant_value = /*activeSearchItemId*/ctx[26] ? \"emo-\".concat( /*activeSearchItemId*/ctx[26]) : '');\n      attr(label, \"class\", \"sr-only\");\n      attr(label, \"for\", \"search\");\n      attr(span0, \"id\", \"search-description\");\n      attr(span0, \"class\", \"sr-only\");\n      attr(div1, \"class\", \"search-wrapper\");\n      attr(button0, \"id\", \"skintone-button\");\n      attr(button0, \"class\", button0_class_value = \"emoji \" + ( /*skinTonePickerExpanded*/ctx[6] ? 'hide-focus' : ''));\n      attr(button0, \"aria-label\", /*skinToneButtonLabel*/ctx[23]);\n      attr(button0, \"title\", /*skinToneButtonLabel*/ctx[23]);\n      attr(button0, \"aria-describedby\", \"skintone-description\");\n      attr(button0, \"aria-haspopup\", \"listbox\");\n      attr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ctx[6]);\n      attr(button0, \"aria-controls\", \"skintone-list\");\n      attr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + ( /*skinTonePickerExpandedAfterAnimation*/ctx[19] ? 'expanded' : ''));\n      attr(span1, \"id\", \"skintone-description\");\n      attr(span1, \"class\", \"sr-only\");\n      attr(div3, \"id\", \"skintone-list\");\n      attr(div3, \"class\", div3_class_value = \"skintone-list \" + ( /*skinTonePickerExpanded*/ctx[6] ? '' : 'hidden no-animate'));\n      set_style(div3, \"transform\", \"translateY(\" + ( /*skinTonePickerExpanded*/ctx[6] ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n      attr(div3, \"role\", \"listbox\");\n      attr(div3, \"aria-label\", div3_aria_label_value = /*i18n*/ctx[0].skinTonesLabel);\n      attr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ctx[20]);\n      attr(div3, \"aria-hidden\", div3_aria_hidden_value = ! /*skinTonePickerExpanded*/ctx[6]);\n      attr(div4, \"class\", \"search-row\");\n      attr(div5, \"class\", \"nav\");\n      attr(div5, \"role\", \"tablist\");\n      set_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ctx[12].length + \", 1fr)\");\n      attr(div5, \"aria-label\", div5_aria_label_value = /*i18n*/ctx[0].categoriesLabel);\n      attr(div6, \"class\", \"indicator\");\n      set_style(div6, \"transform\", \"translateX(\" + ( /*isRtl*/ctx[24] ? -1 : 1) * /*currentGroupIndex*/ctx[11] * 100 + \"%)\");\n      attr(div7, \"class\", \"indicator-wrapper\");\n      attr(div8, \"class\", div8_class_value = \"message \" + ( /*message*/ctx[18] ? '' : 'gone'));\n      attr(div8, \"role\", \"alert\");\n      attr(div8, \"aria-live\", \"polite\");\n      attr(div10, \"class\", div10_class_value = \"tabpanel \" + (! /*databaseLoaded*/ctx[14] || /*message*/ctx[18] ? 'gone' : ''));\n      attr(div10, \"role\", div10_role_value = /*searchMode*/ctx[4] ? 'region' : 'tabpanel');\n      attr(div10, \"aria-label\", div10_aria_label_value = /*searchMode*/ctx[4] ? /*i18n*/ctx[0].searchResultsLabel : /*i18n*/ctx[0].categories[/*currentGroup*/ctx[13].name]);\n      attr(div10, \"id\", div10_id_value = /*searchMode*/ctx[4] ? '' : \"tab-\".concat( /*currentGroup*/ctx[13].id));\n      attr(div10, \"tabindex\", \"0\");\n      attr(div11, \"class\", div11_class_value = \"favorites emoji-menu \" + ( /*message*/ctx[18] ? 'gone' : ''));\n      attr(div11, \"role\", \"menu\");\n      attr(div11, \"aria-label\", div11_aria_label_value = /*i18n*/ctx[0].favoritesLabel);\n      set_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ctx[25] + \"px\");\n      attr(button1, \"aria-hidden\", \"true\");\n      attr(button1, \"tabindex\", \"-1\");\n      attr(button1, \"class\", \"abs-pos hidden emoji\");\n      attr(section, \"class\", \"picker\");\n      attr(section, \"aria-label\", section_aria_label_value = /*i18n*/ctx[0].regionLabel);\n      attr(section, \"style\", /*pickerStyle*/ctx[22]);\n    },\n    m(target, anchor) {\n      insert(target, section, anchor);\n      append(section, div0);\n      append(section, div4);\n      append(div4, div1);\n      append(div1, input);\n      set_input_value(input, /*rawSearchText*/ctx[2]);\n      append(div1, label);\n      append(label, t0);\n      append(div1, span0);\n      append(span0, t1);\n      append(div4, div2);\n      append(div2, button0);\n      append(button0, t2);\n      append(div4, span1);\n      append(span1, t3);\n      append(div4, div3);\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].m(div3, null);\n      }\n\n      /*div3_binding*/\n      ctx[48](div3);\n      append(section, div5);\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].m(div5, null);\n      }\n      append(section, div7);\n      append(div7, div6);\n      append(section, div8);\n      append(div8, t4);\n      append(section, div10);\n      append(div10, div9);\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].m(div9, null);\n      }\n\n      /*div10_binding*/\n      ctx[50](div10);\n      append(section, div11);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].m(div11, null);\n      }\n      append(section, button1);\n      /*button1_binding*/\n      ctx[51](button1);\n      /*section_binding*/\n      ctx[52](section);\n      if (!mounted) {\n        dispose = [listen(input, \"input\", /*input_input_handler*/ctx[47]), listen(input, \"keydown\", /*onSearchKeydown*/ctx[30]), listen(button0, \"click\", /*onClickSkinToneButton*/ctx[35]), listen(div3, \"focusout\", /*onSkinToneOptionsFocusOut*/ctx[38]), listen(div3, \"click\", /*onSkinToneOptionsClick*/ctx[34]), listen(div3, \"keydown\", /*onSkinToneOptionsKeydown*/ctx[36]), listen(div3, \"keyup\", /*onSkinToneOptionsKeyup*/ctx[37]), listen(div5, \"keydown\", /*onNavKeydown*/ctx[32]), action_destroyer( /*calculateEmojiGridStyle*/ctx[29].call(null, div9)), listen(div10, \"click\", /*onEmojiClick*/ctx[33]), listen(div11, \"click\", /*onEmojiClick*/ctx[33])];\n        mounted = true;\n      }\n    },\n    p(ctx, dirty) {\n      if (dirty[0] & /*i18n*/1 && input_placeholder_value !== (input_placeholder_value = /*i18n*/ctx[0].searchLabel)) {\n        attr(input, \"placeholder\", input_placeholder_value);\n      }\n      if (dirty[0] & /*searchMode, currentEmojis*/18 && input_aria_expanded_value !== (input_aria_expanded_value = !!( /*searchMode*/ctx[4] && /*currentEmojis*/ctx[1].length))) {\n        attr(input, \"aria-expanded\", input_aria_expanded_value);\n      }\n      if (dirty[0] & /*activeSearchItemId*/67108864 && input_aria_activedescendant_value !== (input_aria_activedescendant_value = /*activeSearchItemId*/ctx[26] ? \"emo-\".concat( /*activeSearchItemId*/ctx[26]) : '')) {\n        attr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\n      }\n      if (dirty[0] & /*rawSearchText*/4) {\n        set_input_value(input, /*rawSearchText*/ctx[2]);\n      }\n      if (dirty[0] & /*i18n*/1 && t0_value !== (t0_value = /*i18n*/ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\n      if (dirty[0] & /*i18n*/1 && t1_value !== (t1_value = /*i18n*/ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\n      if (dirty[0] & /*skinToneButtonText*/2097152) set_data(t2, /*skinToneButtonText*/ctx[21]);\n      if (dirty[0] & /*skinTonePickerExpanded*/64 && button0_class_value !== (button0_class_value = \"emoji \" + ( /*skinTonePickerExpanded*/ctx[6] ? 'hide-focus' : ''))) {\n        attr(button0, \"class\", button0_class_value);\n      }\n      if (dirty[0] & /*skinToneButtonLabel*/8388608) {\n        attr(button0, \"aria-label\", /*skinToneButtonLabel*/ctx[23]);\n      }\n      if (dirty[0] & /*skinToneButtonLabel*/8388608) {\n        attr(button0, \"title\", /*skinToneButtonLabel*/ctx[23]);\n      }\n      if (dirty[0] & /*skinTonePickerExpanded*/64) {\n        attr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ctx[6]);\n      }\n      if (dirty[0] & /*skinTonePickerExpandedAfterAnimation*/524288 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + ( /*skinTonePickerExpandedAfterAnimation*/ctx[19] ? 'expanded' : ''))) {\n        attr(div2, \"class\", div2_class_value);\n      }\n      if (dirty[0] & /*i18n*/1 && t3_value !== (t3_value = /*i18n*/ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\n      if (dirty[0] & /*skinTones, activeSkinTone, i18n*/1049089) {\n        each_value_4 = /*skinTones*/ctx[9];\n        each_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\n      }\n      if (dirty[0] & /*skinTonePickerExpanded*/64 && div3_class_value !== (div3_class_value = \"skintone-list \" + ( /*skinTonePickerExpanded*/ctx[6] ? '' : 'hidden no-animate'))) {\n        attr(div3, \"class\", div3_class_value);\n      }\n      if (dirty[0] & /*skinTonePickerExpanded*/64) {\n        set_style(div3, \"transform\", \"translateY(\" + ( /*skinTonePickerExpanded*/ctx[6] ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n      }\n      if (dirty[0] & /*i18n*/1 && div3_aria_label_value !== (div3_aria_label_value = /*i18n*/ctx[0].skinTonesLabel)) {\n        attr(div3, \"aria-label\", div3_aria_label_value);\n      }\n      if (dirty[0] & /*activeSkinTone*/1048576 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ctx[20])) {\n        attr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\n      }\n      if (dirty[0] & /*skinTonePickerExpanded*/64 && div3_aria_hidden_value !== (div3_aria_hidden_value = ! /*skinTonePickerExpanded*/ctx[6])) {\n        attr(div3, \"aria-hidden\", div3_aria_hidden_value);\n      }\n      if (dirty[0] & /*groups, i18n, searchMode, currentGroup*/12305 | dirty[1] & /*onNavClick*/1) {\n        each_value_3 = /*groups*/ctx[12];\n        each_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\n      }\n      if (dirty[0] & /*groups*/4096) {\n        set_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ctx[12].length + \", 1fr)\");\n      }\n      if (dirty[0] & /*i18n*/1 && div5_aria_label_value !== (div5_aria_label_value = /*i18n*/ctx[0].categoriesLabel)) {\n        attr(div5, \"aria-label\", div5_aria_label_value);\n      }\n      if (dirty[0] & /*isRtl, currentGroupIndex*/16779264) {\n        set_style(div6, \"transform\", \"translateX(\" + ( /*isRtl*/ctx[24] ? -1 : 1) * /*currentGroupIndex*/ctx[11] * 100 + \"%)\");\n      }\n      if (dirty[0] & /*message*/262144) set_data(t4, /*message*/ctx[18]);\n      if (dirty[0] & /*message*/262144 && div8_class_value !== (div8_class_value = \"message \" + ( /*message*/ctx[18] ? '' : 'gone'))) {\n        attr(div8, \"class\", div8_class_value);\n      }\n      if (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin, i18n, currentGroup*/402694449) {\n        each_value_1 = /*currentEmojisWithCategories*/ctx[15];\n        each_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\n      }\n      if (dirty[0] & /*databaseLoaded, message*/278528 && div10_class_value !== (div10_class_value = \"tabpanel \" + (! /*databaseLoaded*/ctx[14] || /*message*/ctx[18] ? 'gone' : ''))) {\n        attr(div10, \"class\", div10_class_value);\n      }\n      if (dirty[0] & /*searchMode*/16 && div10_role_value !== (div10_role_value = /*searchMode*/ctx[4] ? 'region' : 'tabpanel')) {\n        attr(div10, \"role\", div10_role_value);\n      }\n      if (dirty[0] & /*searchMode, i18n, currentGroup*/8209 && div10_aria_label_value !== (div10_aria_label_value = /*searchMode*/ctx[4] ? /*i18n*/ctx[0].searchResultsLabel : /*i18n*/ctx[0].categories[/*currentGroup*/ctx[13].name])) {\n        attr(div10, \"aria-label\", div10_aria_label_value);\n      }\n      if (dirty[0] & /*searchMode, currentGroup*/8208 && div10_id_value !== (div10_id_value = /*searchMode*/ctx[4] ? '' : \"tab-\".concat( /*currentGroup*/ctx[13].id))) {\n        attr(div10, \"id\", div10_id_value);\n      }\n      if (dirty[0] & /*labelWithSkin, currentFavorites, currentSkinTone, unicodeWithSkin*/402654464) {\n        each_value = /*currentFavorites*/ctx[10];\n        each_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div11, destroy_block, create_each_block, null, get_each_context);\n      }\n      if (dirty[0] & /*message*/262144 && div11_class_value !== (div11_class_value = \"favorites emoji-menu \" + ( /*message*/ctx[18] ? 'gone' : ''))) {\n        attr(div11, \"class\", div11_class_value);\n      }\n      if (dirty[0] & /*i18n*/1 && div11_aria_label_value !== (div11_aria_label_value = /*i18n*/ctx[0].favoritesLabel)) {\n        attr(div11, \"aria-label\", div11_aria_label_value);\n      }\n      if (dirty[0] & /*scrollbarWidth*/33554432) {\n        set_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ctx[25] + \"px\");\n      }\n      if (dirty[0] & /*i18n*/1 && section_aria_label_value !== (section_aria_label_value = /*i18n*/ctx[0].regionLabel)) {\n        attr(section, \"aria-label\", section_aria_label_value);\n      }\n      if (dirty[0] & /*pickerStyle*/4194304) {\n        attr(section, \"style\", /*pickerStyle*/ctx[22]);\n      }\n    },\n    i: noop,\n    o: noop,\n    d(detaching) {\n      if (detaching) detach(section);\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].d();\n      }\n\n      /*div3_binding*/\n      ctx[48](null);\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].d();\n      }\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].d();\n      }\n\n      /*div10_binding*/\n      ctx[50](null);\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].d();\n      }\n\n      /*button1_binding*/\n      ctx[51](null);\n      /*section_binding*/\n      ctx[52](null);\n      mounted = false;\n      run_all(dispose);\n    }\n  };\n}\nfunction instance($$self, $$props, $$invalidate) {\n  let {\n    skinToneEmoji\n  } = $$props;\n  let {\n    i18n\n  } = $$props;\n  let {\n    database\n  } = $$props;\n  let {\n    customEmoji\n  } = $$props;\n  let {\n    customCategorySorting\n  } = $$props;\n\n  // private\n  let initialLoad = true;\n  let currentEmojis = [];\n  let currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\n  let rawSearchText = '';\n  let searchText = '';\n  let rootElement;\n  let baselineEmoji;\n  let tabpanelElement;\n  let searchMode = false; // eslint-disable-line no-unused-vars\n  let activeSearchItem = -1;\n  let message; // eslint-disable-line no-unused-vars\n  let skinTonePickerExpanded = false;\n  let skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n  let skinToneDropdown;\n  let currentSkinTone = 0;\n  let activeSkinTone = 0;\n  let skinToneButtonText; // eslint-disable-line no-unused-vars\n  let pickerStyle; // eslint-disable-line no-unused-vars\n  let skinToneButtonLabel = ''; // eslint-disable-line no-unused-vars\n  let skinTones = [];\n  let currentFavorites = []; // eslint-disable-line no-unused-vars\n  let defaultFavoriteEmojis;\n  let numColumns = DEFAULT_NUM_COLUMNS;\n  let isRtl = false;\n  let scrollbarWidth = 0; // eslint-disable-line no-unused-vars\n  let currentGroupIndex = 0;\n  let groups$1 = groups;\n  let currentGroup;\n  let databaseLoaded = false; // eslint-disable-line no-unused-vars\n  let activeSearchItemId; // eslint-disable-line no-unused-vars\n\n  //\n  // Utils/helpers\n  //\n  const focus = id => {\n    rootElement.getRootNode().getElementById(id).focus();\n  };\n\n  // fire a custom event that crosses the shadow boundary\n  const fireEvent = (name, detail) => {\n    rootElement.dispatchEvent(new CustomEvent(name, {\n      detail,\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  // eslint-disable-next-line no-unused-vars\n  const unicodeWithSkin = (emoji, currentSkinTone) => currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n\n  // eslint-disable-next-line no-unused-vars\n  const labelWithSkin = (emoji, currentSkinTone) => uniq([emoji.name || unicodeWithSkin(emoji, currentSkinTone), ...(emoji.shortcodes || [])]).join(', ');\n\n  // Detect a skintone option button\n  const isSkinToneOption = element => /^skintone-/.test(element.id);\n\n  //\n  // Determine the emoji support level (in requestIdleCallback)\n  //\n  emojiSupportLevelPromise.then(level => {\n    // Can't actually test emoji support in Jest/JSDom, emoji never render in color in Cairo\n    /* istanbul ignore next */\n    if (!level) {\n      $$invalidate(18, message = i18n.emojiUnsupportedMessage);\n    }\n  });\n\n  //\n  // Calculate the width of the emoji grid. This serves two purposes:\n  // 1) Re-calculate the --num-columns var because it may have changed\n  // 2) Re-calculate the scrollbar width because it may have changed\n  //   (i.e. because the number of items changed)\n  // 3) Re-calculate whether we're in RTL mode or not.\n  //\n  // The benefit of doing this in one place is to align with rAF/ResizeObserver\n  // and do all the calculations in one go. RTL vs LTR is not strictly width-related,\n  // but since we're already reading the style here, and since it's already aligned with\n  // the rAF loop, this is the most appropriate place to do it perf-wise.\n  //\n  // eslint-disable-next-line no-unused-vars\n  function calculateEmojiGridStyle(node) {\n    return calculateWidth(node, width => {\n      /* istanbul ignore next */\n      if (\"production\" !== 'test') {\n        // jsdom throws errors for this kind of fancy stuff\n        // read all the style/layout calculations we need to make\n        const style = getComputedStyle(rootElement);\n        const newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n        const newIsRtl = style.getPropertyValue('direction') === 'rtl';\n        const parentWidth = node.parentElement.getBoundingClientRect().width;\n        const newScrollbarWidth = parentWidth - width;\n\n        // write to Svelte variables\n        $$invalidate(46, numColumns = newNumColumns);\n        $$invalidate(25, scrollbarWidth = newScrollbarWidth); // eslint-disable-line no-unused-vars\n        $$invalidate(24, isRtl = newIsRtl); // eslint-disable-line no-unused-vars\n      }\n    });\n  }\n  function checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n    const rootNode = rootElement.getRootNode();\n    const emojiToDomNode = emoji => rootNode.getElementById(\"emo-\".concat(emoji.id));\n    checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode);\n\n    // force update\n    $$invalidate(1, currentEmojis = currentEmojis); // eslint-disable-line no-self-assign\n  }\n  function isZwjSupported(emoji) {\n    return !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\n  }\n  async function filterEmojisByVersion(emojis) {\n    const emojiSupportLevel = await emojiSupportLevelPromise;\n\n    // !version corresponds to custom emoji\n    return emojis.filter(_ref3 => {\n      let {\n        version\n      } = _ref3;\n      return !version || version <= emojiSupportLevel;\n    });\n  }\n  async function summarizeEmojis(emojis) {\n    return summarizeEmojisForUI(emojis, await emojiSupportLevelPromise);\n  }\n  async function getEmojisByGroup(group) {\n    if (typeof group === 'undefined') {\n      return [];\n    }\n\n    // -1 is custom emoji\n    const emoji = group === -1 ? customEmoji : await database.getEmojiByGroup(group);\n    return summarizeEmojis(await filterEmojisByVersion(emoji));\n  }\n  async function getEmojisBySearchQuery(query) {\n    return summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  function onSearchKeydown(event) {\n    if (!searchMode || !currentEmojis.length) {\n      return;\n    }\n    const goToNextOrPrevious = previous => {\n      halt(event);\n      $$invalidate(5, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\n    };\n    switch (event.key) {\n      case 'ArrowDown':\n        return goToNextOrPrevious(false);\n      case 'ArrowUp':\n        return goToNextOrPrevious(true);\n      case 'Enter':\n        if (activeSearchItem !== -1) {\n          halt(event);\n          return clickEmoji(currentEmojis[activeSearchItem].id);\n        } else if (currentEmojis.length) {\n          $$invalidate(5, activeSearchItem = 0);\n        }\n    }\n  }\n\n  //\n  // Handle user input on nav\n  //\n  // eslint-disable-next-line no-unused-vars\n  function onNavClick(group) {\n    $$invalidate(2, rawSearchText = '');\n    $$invalidate(44, searchText = '');\n    $$invalidate(5, activeSearchItem = -1);\n    $$invalidate(11, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  function onNavKeydown(event) {\n    const {\n      target,\n      key\n    } = event;\n    const doFocus = el => {\n      if (el) {\n        halt(event);\n        el.focus();\n      }\n    };\n    switch (key) {\n      case 'ArrowLeft':\n        return doFocus(target.previousSibling);\n      case 'ArrowRight':\n        return doFocus(target.nextSibling);\n      case 'Home':\n        return doFocus(target.parentElement.firstChild);\n      case 'End':\n        return doFocus(target.parentElement.lastChild);\n    }\n  }\n\n  //\n  // Handle user input on an emoji\n  //\n  async function clickEmoji(unicodeOrName) {\n    const emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\n    const emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\n    const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\n    await database.incrementFavoriteEmojiCount(unicodeOrName);\n    fireEvent('emoji-click', {\n      emoji,\n      skinTone: currentSkinTone,\n      ...(skinTonedUnicode && {\n        unicode: skinTonedUnicode\n      }),\n      ...(emojiSummary.name && {\n        name: emojiSummary.name\n      })\n    });\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  async function onEmojiClick(event) {\n    const {\n      target\n    } = event;\n    if (!target.classList.contains('emoji')) {\n      return;\n    }\n    halt(event);\n    const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n    /* no await */\n    clickEmoji(id);\n  }\n\n  //\n  // Handle user input on the skintone picker\n  //\n  // eslint-disable-next-line no-unused-vars\n  async function onSkinToneOptionsClick(event) {\n    const {\n      target\n    } = event;\n    if (!isSkinToneOption(target)) {\n      return;\n    }\n    halt(event);\n    const skinTone = parseInt(target.id.slice(9), 10); // remove 'skintone-' prefix\n    $$invalidate(8, currentSkinTone = skinTone);\n    $$invalidate(6, skinTonePickerExpanded = false);\n    focus('skintone-button');\n    fireEvent('skin-tone-change', {\n      skinTone\n    });\n\n    /* no await */\n    database.setPreferredSkinTone(skinTone);\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  async function onClickSkinToneButton(event) {\n    $$invalidate(6, skinTonePickerExpanded = !skinTonePickerExpanded);\n    $$invalidate(20, activeSkinTone = currentSkinTone);\n    if (skinTonePickerExpanded) {\n      halt(event);\n      rAF(() => focus(\"skintone-\".concat(activeSkinTone)));\n    }\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  function onSkinToneOptionsKeydown(event) {\n    if (!skinTonePickerExpanded) {\n      return;\n    }\n    const changeActiveSkinTone = async nextSkinTone => {\n      halt(event);\n      $$invalidate(20, activeSkinTone = nextSkinTone);\n      await tick();\n      focus(\"skintone-\".concat(activeSkinTone));\n    };\n    switch (event.key) {\n      case 'ArrowUp':\n        return changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\n      case 'ArrowDown':\n        return changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\n      case 'Home':\n        return changeActiveSkinTone(0);\n      case 'End':\n        return changeActiveSkinTone(skinTones.length - 1);\n      case 'Enter':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        return onSkinToneOptionsClick(event);\n      case 'Escape':\n        halt(event);\n        $$invalidate(6, skinTonePickerExpanded = false);\n        return focus('skintone-button');\n    }\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  function onSkinToneOptionsKeyup(event) {\n    if (!skinTonePickerExpanded) {\n      return;\n    }\n    switch (event.key) {\n      case ' ':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        return onSkinToneOptionsClick(event);\n    }\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  async function onSkinToneOptionsFocusOut(event) {\n    // On blur outside of the skintone options, collapse the skintone picker.\n    // Except if focus is just moving to another skintone option, e.g. pressing up/down to change focus\n    const {\n      relatedTarget\n    } = event;\n    if (!relatedTarget || !isSkinToneOption(relatedTarget)) {\n      $$invalidate(6, skinTonePickerExpanded = false);\n    }\n  }\n  function input_input_handler() {\n    rawSearchText = this.value;\n    $$invalidate(2, rawSearchText);\n  }\n  function div3_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      skinToneDropdown = $$value;\n      $$invalidate(7, skinToneDropdown);\n    });\n  }\n  const click_handler = group => onNavClick(group);\n  function div10_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      tabpanelElement = $$value;\n      $$invalidate(3, tabpanelElement);\n    });\n  }\n  function button1_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      baselineEmoji = $$value;\n      $$invalidate(17, baselineEmoji);\n    });\n  }\n  function section_binding($$value) {\n    binding_callbacks[$$value ? 'unshift' : 'push'](() => {\n      rootElement = $$value;\n      $$invalidate(16, rootElement);\n    });\n  }\n  $$self.$$set = $$props => {\n    if ('skinToneEmoji' in $$props) $$invalidate(40, skinToneEmoji = $$props.skinToneEmoji);\n    if ('i18n' in $$props) $$invalidate(0, i18n = $$props.i18n);\n    if ('database' in $$props) $$invalidate(39, database = $$props.database);\n    if ('customEmoji' in $$props) $$invalidate(41, customEmoji = $$props.customEmoji);\n    if ('customCategorySorting' in $$props) $$invalidate(42, customCategorySorting = $$props.customCategorySorting);\n  };\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty[1] & /*customEmoji, database*/1280) {\n      /* eslint-enable no-unused-vars */\n      //\n      // Set or update the customEmoji\n      //\n      {\n        if (customEmoji && database) {\n          $$invalidate(39, database.customEmoji = customEmoji, database);\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*i18n*/1 | $$self.$$.dirty[1] & /*database*/256) {\n      //\n      // Set or update the database object\n      //\n      {\n        // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n        async function handleDatabaseLoading() {\n          let showingLoadingMessage = false;\n          const timeoutHandle = setTimeout(() => {\n            showingLoadingMessage = true;\n            $$invalidate(18, message = i18n.loadingMessage);\n          }, TIMEOUT_BEFORE_LOADING_MESSAGE);\n          try {\n            await database.ready();\n            $$invalidate(14, databaseLoaded = true); // eslint-disable-line no-unused-vars\n          } catch (err) {\n            console.error(err);\n            $$invalidate(18, message = i18n.networkErrorMessage);\n          } finally {\n            clearTimeout(timeoutHandle);\n            if (showingLoadingMessage) {\n              // Seems safer than checking the i18n string, which may change\n              showingLoadingMessage = false;\n              $$invalidate(18, message = ''); // eslint-disable-line no-unused-vars\n            }\n          }\n        }\n        if (database) {\n          /* no await */\n          handleDatabaseLoading();\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/6144 | $$self.$$.dirty[1] & /*customEmoji*/1024) {\n      {\n        if (customEmoji && customEmoji.length) {\n          $$invalidate(12, groups$1 = [customGroup, ...groups]);\n        } else if (groups$1 !== groups) {\n          if (currentGroupIndex) {\n            // If the current group is anything other than \"custom\" (which is first), decrement.\n            // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n            $$invalidate(11, currentGroupIndex--, currentGroupIndex);\n          }\n          $$invalidate(12, groups$1 = groups);\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*rawSearchText*/4) {\n      /* eslint-enable no-unused-vars */\n      //\n      // Handle user input on the search input\n      //\n      {\n        rIC(() => {\n          $$invalidate(44, searchText = (rawSearchText || '').trim()); // defer to avoid input delays, plus we can trim here\n          $$invalidate(5, activeSearchItem = -1);\n        });\n      }\n    }\n    if ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/6144) {\n      //\n      // Update the current group based on the currentGroupIndex\n      //\n      $$invalidate(13, currentGroup = groups$1[currentGroupIndex]);\n    }\n    if ($$self.$$.dirty[0] & /*databaseLoaded, currentGroup*/24576 | $$self.$$.dirty[1] & /*searchText*/8192) {\n      //\n      // Set or update the currentEmojis. Check for invalid ZWJ renderings\n      // (i.e. double emoji).\n      //\n      {\n        async function updateEmojis() {\n          if (!databaseLoaded) {\n            $$invalidate(1, currentEmojis = []);\n            $$invalidate(4, searchMode = false);\n          } else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n            const currentSearchText = searchText;\n            const newEmojis = await getEmojisBySearchQuery(currentSearchText);\n            if (currentSearchText === searchText) {\n              // if the situation changes asynchronously, do not update\n              $$invalidate(1, currentEmojis = newEmojis);\n              $$invalidate(4, searchMode = true);\n            }\n          } else if (currentGroup) {\n            const currentGroupId = currentGroup.id;\n            const newEmojis = await getEmojisByGroup(currentGroupId);\n            if (currentGroupId === currentGroup.id) {\n              // if the situation changes asynchronously, do not update\n              $$invalidate(1, currentEmojis = newEmojis);\n              $$invalidate(4, searchMode = false);\n            }\n          }\n        }\n\n        /* no await */\n        updateEmojis();\n      }\n    }\n    if ($$self.$$.dirty[0] & /*groups, searchMode*/4112) {\n      //\n      // Global styles for the entire picker\n      //\n      /* eslint-disable no-unused-vars */\n      $$invalidate(22, pickerStyle = \"\\n  --font-family: \".concat(FONT_FAMILY, \";\\n  --num-groups: \").concat(groups$1.length, \"; \\n  --indicator-opacity: \").concat(searchMode ? 0 : 1, \"; \\n  --num-skintones: \").concat(NUM_SKIN_TONES, \";\"));\n    }\n    if ($$self.$$.dirty[0] & /*databaseLoaded*/16384 | $$self.$$.dirty[1] & /*database*/256) {\n      //\n      // Set or update the preferred skin tone\n      //\n      {\n        async function updatePreferredSkinTone() {\n          if (databaseLoaded) {\n            $$invalidate(8, currentSkinTone = await database.getPreferredSkinTone());\n          }\n        }\n\n        /* no await */\n        updatePreferredSkinTone();\n      }\n    }\n    if ($$self.$$.dirty[1] & /*skinToneEmoji*/512) {\n      $$invalidate(9, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\n    }\n    if ($$self.$$.dirty[0] & /*skinTones, currentSkinTone*/768) {\n      /* eslint-disable no-unused-vars */\n      $$invalidate(21, skinToneButtonText = skinTones[currentSkinTone]);\n    }\n    if ($$self.$$.dirty[0] & /*i18n, currentSkinTone*/257) {\n      $$invalidate(23, skinToneButtonLabel = i18n.skinToneLabel.replace('{skinTone}', i18n.skinTones[currentSkinTone]));\n    }\n    if ($$self.$$.dirty[0] & /*databaseLoaded*/16384 | $$self.$$.dirty[1] & /*database*/256) {\n      /* eslint-enable no-unused-vars */\n      //\n      // Set or update the favorites emojis\n      //\n      {\n        async function updateDefaultFavoriteEmojis() {\n          $$invalidate(45, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\n        }\n        if (databaseLoaded) {\n          /* no await */\n          updateDefaultFavoriteEmojis();\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*databaseLoaded*/16384 | $$self.$$.dirty[1] & /*database, numColumns, defaultFavoriteEmojis*/49408) {\n      {\n        async function updateFavorites() {\n          const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n          const favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\n          $$invalidate(10, currentFavorites = favorites);\n        }\n        if (databaseLoaded && defaultFavoriteEmojis) {\n          /* no await */\n          updateFavorites();\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*currentEmojis, tabpanelElement*/10) {\n      // Some emojis have their ligatures rendered as two or more consecutive emojis\n      // We want to treat these the same as unsupported emojis, so we compare their\n      // widths against the baseline widths and remove them as necessary\n      {\n        const zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)); // filter custom emoji\n\n        if (zwjEmojisToCheck.length) {\n          // render now, check their length later\n          rAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n        } else {\n          $$invalidate(1, currentEmojis = currentEmojis.filter(isZwjSupported));\n          rAF(() => {\n            // Avoid Svelte doing an invalidation on the \"setter\" here.\n            // At best the invalidation is useless, at worst it can cause infinite loops:\n            // https://github.com/nolanlawson/emoji-picker-element/pull/180\n            // https://github.com/sveltejs/svelte/issues/6521\n            // Also note tabpanelElement can be null if the element is disconnected\n            // immediately after connected, hence `|| {}`\n            (tabpanelElement || {}).scrollTop = 0; // reset scroll top to 0 when emojis change\n          });\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*currentEmojis, currentFavorites*/1026 | $$self.$$.dirty[1] & /*initialLoad*/4096) {\n      {\n        // consider initialLoad to be complete when the first tabpanel and favorites are rendered\n        /* istanbul ignore next */\n        if (\"production\" !== 'production' || false) {\n          if (currentEmojis.length && currentFavorites.length && initialLoad) {\n            $$invalidate(43, initialLoad = false);\n            requestPostAnimationFrame(() => void 0);\n          }\n        }\n      }\n    }\n    if ($$self.$$.dirty[0] & /*searchMode, currentEmojis*/18 | $$self.$$.dirty[1] & /*customCategorySorting*/2048) {\n      //\n      // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n      // are no categories, because it's just easier to code the HTML this way.\n      //\n      {\n        function calculateCurrentEmojisWithCategories() {\n          if (searchMode) {\n            return [{\n              category: '',\n              emojis: currentEmojis\n            }];\n          }\n          const categoriesToEmoji = new Map();\n          for (const emoji of currentEmojis) {\n            const category = emoji.category || '';\n            let emojis = categoriesToEmoji.get(category);\n            if (!emojis) {\n              emojis = [];\n              categoriesToEmoji.set(category, emojis);\n            }\n            emojis.push(emoji);\n          }\n          return [...categoriesToEmoji.entries()].map(_ref4 => {\n            let [category, emojis] = _ref4;\n            return {\n              category,\n              emojis\n            };\n          }).sort((a, b) => customCategorySorting(a.category, b.category));\n        }\n\n        // eslint-disable-next-line no-unused-vars\n        $$invalidate(15, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\n      }\n    }\n    if ($$self.$$.dirty[0] & /*activeSearchItem, currentEmojis*/34) {\n      //\n      // Handle active search item (i.e. pressing up or down while searching)\n      //\n      /* eslint-disable no-unused-vars */\n      $$invalidate(26, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\n    }\n    if ($$self.$$.dirty[0] & /*skinTonePickerExpanded, skinToneDropdown*/192) {\n      // To make the animation nicer, change the z-index of the skintone picker button\n      // *after* the animation has played. This makes it appear that the picker box\n      // is expanding \"below\" the button\n      {\n        if (skinTonePickerExpanded) {\n          skinToneDropdown.addEventListener('transitionend', () => {\n            $$invalidate(19, skinTonePickerExpandedAfterAnimation = true); // eslint-disable-line no-unused-vars\n          }, {\n            once: true\n          });\n        } else {\n          $$invalidate(19, skinTonePickerExpandedAfterAnimation = false); // eslint-disable-line no-unused-vars\n        }\n      }\n    }\n  };\n  return [i18n, currentEmojis, rawSearchText, tabpanelElement, searchMode, activeSearchItem, skinTonePickerExpanded, skinToneDropdown, currentSkinTone, skinTones, currentFavorites, currentGroupIndex, groups$1, currentGroup, databaseLoaded, currentEmojisWithCategories, rootElement, baselineEmoji, message, skinTonePickerExpandedAfterAnimation, activeSkinTone, skinToneButtonText, pickerStyle, skinToneButtonLabel, isRtl, scrollbarWidth, activeSearchItemId, unicodeWithSkin, labelWithSkin, calculateEmojiGridStyle, onSearchKeydown, onNavClick, onNavKeydown, onEmojiClick, onSkinToneOptionsClick, onClickSkinToneButton, onSkinToneOptionsKeydown, onSkinToneOptionsKeyup, onSkinToneOptionsFocusOut, database, skinToneEmoji, customEmoji, customCategorySorting, initialLoad, searchText, defaultFavoriteEmojis, numColumns, input_input_handler, div3_binding, click_handler, div10_binding, button1_binding, section_binding];\n}\nclass Picker extends SvelteComponent {\n  constructor(options) {\n    super();\n    init(this, options, instance, create_fragment, safe_not_equal, {\n      skinToneEmoji: 40,\n      i18n: 0,\n      database: 39,\n      customEmoji: 41,\n      customCategorySorting: 42\n    }, null, [-1, -1, -1]);\n  }\n}\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading…',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: ['Default', 'Light', 'Medium-Light', 'Medium', 'Medium-Dark', 'Dark'],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\nconst PROPS = ['customEmoji', 'customCategorySorting', 'database', 'dataSource', 'i18n', 'locale', 'skinToneEmoji'];\nclass PickerElement extends HTMLElement {\n  constructor(props) {\n    super();\n    this.attachShadow({\n      mode: 'open'\n    });\n    const style = document.createElement('style');\n    style.textContent = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n  connectedCallback() {\n    this._cmp = new Picker({\n      target: this.shadowRoot,\n      props: this._ctx\n    });\n  }\n  disconnectedCallback() {\n    this._cmp.$destroy();\n    this._cmp = undefined;\n    const {\n      database\n    } = this._ctx;\n    if (database) {\n      database.close()\n      // only happens if the database failed to load in the first place, so we don't care)\n      .catch(err => console.error(err));\n    }\n  }\n  static get observedAttributes() {\n    return ['locale', 'data-source', 'skin-tone-emoji']; // complex objects aren't supported, also use kebab-case\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    // convert from kebab-case to camelcase\n    // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n    this._set(attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()), newValue);\n  }\n  _set(prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({\n        [prop]: newValue\n      });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n  _dbCreate() {\n    const {\n      locale,\n      dataSource,\n      database\n    } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({\n        locale,\n        dataSource\n      }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush() {\n    Promise.resolve().then(() => this._dbCreate());\n  }\n}\nconst definitions = {};\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get() {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop];\n    },\n    set(val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only');\n      }\n      this._set(prop, val);\n    }\n  };\n}\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) {\n  // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\nexport { PickerElement as default };","map":{"version":3,"names":["Database","noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","document","createElement","href","is_empty","obj","keys","length","action_destroyer","action_result","destroy","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","text","data","createTextNode","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_data","wholeText","set_input_value","input","set_style","key","important","style","removeProperty","setProperty","current_component","set_current_component","component","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","push","seen_callbacks","Set","flushidx","saved_component","update","$$","pop","i","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","transition_in","block","local","delete","globals","window","globalThis","global","destroy_block","lookup","d","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","o","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","get","c","set","Math","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","mount_component","customElement","on_mount","on_destroy","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","fill","init","instance","create_fragment","not_equal","props","append_styles","arguments","undefined","parent_component","bound","on_disconnect","context","callbacks","skip_bound","root","ready","ret","SvelteComponent","$destroy","$on","type","index","indexOf","splice","$set","$$props","$$set","allGroups","_ref","id","emoji","groups","slice","customGroup","MIN_SEARCH_TEXT_LENGTH","NUM_SKIN_TONES","rIC","requestIdleCallback","setTimeout","hasZwj","unicode","includes","versionsAndTestEmoji","TIMEOUT_BEFORE_LOADING_MESSAGE","DEFAULT_SKIN_TONE_EMOJI","DEFAULT_NUM_COLUMNS","MOST_COMMONLY_USED_EMOJI","FONT_FAMILY","DEFAULT_CATEGORY_SORTING","getTextFeature","color","canvas","width","height","getContext","textBaseline","font","concat","fillStyle","scale","fillText","getImageData","compareFeatures","feature1","feature2","feature1Str","join","feature2Str","startsWith","testColorEmojiSupported","determineEmojiSupportLevel","entries","version","e","emojiSupportLevelPromise","supportedZwjEmojis","VARIATION_SELECTOR","SKINTONE_MODIFIER","ZWJ","LIGHT_SKIN_TONE","LIGHT_SKIN_TONE_MODIFIER","applySkinTone","str","skinTone","zwjIndex","substring","String","fromCodePoint","endsWith","halt","preventDefault","stopPropagation","incrementOrDecrement","decrement","val","arr","uniqBy","func","res","item","summarizeEmojisForUI","emojis","emojiSupportLevel","toSimpleSkinsMap","skins","skin","tone","_ref2","shortcodes","category","title","rAF","requestAnimationFrame","resizeObserverSupported","ResizeObserver","calculateWidth","onUpdate","resizeObserver","contentRect","observe","getBoundingClientRect","disconnect","calculateTextWidth","range","createRange","selectNode","firstChild","baselineEmojiWidth","checkZwjSupport","zwjEmojisToCheck","baselineEmoji","emojiToDomNode","domNode","emojiWidth","supported","requestPostAnimationFrame","uniq","_","Map_1","get_each_context","get_each_context_1","get_each_context_2","get_each_context_3","get_each_context_4","create_each_block_4","key_1","div","t_value","t","div_id_value","div_class_value","div_aria_selected_value","div_title_value","div_aria_label_value","skinTones","new_ctx","create_each_block_3","button","button_aria_controls_value","button_aria_label_value","button_aria_selected_value","button_title_value","mounted","dispose","click_handler","categories","create_else_block_1","img","img_src_value","src","create_if_block_1","create_each_block_2","button_role_value","button_class_value","button_id_value","select_block_type","current_block_type","if_block","create_each_block_1","div0","searchResultsLabel","custom","div0_id_value","div0_class_value","div1","each_blocks","each_1_lookup","div1_role_value","div1_aria_labelledby_value","div1_id_value","each_value_2","create_else_block","create_if_block","select_block_type_1","section","div4","input_placeholder_value","input_aria_expanded_value","input_aria_activedescendant_value","label","t0_value","searchLabel","t0","span0","t1_value","searchDescription","t1","div2","button0","t2","button0_class_value","div2_class_value","span1","t3_value","skinToneDescription","t3","div3","each_blocks_3","each0_lookup","div3_class_value","div3_aria_label_value","div3_aria_activedescendant_value","div3_aria_hidden_value","div5","each_blocks_2","each1_lookup","div5_aria_label_value","div7","div6","div8","t4","div8_class_value","div10","div9","each_blocks_1","each2_lookup","div10_class_value","div10_role_value","div10_aria_label_value","div10_id_value","div11","each3_lookup","div11_class_value","div11_aria_label_value","button1","section_aria_label_value","each_value_4","each_value_3","get_key_1","each_value_1","get_key_2","each_value","get_key_3","textContent","skinTonesLabel","categoriesLabel","favoritesLabel","regionLabel","call","$$self","$$invalidate","skinToneEmoji","i18n","database","customEmoji","customCategorySorting","initialLoad","currentEmojis","currentEmojisWithCategories","rawSearchText","searchText","rootElement","tabpanelElement","searchMode","activeSearchItem","message","skinTonePickerExpanded","skinTonePickerExpandedAfterAnimation","skinToneDropdown","currentSkinTone","activeSkinTone","skinToneButtonText","pickerStyle","skinToneButtonLabel","currentFavorites","defaultFavoriteEmojis","numColumns","isRtl","scrollbarWidth","currentGroupIndex","groups$1","currentGroup","databaseLoaded","activeSearchItemId","focus","getRootNode","getElementById","fireEvent","detail","dispatchEvent","CustomEvent","bubbles","composed","unicodeWithSkin","labelWithSkin","isSkinToneOption","test","level","emojiUnsupportedMessage","calculateEmojiGridStyle","getComputedStyle","newNumColumns","parseInt","getPropertyValue","newIsRtl","parentWidth","parentElement","newScrollbarWidth","checkZwjSupportAndUpdate","rootNode","isZwjSupported","filterEmojisByVersion","_ref3","summarizeEmojis","getEmojisByGroup","group","getEmojiByGroup","getEmojisBySearchQuery","query","getEmojiBySearchQuery","onSearchKeydown","goToNextOrPrevious","previous","clickEmoji","onNavClick","findIndex","onNavKeydown","doFocus","el","previousSibling","nextSibling","lastChild","unicodeOrName","getEmojiByUnicodeOrName","emojiSummary","find","skinTonedUnicode","incrementFavoriteEmojiCount","onEmojiClick","classList","contains","onSkinToneOptionsClick","setPreferredSkinTone","onClickSkinToneButton","onSkinToneOptionsKeydown","changeActiveSkinTone","nextSkinTone","onSkinToneOptionsKeyup","onSkinToneOptionsFocusOut","relatedTarget","input_input_handler","div3_binding","$$value","div10_binding","button1_binding","section_binding","handleDatabaseLoading","showingLoadingMessage","timeoutHandle","loadingMessage","err","console","error","networkErrorMessage","clearTimeout","trim","updateEmojis","currentSearchText","newEmojis","currentGroupId","updatePreferredSkinTone","getPreferredSkinTone","Array","skinToneLabel","replace","updateDefaultFavoriteEmojis","all","Boolean","updateFavorites","dbFavorites","getTopFavoriteEmoji","favorites","scrollTop","calculateCurrentEmojisWithCategories","categoriesToEmoji","_ref4","sort","once","Picker","constructor","DEFAULT_DATA_SOURCE","DEFAULT_LOCALE","enI18n","activities","objects","symbols","flags","PROPS","PickerElement","HTMLElement","attachShadow","mode","shadowRoot","_ctx","locale","dataSource","prop","prototype","hasOwnProperty","_dbFlush","connectedCallback","_cmp","disconnectedCallback","close","catch","observedAttributes","attributeChangedCallback","attrName","oldValue","newValue","_set","up","toUpperCase","_dbCreate","definitions","Error","defineProperties","customElements","define","default"],"sources":["C:/Users/samth/repomain-1/node_modules/emoji-picker-element/picker.js"],"sourcesContent":["import Database from './database.js';\n\nfunction noop() { }\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\n\nconst dirty_components = [];\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\nconst outroing = new Set();\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map((parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        mount_component(component, options.target, undefined, undefined);\n        flush();\n    }\n    set_current_component(parent_component);\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [\n  [-1, '✨', 'custom'],\n  [0, '😀', 'smileys-emotion'],\n  [1, '👋', 'people-body'],\n  [3, '🐱', 'animals-nature'],\n  [4, '🍎', 'food-drink'],\n  [5, '🏠️', 'travel-places'],\n  [6, '⚽', 'activities'],\n  [7, '📝', 'objects'],\n  [8, '⛔️', 'symbols'],\n  [9, '🏁', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\nconst customGroup = allGroups[0];\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '🫠': 14,\n  '🥲': 13.1, // smiling face with tear, technically from v13 but see note above\n  '🥻': 12.1, // sari, technically from v12 but see note above\n  '🥰': 11,\n  '🤩': 5,\n  '👱‍♀️': 4,\n  '🤣': 3,\n  '👁️‍🗨️': 2,\n  '😀': 1,\n  '😐️': 0.7,\n  '😃': 0.6\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '🖐️';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  '😊',\n  '😒',\n  '♥️',\n  '👍️',\n  '😍',\n  '😂',\n  '😭',\n  '☺️',\n  '😔',\n  '😩',\n  '😏',\n  '💕',\n  '🙌',\n  '😘'\n];\n\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n\n  const ctx = canvas.getContext('2d');\n  ctx.textBaseline = 'top';\n  ctx.font = `100px ${FONT_FAMILY}`;\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n\n  return ctx.getImageData(0, 0, 1, 1).data\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n\nfunction determineEmojiSupportLevel () {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version\n      }\n    }\n  } catch (e) { // canvas error\n  } finally {\n  }\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1] // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nconst emojiSupportLevelPromise = new Promise(resolve => (\n  rIC(() => (\n    resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n  ))\n));\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins),\n    title: (shortcodes || []).join(', ')\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// Svelte action to calculate the width of an element and auto-update\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction calculateWidth (node, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => (\n      onUpdate(entries[0].contentRect.width)\n    ));\n    resizeObserver.observe(node);\n  } else { // just set the width once, don't bother trying to track it\n    rAF(() => (\n      onUpdate(node.getBoundingClientRect().width)\n    ));\n  }\n\n  // cleanup function (called on destroy)\n  return {\n    destroy () {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    }\n  }\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n  }\n}\n\n// Measure after style/layout are complete\n\nconst requestPostAnimationFrame = callback => {\n  rAF(() => {\n    setTimeout(callback);\n  });\n};\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v3.46.4 */\n\nconst { Map: Map_1 } = globals;\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[63] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[66] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[63] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[69] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[72] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\n// (43:38) {#each skinTones as skinTone, i (skinTone)}\nfunction create_each_block_4(key_1, ctx) {\n\tlet div;\n\tlet t_value = /*skinTone*/ ctx[72] + \"\";\n\tlet t;\n\tlet div_id_value;\n\tlet div_class_value;\n\tlet div_aria_selected_value;\n\tlet div_title_value;\n\tlet div_aria_label_value;\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"id\", div_id_value = \"skintone-\" + /*i*/ ctx[65]);\n\n\t\t\tattr(div, \"class\", div_class_value = \"emoji hide-focus \" + (/*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]\n\t\t\t? 'active'\n\t\t\t: ''));\n\n\t\t\tattr(div, \"aria-selected\", div_aria_selected_value = /*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]);\n\t\t\tattr(div, \"role\", \"option\");\n\t\t\tattr(div, \"title\", div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]]);\n\t\t\tattr(div, \"tabindex\", \"-1\");\n\t\t\tattr(div, \"aria-label\", div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]]);\n\t\t\tthis.first = div;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, t);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && t_value !== (t_value = /*skinTone*/ ctx[72] + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && div_id_value !== (div_id_value = \"skintone-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div, \"id\", div_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_class_value !== (div_class_value = \"emoji hide-focus \" + (/*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]\n\t\t\t? 'active'\n\t\t\t: ''))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_aria_selected_value !== (div_aria_selected_value = /*i*/ ctx[65] === /*activeSkinTone*/ ctx[20])) {\n\t\t\t\tattr(div, \"aria-selected\", div_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_title_value !== (div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]])) {\n\t\t\t\tattr(div, \"title\", div_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_aria_label_value !== (div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]])) {\n\t\t\t\tattr(div, \"aria-label\", div_aria_label_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div);\n\t\t}\n\t};\n}\n\n// (53:33) {#each groups as group (group.id)}\nfunction create_each_block_3(key_1, ctx) {\n\tlet button;\n\tlet div;\n\tlet t_value = /*group*/ ctx[69].emoji + \"\";\n\tlet t;\n\tlet button_aria_controls_value;\n\tlet button_aria_label_value;\n\tlet button_aria_selected_value;\n\tlet button_title_value;\n\tlet mounted;\n\tlet dispose;\n\n\tfunction click_handler() {\n\t\treturn /*click_handler*/ ctx[49](/*group*/ ctx[69]);\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"class\", \"nav-emoji emoji\");\n\t\t\tattr(button, \"role\", \"tab\");\n\t\t\tattr(button, \"class\", \"nav-button\");\n\t\t\tattr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" + /*group*/ ctx[69].id);\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name]);\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[69].id);\n\t\t\tattr(button, \"title\", button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name]);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tappend(button, div);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(button, \"click\", click_handler);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*groups*/ 4096 && t_value !== (t_value = /*group*/ ctx[69].emoji + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*groups*/ 4096 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" + /*group*/ ctx[69].id)) {\n\t\t\t\tattr(button, \"aria-controls\", button_aria_controls_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_aria_label_value !== (button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name])) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup, groups*/ 12304 && button_aria_selected_value !== (button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[69].id)) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_title_value !== (button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name])) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (93:100) {:else}\nfunction create_else_block_1(ctx) {\n\tlet img;\n\tlet img_src_value;\n\n\treturn {\n\t\tc() {\n\t\t\timg = element(\"img\");\n\t\t\tattr(img, \"class\", \"custom-emoji\");\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) attr(img, \"src\", img_src_value);\n\t\t\tattr(img, \"alt\", \"\");\n\t\t\tattr(img, \"loading\", \"lazy\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, img, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) {\n\t\t\t\tattr(img, \"src\", img_src_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(img);\n\t\t}\n\t};\n}\n\n// (93:40) {#if emoji.unicode}\nfunction create_if_block_1(ctx) {\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (88:53) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\nfunction create_each_block_2(key_1, ctx) {\n\tlet button;\n\tlet button_role_value;\n\tlet button_aria_selected_value;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_class_value;\n\tlet button_id_value;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[63].unicode) return create_if_block_1;\n\t\treturn create_else_block_1;\n\t}\n\n\tlet current_block_type = select_block_type(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem');\n\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i*/ ctx[65] == /*activeSearchItem*/ ctx[5]\n\t\t\t: '');\n\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[63].title);\n\n\t\t\tattr(button, \"class\", button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[65] === /*activeSearchItem*/ ctx[5]\n\t\t\t? 'active'\n\t\t\t: ''));\n\n\t\t\tattr(button, \"id\", button_id_value = \"emo-\" + /*emoji*/ ctx[63].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && button_role_value !== (button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem')) {\n\t\t\t\tattr(button, \"role\", button_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_aria_selected_value !== (button_aria_selected_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i*/ ctx[65] == /*activeSearchItem*/ ctx[5]\n\t\t\t: '')) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_title_value !== (button_title_value = /*emoji*/ ctx[63].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_class_value !== (button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[65] === /*activeSearchItem*/ ctx[5]\n\t\t\t? 'active'\n\t\t\t: ''))) {\n\t\t\t\tattr(button, \"class\", button_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_id_value !== (button_id_value = \"emo-\" + /*emoji*/ ctx[63].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\n// (69:36) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\nfunction create_each_block_1(key_1, ctx) {\n\tlet div0;\n\n\tlet t_value = (/*searchMode*/ ctx[4]\n\t? /*i18n*/ ctx[0].searchResultsLabel\n\t: /*emojiWithCategory*/ ctx[66].category\n\t\t? /*emojiWithCategory*/ ctx[66].category\n\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\n\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\";\n\n\tlet t;\n\tlet div0_id_value;\n\tlet div0_class_value;\n\tlet div1;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map_1();\n\tlet div1_role_value;\n\tlet div1_aria_labelledby_value;\n\tlet div1_id_value;\n\tlet each_value_2 = /*emojiWithCategory*/ ctx[66].emojis;\n\tconst get_key = ctx => /*emoji*/ ctx[63].id;\n\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\tlet child_ctx = get_each_context_2(ctx, each_value_2, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"id\", div0_id_value = \"menu-label-\" + /*i*/ ctx[65]);\n\n\t\t\tattr(div0, \"class\", div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\n\t\t\t? 'gone'\n\t\t\t: ''));\n\n\t\t\tattr(div0, \"aria-hidden\", \"true\");\n\t\t\tattr(div1, \"class\", \"emoji-menu\");\n\t\t\tattr(div1, \"role\", div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu');\n\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[65]);\n\t\t\tattr(div1, \"id\", div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '');\n\t\t\tthis.first = div0;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div0, anchor);\n\t\t\tappend(div0, t);\n\t\t\tinsert(target, div1, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/ 40977 && t_value !== (t_value = (/*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*emojiWithCategory*/ ctx[66].category\n\t\t\t\t? /*emojiWithCategory*/ ctx[66].category\n\t\t\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\n\t\t\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_id_value !== (div0_id_value = \"menu-label-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div0, \"id\", div0_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_class_value !== (div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\n\t\t\t? 'gone'\n\t\t\t: ''))) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin*/ 402686256) {\n\t\t\t\teach_value_2 = /*emojiWithCategory*/ ctx[66].emojis;\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_role_value !== (div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu')) {\n\t\t\t\tattr(div1, \"role\", div1_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_id_value !== (div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '')) {\n\t\t\t\tattr(div1, \"id\", div1_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div0);\n\t\t\tif (detaching) detach(div1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (102:94) {:else}\nfunction create_else_block(ctx) {\n\tlet img;\n\tlet img_src_value;\n\n\treturn {\n\t\tc() {\n\t\t\timg = element(\"img\");\n\t\t\tattr(img, \"class\", \"custom-emoji\");\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) attr(img, \"src\", img_src_value);\n\t\t\tattr(img, \"alt\", \"\");\n\t\t\tattr(img, \"loading\", \"lazy\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, img, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) {\n\t\t\t\tattr(img, \"src\", img_src_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(img);\n\t\t}\n\t};\n}\n\n// (102:34) {#if emoji.unicode}\nfunction create_if_block(ctx) {\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (98:102) {#each currentFavorites as emoji, i (emoji.id)}\nfunction create_each_block(key_1, ctx) {\n\tlet button;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_id_value;\n\n\tfunction select_block_type_1(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[63].unicode) return create_if_block;\n\t\treturn create_else_block;\n\t}\n\n\tlet current_block_type = select_block_type_1(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", \"menuitem\");\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[63].title);\n\t\t\tattr(button, \"class\", \"emoji\");\n\t\t\tattr(button, \"id\", button_id_value = \"fav-\" + /*emoji*/ ctx[63].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_title_value !== (button_title_value = /*emoji*/ ctx[63].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_id_value !== (button_id_value = \"fav-\" + /*emoji*/ ctx[63].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet section;\n\tlet div0;\n\tlet div4;\n\tlet div1;\n\tlet input;\n\tlet input_placeholder_value;\n\tlet input_aria_expanded_value;\n\tlet input_aria_activedescendant_value;\n\tlet label;\n\tlet t0_value = /*i18n*/ ctx[0].searchLabel + \"\";\n\tlet t0;\n\tlet span0;\n\tlet t1_value = /*i18n*/ ctx[0].searchDescription + \"\";\n\tlet t1;\n\tlet div2;\n\tlet button0;\n\tlet t2;\n\tlet button0_class_value;\n\tlet div2_class_value;\n\tlet span1;\n\tlet t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\";\n\tlet t3;\n\tlet div3;\n\tlet each_blocks_3 = [];\n\tlet each0_lookup = new Map_1();\n\tlet div3_class_value;\n\tlet div3_aria_label_value;\n\tlet div3_aria_activedescendant_value;\n\tlet div3_aria_hidden_value;\n\tlet div5;\n\tlet each_blocks_2 = [];\n\tlet each1_lookup = new Map_1();\n\tlet div5_aria_label_value;\n\tlet div7;\n\tlet div6;\n\tlet div8;\n\tlet t4;\n\tlet div8_class_value;\n\tlet div10;\n\tlet div9;\n\tlet each_blocks_1 = [];\n\tlet each2_lookup = new Map_1();\n\tlet div10_class_value;\n\tlet div10_role_value;\n\tlet div10_aria_label_value;\n\tlet div10_id_value;\n\tlet div11;\n\tlet each_blocks = [];\n\tlet each3_lookup = new Map_1();\n\tlet div11_class_value;\n\tlet div11_aria_label_value;\n\tlet button1;\n\tlet section_aria_label_value;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_4 = /*skinTones*/ ctx[9];\n\tconst get_key = ctx => /*skinTone*/ ctx[72];\n\n\tfor (let i = 0; i < each_value_4.length; i += 1) {\n\t\tlet child_ctx = get_each_context_4(ctx, each_value_4, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\n\t}\n\n\tlet each_value_3 = /*groups*/ ctx[12];\n\tconst get_key_1 = ctx => /*group*/ ctx[69].id;\n\n\tfor (let i = 0; i < each_value_3.length; i += 1) {\n\t\tlet child_ctx = get_each_context_3(ctx, each_value_3, i);\n\t\tlet key = get_key_1(child_ctx);\n\t\teach1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\n\t}\n\n\tlet each_value_1 = /*currentEmojisWithCategories*/ ctx[15];\n\tconst get_key_2 = ctx => /*emojiWithCategory*/ ctx[66].category;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1(ctx, each_value_1, i);\n\t\tlet key = get_key_2(child_ctx);\n\t\teach2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\n\t}\n\n\tlet each_value = /*currentFavorites*/ ctx[10];\n\tconst get_key_3 = ctx => /*emoji*/ ctx[63].id;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context(ctx, each_value, i);\n\t\tlet key = get_key_3(child_ctx);\n\t\teach3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tsection = element(\"section\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tdiv4 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tinput = element(\"input\");\n\t\t\tlabel = element(\"label\");\n\t\t\tt0 = text(t0_value);\n\t\t\tspan0 = element(\"span\");\n\t\t\tt1 = text(t1_value);\n\t\t\tdiv2 = element(\"div\");\n\t\t\tbutton0 = element(\"button\");\n\t\t\tt2 = text(/*skinToneButtonText*/ ctx[21]);\n\t\t\tspan1 = element(\"span\");\n\t\t\tt3 = text(t3_value);\n\t\t\tdiv3 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].c();\n\t\t\t}\n\n\t\t\tdiv5 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].c();\n\t\t\t}\n\n\t\t\tdiv7 = element(\"div\");\n\t\t\tdiv6 = element(\"div\");\n\t\t\tdiv8 = element(\"div\");\n\t\t\tt4 = text(/*message*/ ctx[18]);\n\t\t\tdiv10 = element(\"div\");\n\t\t\tdiv9 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].c();\n\t\t\t}\n\n\t\t\tdiv11 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tbutton1 = element(\"button\");\n\t\t\tbutton1.textContent = \"😀\";\n\t\t\tattr(div0, \"class\", \"pad-top\");\n\t\t\tattr(input, \"id\", \"search\");\n\t\t\tattr(input, \"class\", \"search\");\n\t\t\tattr(input, \"type\", \"search\");\n\t\t\tattr(input, \"role\", \"combobox\");\n\t\t\tattr(input, \"enterkeyhint\", \"search\");\n\t\t\tattr(input, \"placeholder\", input_placeholder_value = /*i18n*/ ctx[0].searchLabel);\n\t\t\tattr(input, \"autocapitalize\", \"none\");\n\t\t\tattr(input, \"autocomplete\", \"off\");\n\t\t\tattr(input, \"spellcheck\", \"true\");\n\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length));\n\t\t\tattr(input, \"aria-controls\", \"search-results\");\n\t\t\tattr(input, \"aria-describedby\", \"search-description\");\n\t\t\tattr(input, \"aria-autocomplete\", \"list\");\n\n\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\n\t\t\t: '');\n\n\t\t\tattr(label, \"class\", \"sr-only\");\n\t\t\tattr(label, \"for\", \"search\");\n\t\t\tattr(span0, \"id\", \"search-description\");\n\t\t\tattr(span0, \"class\", \"sr-only\");\n\t\t\tattr(div1, \"class\", \"search-wrapper\");\n\t\t\tattr(button0, \"id\", \"skintone-button\");\n\t\t\tattr(button0, \"class\", button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''));\n\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\tattr(button0, \"aria-describedby\", \"skintone-description\");\n\t\t\tattr(button0, \"aria-haspopup\", \"listbox\");\n\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\n\t\t\tattr(button0, \"aria-controls\", \"skintone-list\");\n\n\t\t\tattr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\n\t\t\t? 'expanded'\n\t\t\t: ''));\n\n\t\t\tattr(span1, \"id\", \"skintone-description\");\n\t\t\tattr(span1, \"class\", \"sr-only\");\n\t\t\tattr(div3, \"id\", \"skintone-list\");\n\n\t\t\tattr(div3, \"class\", div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? ''\n\t\t\t: 'hidden no-animate'));\n\n\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? 0\n\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n\n\t\t\tattr(div3, \"role\", \"listbox\");\n\t\t\tattr(div3, \"aria-label\", div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel);\n\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20]);\n\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6]);\n\t\t\tattr(div4, \"class\", \"search-row\");\n\t\t\tattr(div5, \"class\", \"nav\");\n\t\t\tattr(div5, \"role\", \"tablist\");\n\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\n\t\t\tattr(div5, \"aria-label\", div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel);\n\t\t\tattr(div6, \"class\", \"indicator\");\n\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\n\t\t\tattr(div7, \"class\", \"indicator-wrapper\");\n\t\t\tattr(div8, \"class\", div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'));\n\t\t\tattr(div8, \"role\", \"alert\");\n\t\t\tattr(div8, \"aria-live\", \"polite\");\n\n\t\t\tattr(div10, \"class\", div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\n\t\t\t? 'gone'\n\t\t\t: ''));\n\n\t\t\tattr(div10, \"role\", div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel');\n\n\t\t\tattr(div10, \"aria-label\", div10_aria_label_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]);\n\n\t\t\tattr(div10, \"id\", div10_id_value = /*searchMode*/ ctx[4]\n\t\t\t? ''\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`);\n\n\t\t\tattr(div10, \"tabindex\", \"0\");\n\t\t\tattr(div11, \"class\", div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''));\n\t\t\tattr(div11, \"role\", \"menu\");\n\t\t\tattr(div11, \"aria-label\", div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel);\n\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\n\t\t\tattr(button1, \"aria-hidden\", \"true\");\n\t\t\tattr(button1, \"tabindex\", \"-1\");\n\t\t\tattr(button1, \"class\", \"abs-pos hidden emoji\");\n\t\t\tattr(section, \"class\", \"picker\");\n\t\t\tattr(section, \"aria-label\", section_aria_label_value = /*i18n*/ ctx[0].regionLabel);\n\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, section, anchor);\n\t\t\tappend(section, div0);\n\t\t\tappend(section, div4);\n\t\t\tappend(div4, div1);\n\t\t\tappend(div1, input);\n\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\n\t\t\tappend(div1, label);\n\t\t\tappend(label, t0);\n\t\t\tappend(div1, span0);\n\t\t\tappend(span0, t1);\n\t\t\tappend(div4, div2);\n\t\t\tappend(div2, button0);\n\t\t\tappend(button0, t2);\n\t\t\tappend(div4, span1);\n\t\t\tappend(span1, t3);\n\t\t\tappend(div4, div3);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].m(div3, null);\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[48](div3);\n\t\t\tappend(section, div5);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].m(div5, null);\n\t\t\t}\n\n\t\t\tappend(section, div7);\n\t\t\tappend(div7, div6);\n\t\t\tappend(section, div8);\n\t\t\tappend(div8, t4);\n\t\t\tappend(section, div10);\n\t\t\tappend(div10, div9);\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].m(div9, null);\n\t\t\t}\n\n\t\t\t/*div10_binding*/ ctx[50](div10);\n\t\t\tappend(section, div11);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div11, null);\n\t\t\t}\n\n\t\t\tappend(section, button1);\n\t\t\t/*button1_binding*/ ctx[51](button1);\n\t\t\t/*section_binding*/ ctx[52](section);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(input, \"input\", /*input_input_handler*/ ctx[47]),\n\t\t\t\t\tlisten(input, \"keydown\", /*onSearchKeydown*/ ctx[30]),\n\t\t\t\t\tlisten(button0, \"click\", /*onClickSkinToneButton*/ ctx[35]),\n\t\t\t\t\tlisten(div3, \"focusout\", /*onSkinToneOptionsFocusOut*/ ctx[38]),\n\t\t\t\t\tlisten(div3, \"click\", /*onSkinToneOptionsClick*/ ctx[34]),\n\t\t\t\t\tlisten(div3, \"keydown\", /*onSkinToneOptionsKeydown*/ ctx[36]),\n\t\t\t\t\tlisten(div3, \"keyup\", /*onSkinToneOptionsKeyup*/ ctx[37]),\n\t\t\t\t\tlisten(div5, \"keydown\", /*onNavKeydown*/ ctx[32]),\n\t\t\t\t\taction_destroyer(/*calculateEmojiGridStyle*/ ctx[29].call(null, div9)),\n\t\t\t\t\tlisten(div10, \"click\", /*onEmojiClick*/ ctx[33]),\n\t\t\t\t\tlisten(div11, \"click\", /*onEmojiClick*/ ctx[33])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*i18n*/ 1 && input_placeholder_value !== (input_placeholder_value = /*i18n*/ ctx[0].searchLabel)) {\n\t\t\t\tattr(input, \"placeholder\", input_placeholder_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojis*/ 18 && input_aria_expanded_value !== (input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length))) {\n\t\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSearchItemId*/ 67108864 && input_aria_activedescendant_value !== (input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\n\t\t\t: '')) {\n\t\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*rawSearchText*/ 4) {\n\t\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t0_value !== (t0_value = /*i18n*/ ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t1_value !== (t1_value = /*i18n*/ ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\n\t\t\tif (dirty[0] & /*skinToneButtonText*/ 2097152) set_data(t2, /*skinToneButtonText*/ ctx[21]);\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && button0_class_value !== (button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''))) {\n\t\t\t\tattr(button0, \"class\", button0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\n\t\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\n\t\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\n\t\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpandedAfterAnimation*/ 524288 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\n\t\t\t? 'expanded'\n\t\t\t: ''))) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t3_value !== (t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone, i18n*/ 1049089) {\n\t\t\t\teach_value_4 = /*skinTones*/ ctx[9];\n\t\t\t\teach_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_class_value !== (div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? ''\n\t\t\t: 'hidden no-animate'))) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\n\t\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t\t? 0\n\t\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div3_aria_label_value !== (div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel)) {\n\t\t\t\tattr(div3, \"aria-label\", div3_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSkinTone*/ 1048576 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20])) {\n\t\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_aria_hidden_value !== (div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6])) {\n\t\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups, i18n, searchMode, currentGroup*/ 12305 | dirty[1] & /*onNavClick*/ 1) {\n\t\t\t\teach_value_3 = /*groups*/ ctx[12];\n\t\t\t\teach_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups*/ 4096) {\n\t\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div5_aria_label_value !== (div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel)) {\n\t\t\t\tattr(div5, \"aria-label\", div5_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*isRtl, currentGroupIndex*/ 16779264) {\n\t\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 262144) set_data(t4, /*message*/ ctx[18]);\n\n\t\t\tif (dirty[0] & /*message*/ 262144 && div8_class_value !== (div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'))) {\n\t\t\t\tattr(div8, \"class\", div8_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin, i18n, currentGroup*/ 402694449) {\n\t\t\t\teach_value_1 = /*currentEmojisWithCategories*/ ctx[15];\n\t\t\t\teach_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*databaseLoaded, message*/ 278528 && div10_class_value !== (div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\n\t\t\t? 'gone'\n\t\t\t: ''))) {\n\t\t\t\tattr(div10, \"class\", div10_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div10_role_value !== (div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel')) {\n\t\t\t\tattr(div10, \"role\", div10_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentGroup*/ 8209 && div10_aria_label_value !== (div10_aria_label_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name])) {\n\t\t\t\tattr(div10, \"aria-label\", div10_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup*/ 8208 && div10_id_value !== (div10_id_value = /*searchMode*/ ctx[4]\n\t\t\t? ''\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`)) {\n\t\t\t\tattr(div10, \"id\", div10_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*labelWithSkin, currentFavorites, currentSkinTone, unicodeWithSkin*/ 402654464) {\n\t\t\t\teach_value = /*currentFavorites*/ ctx[10];\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div11, destroy_block, create_each_block, null, get_each_context);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 262144 && div11_class_value !== (div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''))) {\n\t\t\t\tattr(div11, \"class\", div11_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div11_aria_label_value !== (div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel)) {\n\t\t\t\tattr(div11, \"aria-label\", div11_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*scrollbarWidth*/ 33554432) {\n\t\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && section_aria_label_value !== (section_aria_label_value = /*i18n*/ ctx[0].regionLabel)) {\n\t\t\t\tattr(section, \"aria-label\", section_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*pickerStyle*/ 4194304) {\n\t\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) detach(section);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].d();\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[48](null);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].d();\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].d();\n\t\t\t}\n\n\t\t\t/*div10_binding*/ ctx[50](null);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\t/*button1_binding*/ ctx[51](null);\n\t\t\t/*section_binding*/ ctx[52](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet { skinToneEmoji } = $$props;\n\tlet { i18n } = $$props;\n\tlet { database } = $$props;\n\tlet { customEmoji } = $$props;\n\tlet { customCategorySorting } = $$props;\n\n\t// private\n\tlet initialLoad = true;\n\n\tlet currentEmojis = [];\n\tlet currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\n\tlet rawSearchText = '';\n\tlet searchText = '';\n\tlet rootElement;\n\tlet baselineEmoji;\n\tlet tabpanelElement;\n\tlet searchMode = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItem = -1;\n\tlet message; // eslint-disable-line no-unused-vars\n\tlet skinTonePickerExpanded = false;\n\tlet skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n\tlet skinToneDropdown;\n\tlet currentSkinTone = 0;\n\tlet activeSkinTone = 0;\n\tlet skinToneButtonText; // eslint-disable-line no-unused-vars\n\tlet pickerStyle; // eslint-disable-line no-unused-vars\n\tlet skinToneButtonLabel = ''; // eslint-disable-line no-unused-vars\n\tlet skinTones = [];\n\tlet currentFavorites = []; // eslint-disable-line no-unused-vars\n\tlet defaultFavoriteEmojis;\n\tlet numColumns = DEFAULT_NUM_COLUMNS;\n\tlet isRtl = false;\n\tlet scrollbarWidth = 0; // eslint-disable-line no-unused-vars\n\tlet currentGroupIndex = 0;\n\tlet groups$1 = groups;\n\tlet currentGroup;\n\tlet databaseLoaded = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItemId; // eslint-disable-line no-unused-vars\n\n\t//\n\t// Utils/helpers\n\t//\n\tconst focus = id => {\n\t\trootElement.getRootNode().getElementById(id).focus();\n\t};\n\n\t// fire a custom event that crosses the shadow boundary\n\tconst fireEvent = (name, detail) => {\n\t\trootElement.dispatchEvent(new CustomEvent(name, { detail, bubbles: true, composed: true }));\n\t};\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst unicodeWithSkin = (emoji, currentSkinTone) => currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst labelWithSkin = (emoji, currentSkinTone) => uniq([\n\t\temoji.name || unicodeWithSkin(emoji, currentSkinTone),\n\t\t...emoji.shortcodes || []\n\t]).join(', ');\n\n\t// Detect a skintone option button\n\tconst isSkinToneOption = element => (/^skintone-/).test(element.id);\n\n\t//\n\t// Determine the emoji support level (in requestIdleCallback)\n\t//\n\temojiSupportLevelPromise.then(level => {\n\t\t// Can't actually test emoji support in Jest/JSDom, emoji never render in color in Cairo\n\t\t/* istanbul ignore next */\n\t\tif (!level) {\n\t\t\t$$invalidate(18, message = i18n.emojiUnsupportedMessage);\n\t\t}\n\t});\n\n\t//\n\t// Calculate the width of the emoji grid. This serves two purposes:\n\t// 1) Re-calculate the --num-columns var because it may have changed\n\t// 2) Re-calculate the scrollbar width because it may have changed\n\t//   (i.e. because the number of items changed)\n\t// 3) Re-calculate whether we're in RTL mode or not.\n\t//\n\t// The benefit of doing this in one place is to align with rAF/ResizeObserver\n\t// and do all the calculations in one go. RTL vs LTR is not strictly width-related,\n\t// but since we're already reading the style here, and since it's already aligned with\n\t// the rAF loop, this is the most appropriate place to do it perf-wise.\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction calculateEmojiGridStyle(node) {\n\t\treturn calculateWidth(node, width => {\n\t\t\t/* istanbul ignore next */\n\t\t\tif (\"production\" !== 'test') {\n\t\t\t\t// jsdom throws errors for this kind of fancy stuff\n\t\t\t\t// read all the style/layout calculations we need to make\n\t\t\t\tconst style = getComputedStyle(rootElement);\n\n\t\t\t\tconst newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n\t\t\t\tconst newIsRtl = style.getPropertyValue('direction') === 'rtl';\n\t\t\t\tconst parentWidth = node.parentElement.getBoundingClientRect().width;\n\t\t\t\tconst newScrollbarWidth = parentWidth - width;\n\n\t\t\t\t// write to Svelte variables\n\t\t\t\t$$invalidate(46, numColumns = newNumColumns);\n\n\t\t\t\t$$invalidate(25, scrollbarWidth = newScrollbarWidth); // eslint-disable-line no-unused-vars\n\t\t\t\t$$invalidate(24, isRtl = newIsRtl); // eslint-disable-line no-unused-vars\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n\t\tconst rootNode = rootElement.getRootNode();\n\t\tconst emojiToDomNode = emoji => rootNode.getElementById(`emo-${emoji.id}`);\n\t\tcheckZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode);\n\n\t\t// force update\n\t\t$$invalidate(1, currentEmojis = currentEmojis); // eslint-disable-line no-self-assign\n\t}\n\n\tfunction isZwjSupported(emoji) {\n\t\treturn !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\n\t}\n\n\tasync function filterEmojisByVersion(emojis) {\n\t\tconst emojiSupportLevel = await emojiSupportLevelPromise;\n\n\t\t// !version corresponds to custom emoji\n\t\treturn emojis.filter(({ version }) => !version || version <= emojiSupportLevel);\n\t}\n\n\tasync function summarizeEmojis(emojis) {\n\t\treturn summarizeEmojisForUI(emojis, await emojiSupportLevelPromise);\n\t}\n\n\tasync function getEmojisByGroup(group) {\n\n\t\tif (typeof group === 'undefined') {\n\t\t\treturn [];\n\t\t}\n\n\t\t// -1 is custom emoji\n\t\tconst emoji = group === -1\n\t\t? customEmoji\n\t\t: await database.getEmojiByGroup(group);\n\n\t\treturn summarizeEmojis(await filterEmojisByVersion(emoji));\n\t}\n\n\tasync function getEmojisBySearchQuery(query) {\n\t\treturn summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSearchKeydown(event) {\n\t\tif (!searchMode || !currentEmojis.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst goToNextOrPrevious = previous => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(5, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\treturn goToNextOrPrevious(false);\n\t\t\tcase 'ArrowUp':\n\t\t\t\treturn goToNextOrPrevious(true);\n\t\t\tcase 'Enter':\n\t\t\t\tif (activeSearchItem !== -1) {\n\t\t\t\t\thalt(event);\n\t\t\t\t\treturn clickEmoji(currentEmojis[activeSearchItem].id);\n\t\t\t\t} else if (currentEmojis.length) {\n\t\t\t\t\t$$invalidate(5, activeSearchItem = 0);\n\t\t\t\t}\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on nav\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavClick(group) {\n\t\t$$invalidate(2, rawSearchText = '');\n\t\t$$invalidate(44, searchText = '');\n\t\t$$invalidate(5, activeSearchItem = -1);\n\t\t$$invalidate(11, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavKeydown(event) {\n\t\tconst { target, key } = event;\n\n\t\tconst doFocus = el => {\n\t\t\tif (el) {\n\t\t\t\thalt(event);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t};\n\n\t\tswitch (key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\treturn doFocus(target.previousSibling);\n\t\t\tcase 'ArrowRight':\n\t\t\t\treturn doFocus(target.nextSibling);\n\t\t\tcase 'Home':\n\t\t\t\treturn doFocus(target.parentElement.firstChild);\n\t\t\tcase 'End':\n\t\t\t\treturn doFocus(target.parentElement.lastChild);\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on an emoji\n\t//\n\tasync function clickEmoji(unicodeOrName) {\n\t\tconst emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\n\t\tconst emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\n\t\tconst skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\n\t\tawait database.incrementFavoriteEmojiCount(unicodeOrName);\n\n\t\tfireEvent('emoji-click', {\n\t\t\temoji,\n\t\t\tskinTone: currentSkinTone,\n\t\t\t...skinTonedUnicode && { unicode: skinTonedUnicode },\n\t\t\t...emojiSummary.name && { name: emojiSummary.name }\n\t\t});\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onEmojiClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!target.classList.contains('emoji')) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n\t\t/* no await */\n\t\tclickEmoji(id);\n\t}\n\n\t//\n\t// Handle user input on the skintone picker\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!isSkinToneOption(target)) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst skinTone = parseInt(target.id.slice(9), 10); // remove 'skintone-' prefix\n\t\t$$invalidate(8, currentSkinTone = skinTone);\n\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\tfocus('skintone-button');\n\t\tfireEvent('skin-tone-change', { skinTone });\n\n\t\t/* no await */\n\t\tdatabase.setPreferredSkinTone(skinTone);\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onClickSkinToneButton(event) {\n\t\t$$invalidate(6, skinTonePickerExpanded = !skinTonePickerExpanded);\n\t\t$$invalidate(20, activeSkinTone = currentSkinTone);\n\n\t\tif (skinTonePickerExpanded) {\n\t\t\thalt(event);\n\t\t\trAF(() => focus(`skintone-${activeSkinTone}`));\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeydown(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst changeActiveSkinTone = async nextSkinTone => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(20, activeSkinTone = nextSkinTone);\n\t\t\tawait tick();\n\t\t\tfocus(`skintone-${activeSkinTone}`);\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\n\t\t\tcase 'ArrowDown':\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\n\t\t\tcase 'Home':\n\t\t\t\treturn changeActiveSkinTone(0);\n\t\t\tcase 'End':\n\t\t\t\treturn changeActiveSkinTone(skinTones.length - 1);\n\t\t\tcase 'Enter':\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t\tcase 'Escape':\n\t\t\t\thalt(event);\n\t\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\t\t\treturn focus('skintone-button');\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeyup(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event.key) {\n\t\t\tcase ' ':\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsFocusOut(event) {\n\t\t// On blur outside of the skintone options, collapse the skintone picker.\n\t\t// Except if focus is just moving to another skintone option, e.g. pressing up/down to change focus\n\t\tconst { relatedTarget } = event;\n\n\t\tif (!relatedTarget || !isSkinToneOption(relatedTarget)) {\n\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\t}\n\t}\n\n\tfunction input_input_handler() {\n\t\trawSearchText = this.value;\n\t\t$$invalidate(2, rawSearchText);\n\t}\n\n\tfunction div3_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tskinToneDropdown = $$value;\n\t\t\t$$invalidate(7, skinToneDropdown);\n\t\t});\n\t}\n\n\tconst click_handler = group => onNavClick(group);\n\n\tfunction div10_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\ttabpanelElement = $$value;\n\t\t\t$$invalidate(3, tabpanelElement);\n\t\t});\n\t}\n\n\tfunction button1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tbaselineEmoji = $$value;\n\t\t\t$$invalidate(17, baselineEmoji);\n\t\t});\n\t}\n\n\tfunction section_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trootElement = $$value;\n\t\t\t$$invalidate(16, rootElement);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('skinToneEmoji' in $$props) $$invalidate(40, skinToneEmoji = $$props.skinToneEmoji);\n\t\tif ('i18n' in $$props) $$invalidate(0, i18n = $$props.i18n);\n\t\tif ('database' in $$props) $$invalidate(39, database = $$props.database);\n\t\tif ('customEmoji' in $$props) $$invalidate(41, customEmoji = $$props.customEmoji);\n\t\tif ('customCategorySorting' in $$props) $$invalidate(42, customCategorySorting = $$props.customCategorySorting);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*customEmoji, database*/ 1280) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Set or update the customEmoji\n\t\t\t//\n\t\t\t{\n\t\t\t\tif (customEmoji && database) {\n\t\t\t\t\t$$invalidate(39, database.customEmoji = customEmoji, database);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n*/ 1 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t//\n\t\t\t// Set or update the database object\n\t\t\t//\n\t\t\t{\n\t\t\t\t// show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n\t\t\t\tasync function handleDatabaseLoading() {\n\t\t\t\t\tlet showingLoadingMessage = false;\n\n\t\t\t\t\tconst timeoutHandle = setTimeout(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tshowingLoadingMessage = true;\n\t\t\t\t\t\t\t$$invalidate(18, message = i18n.loadingMessage);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tTIMEOUT_BEFORE_LOADING_MESSAGE\n\t\t\t\t\t);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait database.ready();\n\t\t\t\t\t\t$$invalidate(14, databaseLoaded = true); // eslint-disable-line no-unused-vars\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t$$invalidate(18, message = i18n.networkErrorMessage);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tclearTimeout(timeoutHandle);\n\n\t\t\t\t\t\tif (showingLoadingMessage) {\n\t\t\t\t\t\t\t// Seems safer than checking the i18n string, which may change\n\t\t\t\t\t\t\tshowingLoadingMessage = false;\n\n\t\t\t\t\t\t\t$$invalidate(18, message = ''); // eslint-disable-line no-unused-vars\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (database) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\thandleDatabaseLoading();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/ 6144 | $$self.$$.dirty[1] & /*customEmoji*/ 1024) {\n\t\t\t{\n\t\t\t\tif (customEmoji && customEmoji.length) {\n\t\t\t\t\t$$invalidate(12, groups$1 = [customGroup, ...groups]);\n\t\t\t\t} else if (groups$1 !== groups) {\n\t\t\t\t\tif (currentGroupIndex) {\n\t\t\t\t\t\t// If the current group is anything other than \"custom\" (which is first), decrement.\n\t\t\t\t\t\t// This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n\t\t\t\t\t\t$$invalidate(11, currentGroupIndex--, currentGroupIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\t$$invalidate(12, groups$1 = groups);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*rawSearchText*/ 4) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Handle user input on the search input\n\t\t\t//\n\t\t\t{\n\t\t\t\trIC(() => {\n\t\t\t\t\t$$invalidate(44, searchText = (rawSearchText || '').trim()); // defer to avoid input delays, plus we can trim here\n\t\t\t\t\t$$invalidate(5, activeSearchItem = -1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/ 6144) {\n\t\t\t//\n\t\t\t// Update the current group based on the currentGroupIndex\n\t\t\t//\n\t\t\t$$invalidate(13, currentGroup = groups$1[currentGroupIndex]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded, currentGroup*/ 24576 | $$self.$$.dirty[1] & /*searchText*/ 8192) {\n\t\t\t//\n\t\t\t// Set or update the currentEmojis. Check for invalid ZWJ renderings\n\t\t\t// (i.e. double emoji).\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updateEmojis() {\n\n\t\t\t\t\tif (!databaseLoaded) {\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = []);\n\t\t\t\t\t\t$$invalidate(4, searchMode = false);\n\t\t\t\t\t} else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n\t\t\t\t\t\tconst currentSearchText = searchText;\n\t\t\t\t\t\tconst newEmojis = await getEmojisBySearchQuery(currentSearchText);\n\n\t\t\t\t\t\tif (currentSearchText === searchText) {\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\n\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (currentGroup) {\n\t\t\t\t\t\tconst currentGroupId = currentGroup.id;\n\t\t\t\t\t\tconst newEmojis = await getEmojisByGroup(currentGroupId);\n\n\t\t\t\t\t\tif (currentGroupId === currentGroup.id) {\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\n\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdateEmojis();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, searchMode*/ 4112) {\n\t\t\t//\n\t\t\t// Global styles for the entire picker\n\t\t\t//\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(22, pickerStyle = `\n  --font-family: ${FONT_FAMILY};\n  --num-groups: ${groups$1.length}; \n  --indicator-opacity: ${searchMode ? 0 : 1}; \n  --num-skintones: ${NUM_SKIN_TONES};`);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t//\n\t\t\t// Set or update the preferred skin tone\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updatePreferredSkinTone() {\n\t\t\t\t\tif (databaseLoaded) {\n\t\t\t\t\t\t$$invalidate(8, currentSkinTone = await database.getPreferredSkinTone());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdatePreferredSkinTone();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*skinToneEmoji*/ 512) {\n\t\t\t$$invalidate(9, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTones, currentSkinTone*/ 768) {\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(21, skinToneButtonText = skinTones[currentSkinTone]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n, currentSkinTone*/ 257) {\n\t\t\t$$invalidate(23, skinToneButtonLabel = i18n.skinToneLabel.replace('{skinTone}', i18n.skinTones[currentSkinTone]));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Set or update the favorites emojis\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updateDefaultFavoriteEmojis() {\n\t\t\t\t\t$$invalidate(45, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\n\t\t\t\t}\n\n\t\t\t\tif (databaseLoaded) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateDefaultFavoriteEmojis();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database, numColumns, defaultFavoriteEmojis*/ 49408) {\n\t\t\t{\n\t\t\t\tasync function updateFavorites() {\n\t\t\t\t\tconst dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n\t\t\t\t\tconst favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\n\t\t\t\t\t$$invalidate(10, currentFavorites = favorites);\n\t\t\t\t}\n\n\t\t\t\tif (databaseLoaded && defaultFavoriteEmojis) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateFavorites();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, tabpanelElement*/ 10) {\n\t\t\t// Some emojis have their ligatures rendered as two or more consecutive emojis\n\t\t\t// We want to treat these the same as unsupported emojis, so we compare their\n\t\t\t// widths against the baseline widths and remove them as necessary\n\t\t\t{\n\t\t\t\tconst zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)); // filter custom emoji\n\n\t\t\t\tif (zwjEmojisToCheck.length) {\n\t\t\t\t\t// render now, check their length later\n\t\t\t\t\trAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(1, currentEmojis = currentEmojis.filter(isZwjSupported));\n\n\t\t\t\t\trAF(() => {\n\t\t\t\t\t\t// Avoid Svelte doing an invalidation on the \"setter\" here.\n\t\t\t\t\t\t// At best the invalidation is useless, at worst it can cause infinite loops:\n\t\t\t\t\t\t// https://github.com/nolanlawson/emoji-picker-element/pull/180\n\t\t\t\t\t\t// https://github.com/sveltejs/svelte/issues/6521\n\t\t\t\t\t\t// Also note tabpanelElement can be null if the element is disconnected\n\t\t\t\t\t\t// immediately after connected, hence `|| {}`\n\t\t\t\t\t\t(tabpanelElement || {}).scrollTop = 0; // reset scroll top to 0 when emojis change\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, currentFavorites*/ 1026 | $$self.$$.dirty[1] & /*initialLoad*/ 4096) {\n\t\t\t{\n\t\t\t\t// consider initialLoad to be complete when the first tabpanel and favorites are rendered\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (\"production\" !== 'production' || false) {\n\t\t\t\t\tif (currentEmojis.length && currentFavorites.length && initialLoad) {\n\t\t\t\t\t\t$$invalidate(43, initialLoad = false);\n\t\t\t\t\t\trequestPostAnimationFrame(() => (void 0));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*searchMode, currentEmojis*/ 18 | $$self.$$.dirty[1] & /*customCategorySorting*/ 2048) {\n\t\t\t//\n\t\t\t// Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n\t\t\t// are no categories, because it's just easier to code the HTML this way.\n\t\t\t//\n\t\t\t{\n\t\t\t\tfunction calculateCurrentEmojisWithCategories() {\n\t\t\t\t\tif (searchMode) {\n\t\t\t\t\t\treturn [{ category: '', emojis: currentEmojis }];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst categoriesToEmoji = new Map();\n\n\t\t\t\t\tfor (const emoji of currentEmojis) {\n\t\t\t\t\t\tconst category = emoji.category || '';\n\t\t\t\t\t\tlet emojis = categoriesToEmoji.get(category);\n\n\t\t\t\t\t\tif (!emojis) {\n\t\t\t\t\t\t\temojis = [];\n\t\t\t\t\t\t\tcategoriesToEmoji.set(category, emojis);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temojis.push(emoji);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [...categoriesToEmoji.entries()].map(([category, emojis]) => ({ category, emojis })).sort((a, b) => customCategorySorting(a.category, b.category));\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t$$invalidate(15, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*activeSearchItem, currentEmojis*/ 34) {\n\t\t\t//\n\t\t\t// Handle active search item (i.e. pressing up or down while searching)\n\t\t\t//\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(26, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTonePickerExpanded, skinToneDropdown*/ 192) {\n\t\t\t// To make the animation nicer, change the z-index of the skintone picker button\n\t\t\t// *after* the animation has played. This makes it appear that the picker box\n\t\t\t// is expanding \"below\" the button\n\t\t\t{\n\t\t\t\tif (skinTonePickerExpanded) {\n\t\t\t\t\tskinToneDropdown.addEventListener(\n\t\t\t\t\t\t'transitionend',\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = true); // eslint-disable-line no-unused-vars\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ once: true }\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = false); // eslint-disable-line no-unused-vars\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\ti18n,\n\t\tcurrentEmojis,\n\t\trawSearchText,\n\t\ttabpanelElement,\n\t\tsearchMode,\n\t\tactiveSearchItem,\n\t\tskinTonePickerExpanded,\n\t\tskinToneDropdown,\n\t\tcurrentSkinTone,\n\t\tskinTones,\n\t\tcurrentFavorites,\n\t\tcurrentGroupIndex,\n\t\tgroups$1,\n\t\tcurrentGroup,\n\t\tdatabaseLoaded,\n\t\tcurrentEmojisWithCategories,\n\t\trootElement,\n\t\tbaselineEmoji,\n\t\tmessage,\n\t\tskinTonePickerExpandedAfterAnimation,\n\t\tactiveSkinTone,\n\t\tskinToneButtonText,\n\t\tpickerStyle,\n\t\tskinToneButtonLabel,\n\t\tisRtl,\n\t\tscrollbarWidth,\n\t\tactiveSearchItemId,\n\t\tunicodeWithSkin,\n\t\tlabelWithSkin,\n\t\tcalculateEmojiGridStyle,\n\t\tonSearchKeydown,\n\t\tonNavClick,\n\t\tonNavKeydown,\n\t\tonEmojiClick,\n\t\tonSkinToneOptionsClick,\n\t\tonClickSkinToneButton,\n\t\tonSkinToneOptionsKeydown,\n\t\tonSkinToneOptionsKeyup,\n\t\tonSkinToneOptionsFocusOut,\n\t\tdatabase,\n\t\tskinToneEmoji,\n\t\tcustomEmoji,\n\t\tcustomCategorySorting,\n\t\tinitialLoad,\n\t\tsearchText,\n\t\tdefaultFavoriteEmojis,\n\t\tnumColumns,\n\t\tinput_input_handler,\n\t\tdiv3_binding,\n\t\tclick_handler,\n\t\tdiv10_binding,\n\t\tbutton1_binding,\n\t\tsection_binding\n\t];\n}\n\nclass Picker extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance,\n\t\t\tcreate_fragment,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tskinToneEmoji: 40,\n\t\t\t\ti18n: 0,\n\t\t\t\tdatabase: 39,\n\t\t\t\tcustomEmoji: 41,\n\t\t\t\tcustomCategorySorting: 42\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1, -1]\n\t\t);\n\t}\n}\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading…',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\nconst PROPS = [\n  'customEmoji',\n  'customCategorySorting',\n  'database',\n  'dataSource',\n  'i18n',\n  'locale',\n  'skinToneEmoji'\n];\n\nclass PickerElement extends HTMLElement {\n  constructor (props) {\n    super();\n    this.attachShadow({ mode: 'open' });\n    const style = document.createElement('style');\n    style.textContent = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n\n  connectedCallback () {\n    this._cmp = new Picker({\n      target: this.shadowRoot,\n      props: this._ctx\n    });\n  }\n\n  disconnectedCallback () {\n    this._cmp.$destroy();\n    this._cmp = undefined;\n\n    const { database } = this._ctx;\n    if (database) {\n      database.close()\n        // only happens if the database failed to load in the first place, so we don't care)\n        .catch(err => console.error(err));\n    }\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji'] // complex objects aren't supported, also use kebab-case\n  }\n\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    // convert from kebab-case to camelcase\n    // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n    this._set(\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      newValue\n    );\n  }\n\n  _set (prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({ [prop]: newValue });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n\n  _dbCreate () {\n    const { locale, dataSource, database } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({ locale, dataSource }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush () {\n    Promise.resolve().then(() => (\n      this._dbCreate()\n    ));\n  }\n}\n\nconst definitions = {};\n\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get () {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop]\n    },\n    set (val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only')\n      }\n      this._set(prop, val);\n    }\n  };\n}\n\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\n\nexport { PickerElement as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}