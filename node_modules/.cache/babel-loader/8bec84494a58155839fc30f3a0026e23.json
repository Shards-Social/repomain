{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport Cookies from \"js-cookie\";\nimport axiosConfig from \"../services/axiosConfig\";\nconst initialState = {\n  id: \"\",\n  name: \"\",\n  profileImage: \"\",\n  token: \"\",\n  isGuest: \"\"\n};\nlet interceptor;\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    login: (state, action) => {\n      const {\n        id,\n        name,\n        profileImage,\n        token,\n        isGuest\n      } = action.payload;\n      Cookies.set(\"user\", JSON.stringify(action.payload), {\n        expires: 30\n      });\n      interceptor = axiosConfig.interceptors.request.use(config => {\n        config.headers[\"Authorization\"] = `Bearer ${token}`;\n        return config;\n      }, error => Promise.reject(error));\n      return {\n        id,\n        name,\n        profileImage,\n        token,\n        isGuest: !!isGuest\n      };\n    },\n    logout: state => {\n      Cookies.remove(\"user\");\n      axiosConfig.interceptors.request.eject(interceptor);\n      return initialState;\n    },\n    update: (state, action) => {\n      const {\n        payload\n      } = action;\n      Object.keys(payload).map(key => state[key] = payload[key]);\n      Cookies.set(\"user\", JSON.stringify(state));\n    }\n  }\n});\nexport const {\n  login,\n  logout,\n  update\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","Cookies","axiosConfig","initialState","id","name","profileImage","token","isGuest","interceptor","userSlice","reducers","login","state","action","payload","set","JSON","stringify","expires","interceptors","request","use","config","headers","error","Promise","reject","logout","remove","eject","update","Object","keys","map","key","actions","reducer"],"sources":["C:/Users/samth/repomain-1/src/features/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport Cookies from \"js-cookie\";\r\nimport axiosConfig from \"../services/axiosConfig\";\r\n\r\nconst initialState = {\r\n\tid: \"\",\r\n\tname: \"\",\r\n\tprofileImage: \"\",\r\n\ttoken: \"\",\r\n\tisGuest: \"\",\r\n};\r\n\r\nlet interceptor;\r\n\r\nconst userSlice = createSlice({\r\n\tname: \"user\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tlogin: (state, action) => {\r\n\t\t\tconst { id, name, profileImage, token, isGuest } = action.payload;\r\n\t\t\tCookies.set(\"user\", JSON.stringify(action.payload), { expires: 30 });\r\n\t\t\tinterceptor = axiosConfig.interceptors.request.use(\r\n\t\t\t\tconfig => {\r\n\t\t\t\t\tconfig.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t},\r\n\t\t\t\terror => Promise.reject(error)\r\n\t\t\t);\r\n\t\t\treturn { id, name, profileImage, token, isGuest: !!isGuest };\r\n\t\t},\r\n\t\tlogout: state => {\r\n\t\t\tCookies.remove(\"user\");\r\n\t\t\taxiosConfig.interceptors.request.eject(interceptor);\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\tupdate: (state, action) => {\r\n\t\t\tconst { payload } = action;\r\n\t\t\tObject.keys(payload).map(key => (state[key] = payload[key]));\r\n\t\t\tCookies.set(\"user\", JSON.stringify(state));\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { login, logout, update } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,WAAW,MAAM,yBAAyB;AAEjD,MAAMC,YAAY,GAAG;EACpBC,EAAE,EAAE,EAAE;EACNC,IAAI,EAAE,EAAE;EACRC,YAAY,EAAE,EAAE;EAChBC,KAAK,EAAE,EAAE;EACTC,OAAO,EAAE;AACV,CAAC;AAED,IAAIC,WAAW;AAEf,MAAMC,SAAS,GAAGV,WAAW,CAAC;EAC7BK,IAAI,EAAE,MAAM;EACZF,YAAY;EACZQ,QAAQ,EAAE;IACTC,KAAK,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MACzB,MAAM;QAAEV,EAAE;QAAEC,IAAI;QAAEC,YAAY;QAAEC,KAAK;QAAEC;MAAQ,CAAC,GAAGM,MAAM,CAACC,OAAO;MACjEd,OAAO,CAACe,GAAG,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,MAAM,CAACC,OAAO,CAAC,EAAE;QAAEI,OAAO,EAAE;MAAG,CAAC,CAAC;MACpEV,WAAW,GAAGP,WAAW,CAACkB,YAAY,CAACC,OAAO,CAACC,GAAG,CACjDC,MAAM,IAAI;QACTA,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAI,UAASjB,KAAM,EAAC;QACnD,OAAOgB,MAAM;MACd,CAAC,EACDE,KAAK,IAAIC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B;MACD,OAAO;QAAErB,EAAE;QAAEC,IAAI;QAAEC,YAAY;QAAEC,KAAK;QAAEC,OAAO,EAAE,CAAC,CAACA;MAAQ,CAAC;IAC7D,CAAC;IACDoB,MAAM,EAAEf,KAAK,IAAI;MAChBZ,OAAO,CAAC4B,MAAM,CAAC,MAAM,CAAC;MACtB3B,WAAW,CAACkB,YAAY,CAACC,OAAO,CAACS,KAAK,CAACrB,WAAW,CAAC;MACnD,OAAON,YAAY;IACpB,CAAC;IACD4B,MAAM,EAAE,CAAClB,KAAK,EAAEC,MAAM,KAAK;MAC1B,MAAM;QAAEC;MAAQ,CAAC,GAAGD,MAAM;MAC1BkB,MAAM,CAACC,IAAI,CAAClB,OAAO,CAAC,CAACmB,GAAG,CAACC,GAAG,IAAKtB,KAAK,CAACsB,GAAG,CAAC,GAAGpB,OAAO,CAACoB,GAAG,CAAE,CAAC;MAC5DlC,OAAO,CAACe,GAAG,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC,CAAC;IAC3C;EACD;AACD,CAAC,CAAC;AAEF,OAAO,MAAM;EAAED,KAAK;EAAEgB,MAAM;EAAEG;AAAO,CAAC,GAAGrB,SAAS,CAAC0B,OAAO;AAE1D,eAAe1B,SAAS,CAAC2B,OAAO"},"metadata":{},"sourceType":"module"}