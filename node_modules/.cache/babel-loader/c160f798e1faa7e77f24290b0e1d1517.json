{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { fetchUsersService } from \"../services/userServices\";\nimport { getAllChats } from \"./messageSlice\";\nimport { logout } from \"./userSlice\";\nconst initialState = {\n  users: [],\n  usersOnline: []\n};\nexport const getUsers = createAsyncThunk(\"users/getUsers\", async (props, thunkAPI) => {\n  const {\n    customFetch\n  } = props;\n  const {\n    fulfillWithValue,\n    rejectWithValue,\n    dispatch,\n    getState\n  } = thunkAPI;\n  const data = await customFetch(fetchUsersService);\n  if (!data) return rejectWithValue();\n  const {\n    users\n  } = data;\n  if (!getState().user.isGuest) dispatch(getAllChats({\n    customFetch,\n    users\n  }));\n  return fulfillWithValue(users);\n});\nconst usersSlice = createSlice({\n  name: \"users\",\n  initialState,\n  reducers: {\n    addOnline: (state, action) => {\n      state.usersOnline = action.payload;\n    }\n  },\n  extraReducers: {\n    [getUsers.fulfilled]: (state, action) => {\n      state.users = action.payload;\n    },\n    [logout.type]: (state, action) => {\n      return initialState;\n    }\n  }\n});\nexport const {\n  addOnline\n} = usersSlice.actions;\nexport default usersSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchUsersService","getAllChats","logout","initialState","users","usersOnline","getUsers","props","thunkAPI","customFetch","fulfillWithValue","rejectWithValue","dispatch","getState","data","user","isGuest","usersSlice","name","reducers","addOnline","state","action","payload","extraReducers","fulfilled","type","actions","reducer"],"sources":["C:/Users/samth/repomain-1/src/features/usersSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { fetchUsersService } from \"../services/userServices\";\r\nimport { getAllChats } from \"./messageSlice\";\r\nimport { logout } from \"./userSlice\";\r\n\r\nconst initialState = {\r\n\tusers: [],\r\n\tusersOnline: [],\r\n};\r\n\r\nexport const getUsers = createAsyncThunk(\"users/getUsers\", async (props, thunkAPI) => {\r\n\tconst { customFetch } = props;\r\n\tconst { fulfillWithValue, rejectWithValue, dispatch, getState } = thunkAPI;\r\n\tconst data = await customFetch(fetchUsersService);\r\n\tif (!data) return rejectWithValue();\r\n\tconst { users } = data;\r\n\tif (!getState().user.isGuest) dispatch(getAllChats({ customFetch, users }));\r\n\treturn fulfillWithValue(users);\r\n});\r\n\r\nconst usersSlice = createSlice({\r\n\tname: \"users\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\taddOnline: (state, action) => {\r\n\t\t\tstate.usersOnline = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[getUsers.fulfilled]: (state, action) => {\r\n\t\t\tstate.users = action.payload;\r\n\t\t},\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { addOnline } = usersSlice.actions;\r\nexport default usersSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,SAASC,iBAAiB,QAAQ,0BAA0B;AAC5D,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,MAAM,QAAQ,aAAa;AAEpC,MAAMC,YAAY,GAAG;EACpBC,KAAK,EAAE,EAAE;EACTC,WAAW,EAAE;AACd,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGR,gBAAgB,CAAC,gBAAgB,EAAE,OAAOS,KAAK,EAAEC,QAAQ,KAAK;EACrF,MAAM;IAAEC;EAAY,CAAC,GAAGF,KAAK;EAC7B,MAAM;IAAEG,gBAAgB;IAAEC,eAAe;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAGL,QAAQ;EAC1E,MAAMM,IAAI,GAAG,MAAML,WAAW,CAACT,iBAAiB,CAAC;EACjD,IAAI,CAACc,IAAI,EAAE,OAAOH,eAAe,EAAE;EACnC,MAAM;IAAEP;EAAM,CAAC,GAAGU,IAAI;EACtB,IAAI,CAACD,QAAQ,EAAE,CAACE,IAAI,CAACC,OAAO,EAAEJ,QAAQ,CAACX,WAAW,CAAC;IAAEQ,WAAW;IAAEL;EAAM,CAAC,CAAC,CAAC;EAC3E,OAAOM,gBAAgB,CAACN,KAAK,CAAC;AAC/B,CAAC,CAAC;AAEF,MAAMa,UAAU,GAAGlB,WAAW,CAAC;EAC9BmB,IAAI,EAAE,OAAO;EACbf,YAAY;EACZgB,QAAQ,EAAE;IACTC,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC7BD,KAAK,CAAChB,WAAW,GAAGiB,MAAM,CAACC,OAAO;IACnC;EACD,CAAC;EACDC,aAAa,EAAE;IACd,CAAClB,QAAQ,CAACmB,SAAS,GAAG,CAACJ,KAAK,EAAEC,MAAM,KAAK;MACxCD,KAAK,CAACjB,KAAK,GAAGkB,MAAM,CAACC,OAAO;IAC7B,CAAC;IACD,CAACrB,MAAM,CAACwB,IAAI,GAAG,CAACL,KAAK,EAAEC,MAAM,KAAK;MACjC,OAAOnB,YAAY;IACpB;EACD;AACD,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEiB;AAAU,CAAC,GAAGH,UAAU,CAACU,OAAO;AAC/C,eAAeV,UAAU,CAACW,OAAO"},"metadata":{},"sourceType":"module"}