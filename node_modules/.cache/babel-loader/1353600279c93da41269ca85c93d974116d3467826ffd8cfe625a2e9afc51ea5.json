{"ast":null,"code":"import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{update}from\"../../features/userSlice\";import{showModal}from\"../../features/modalSlice\";import useFetch from\"../../hooks/useFetch\";import\"./setupprofile.css\";import{useEffect}from\"react\";import{updateUserService}from\"../../services/userServices\";import{getUsers}from\"../../features/usersSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SetupProfile=_ref=>{let{close,user}=_ref;const[userDetails,setUserDetails]=useState({name:\"\",about:\"\",location:\"\"});useEffect(()=>{user._id&&setUserDetails({name:user.name||\"\",about:user.about||\"\",location:user.location||\"\"});},[user]);const _updateUser=(key,e)=>{setUserDetails(user=>({...user,[key]:e.target.value}));};const dispatch=useDispatch();const customFetch=useFetch();const clickHandler=async e=>{e.preventDefault();const data=await customFetch(updateUserService,userDetails);if(data){dispatch(getUsers({customFetch}));close();dispatch(update({name:data.user.name,id:data.user._id}));dispatch(showModal({msg:\"Success\"}));}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:clickHandler,className:\"setup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userDetails.name,required:true,onChange:e=>_updateUser(\"name\",e)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"About\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userDetails.about,onChange:e=>_updateUser(\"about\",e)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userDetails.location,onChange:e=>_updateUser(\"location\",e)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Continue\"}),/*#__PURE__*/_jsx(\"button\",{onClick:close,type:\"reset\",children:\"Cancel\"})]});};export default SetupProfile;","map":{"version":3,"names":["React","useState","useDispatch","update","showModal","useFetch","useEffect","updateUserService","getUsers","jsx","_jsx","jsxs","_jsxs","SetupProfile","_ref","close","user","userDetails","setUserDetails","name","about","location","_id","_updateUser","key","e","target","value","dispatch","customFetch","clickHandler","preventDefault","data","id","msg","onSubmit","className","children","htmlFor","type","required","onChange","onClick"],"sources":["C:/Users/samth/repomain-1/src/components/SetupProfile/SetupProfile.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { update } from \"../../features/userSlice\";\r\nimport { showModal } from \"../../features/modalSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport \"./setupprofile.css\";\r\nimport { useEffect } from \"react\";\r\nimport { updateUserService } from \"../../services/userServices\";\r\nimport { getUsers } from \"../../features/usersSlice\";\r\n\r\nconst SetupProfile = ({ close, user }) => {\r\n\tconst [userDetails, setUserDetails] = useState({ name: \"\", about: \"\", location: \"\" });\r\n\r\n\tuseEffect(() => {\r\n\t\tuser._id &&\r\n\t\t\tsetUserDetails({\r\n\t\t\t\tname: user.name || \"\",\r\n\t\t\t\tabout: user.about || \"\",\r\n\t\t\t\tlocation: user.location || \"\",\r\n\t\t\t});\r\n\t}, [user]);\r\n\r\n\tconst _updateUser = (key, e) => {\r\n\t\tsetUserDetails(user => ({\r\n\t\t\t...user,\r\n\t\t\t[key]: e.target.value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tconst clickHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tconst data = await customFetch(updateUserService, userDetails);\r\n\t\tif (data) {\r\n\t\t\tdispatch(getUsers({ customFetch }));\r\n\t\t\tclose();\r\n\t\t\tdispatch(update({ name: data.user.name, id: data.user._id }));\r\n\t\t\tdispatch(showModal({ msg: \"Success\" }));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={clickHandler} className=\"setup\">\r\n\t\t\t<label htmlFor=\"\">Username</label>\r\n\t\t\t<input type=\"text\" value={userDetails.name} required onChange={e => _updateUser(\"name\", e)} />\r\n\t\t\t<label htmlFor=\"\">About</label>\r\n\t\t\t<input type=\"text\" value={userDetails.about} onChange={e => _updateUser(\"about\", e)} />\r\n\t\t\t<label htmlFor=\"\">Location</label>\r\n\t\t\t<input type=\"text\" value={userDetails.location} onChange={e => _updateUser(\"location\", e)} />\r\n\t\t\t<button type=\"submit\">Continue</button>\r\n\t\t\t<button onClick={close} type=\"reset\">\r\n\t\t\t\tCancel\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default SetupProfile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}