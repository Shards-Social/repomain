{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Gallery from\"../../components/Gallery/Gallery\";import Online from\"../../components/Online/Online\";import ProfileCard from\"../../components/ProfileCard/ProfileCard\";import{useParams}from\"react-router\";import CreatePost from\"../../components/CreatePost/CreatePost\";import{useDispatch,useSelector}from\"react-redux\";import{setUserPosts}from\"../../features/postSlice\";import useFetch from\"../../hooks/useFetch\";import Posts from\"../../components/Post/Posts\";import{fetchPostsService}from\"../../services/postServices\";import InfinityScroll from\"../../components/InfinityScroll/InfinityScroll\";import\"./profile.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{id}=useParams();const{userPosts:{posts,page}}=useSelector(state=>state.post);const isOwnProfile=id===useSelector(state=>state.user.id);const[isLoading,setIsLoading]=useState(true);const dispatch=useDispatch();const customFetch=useFetch();useEffect(()=>{(async()=>{setIsLoading(true);const data=await customFetch(fetchPostsService,{userId:id});if(data)dispatch(setUserPosts(data));setIsLoading(false);})();},[dispatch,id,customFetch]);const getNextPage=async()=>{const data=await customFetch(fetchPostsService,{userId:id,page:page+1});dispatch(setUserPosts({posts:posts.concat(data.posts),page:data.page}));return data.posts.length;};return/*#__PURE__*/_jsxs(\"section\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"profile__left\",children:[/*#__PURE__*/_jsx(ProfileCard,{id:id,isOwnProfile:isOwnProfile}),/*#__PURE__*/_jsx(Gallery,{})]}),/*#__PURE__*/_jsx(InfinityScroll,{getNextPage:getNextPage,children:/*#__PURE__*/_jsxs(\"article\",{className:\"profile__center\",children:[isOwnProfile&&/*#__PURE__*/_jsx(CreatePost,{}),posts.length<1&&!isLoading&&/*#__PURE__*/_jsx(\"h2\",{children:\"No Posts\"}),/*#__PURE__*/_jsx(Posts,{posts:posts,isLoading:isLoading})]})}),/*#__PURE__*/_jsx(\"article\",{className:\"profile__right gradient-border\",children:/*#__PURE__*/_jsx(Online,{})})]});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","Gallery","Online","ProfileCard","useParams","CreatePost","useDispatch","useSelector","setUserPosts","useFetch","Posts","fetchPostsService","InfinityScroll","jsx","_jsx","jsxs","_jsxs","Profile","id","userPosts","posts","page","state","post","isOwnProfile","user","isLoading","setIsLoading","dispatch","customFetch","data","userId","getNextPage","concat","length","className","children"],"sources":["C:/Users/samth/repomain-1/src/pages/Profile/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Gallery from \"../../components/Gallery/Gallery\";\r\nimport Online from \"../../components/Online/Online\";\r\nimport ProfileCard from \"../../components/ProfileCard/ProfileCard\";\r\nimport { useParams } from \"react-router\";\r\nimport CreatePost from \"../../components/CreatePost/CreatePost\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setUserPosts } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Posts from \"../../components/Post/Posts\";\r\nimport { fetchPostsService } from \"../../services/postServices\";\r\nimport InfinityScroll from \"../../components/InfinityScroll/InfinityScroll\";\r\nimport \"./profile.css\";\r\n\r\nconst Profile = () => {\r\n\tconst { id } = useParams();\r\n\tconst {\r\n\t\tuserPosts: { posts, page },\r\n\t} = useSelector(state => state.post);\r\n\tconst isOwnProfile = id === useSelector(state => state.user.id);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tconst data = await customFetch(fetchPostsService, { userId: id });\r\n\t\t\tif (data) dispatch(setUserPosts(data));\r\n\t\t\tsetIsLoading(false);\r\n\t\t})();\r\n\t}, [dispatch, id, customFetch]);\r\n\r\n\tconst getNextPage = async () => {\r\n\t\tconst data = await customFetch(fetchPostsService, { userId: id, page: page + 1 });\r\n\t\tdispatch(setUserPosts({ posts: posts.concat(data.posts), page: data.page }));\r\n\t\treturn data.posts.length;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<section className=\"profile\">\r\n\t\t\t<article className=\"profile__left\">\r\n\t\t\t\t<ProfileCard id={id} isOwnProfile={isOwnProfile} />\r\n\t\t\t\t<Gallery />\r\n\t\t\t</article>\r\n\t\t\t<InfinityScroll getNextPage={getNextPage}>\r\n\t\t\t\t<article className=\"profile__center\">\r\n\t\t\t\t\t{isOwnProfile && <CreatePost />}\r\n\t\t\t\t\t{posts.length < 1 && !isLoading && <h2>No Posts</h2>}\r\n\t\t\t\t\t<Posts posts={posts} isLoading={isLoading} />\r\n\t\t\t\t</article>\r\n\t\t\t</InfinityScroll>\r\n\t\t\t<article className=\"profile__right gradient-border\">\r\n\t\t\t\t<Online />\r\n\t\t\t</article>\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}