{"version":3,"sources":["features/modalSlice.js","services/axiosConfig.js","features/userSlice.js","components/Loading/Loading.jsx","features/socketSlice.js","services/authServices.js","components/DataList/DataList.jsx","components/Login/Login.jsx","components/Register/Register.jsx","pages/Auth/Auth.jsx","components/Modal/Modal.jsx","components/ThemeSwitch/ThemeSwitch.jsx","components/SearchResults/SearchResults.jsx","assets/Shardslogoy.png","components/Appbar/Appbar.jsx","components/EditPost/EditPost.jsx","routes/ProtectedRoute.jsx","routes/index.jsx","App.js","app/rootReducer.js","app/store.js","index.js","utils/extractParams.js","assets/cake.svg","assets/camera.svg","assets/clock.svg","assets/location.svg","assets/mail.svg","assets/plane.svg","assets/not-found.svg","assets/search.svg","assets/chat.svg","assets/close.svg","assets/file.svg","assets/options.svg","assets/hamburger.svg","assets/dp.jpg","assets/logout.svg","assets/home.svg","services/postServices.js","hooks/useFetch.js","features/postSlice.js","services/messageServices.js","features/messageSlice.js","features/usersSlice.js","components/Backdrop/Backdrop.jsx","services/userServices.js","serverUri.js","components/Online/Online.jsx","components/CreatePost/CreatePost.jsx"],"names":["initialState","modals","isSidebarVisible","isLoading","showModal","createAsyncThunk","props","thunkAPI","fulfillWithValue","dispatch","msg","id","Date","getTime","modal","setTimeout","modalSlice","actions","hideModal","createSlice","name","reducers","state","action","filter","ele","payload","toggleSidebar","setIsLoading","extraReducers","fulfilled","push","logout","type","axiosConfig","axios","create","baseURL","SERVER_URI","interceptor","profileImage","token","isGuest","userSlice","login","Cookies","set","JSON","stringify","expires","interceptors","request","use","config","headers","error","Promise","reject","remove","eject","update","Object","keys","map","key","timeout","socket","socketSlice","setSocket","loginService","a","formData","params","extractParams","post","data","registerService","DataList","email","setEmail","useState","mailDomains","setMailDomains","emailDomains","useMemo","useEffect","includes","_email","split","domains","domain","mail","match","RegExp","prev","show","updateEmail","e","target","value","className","onClick","Login","setIsRegistering","password","setPassword","useDispatch","customFetch","useFetch","loginHandler","preventDefault","onSubmit","htmlFor","placeholder","onChange","initialForm","dob","Register","form","setForm","registerHandler","updateForm","required","Auth","isRegistering","Modal","node","useSelector","createPortal","document","getElementById","controller","AbortController","Loading","quote","setQuote","fetchQuote","get","signal","text","q","clearTimeout","abort","ThemeSwitch","setTheme","location","useLocation","isOpen","setIsOpen","changeTheme","currentTarget","classList","pathname","SearchResults","searchResult","reset","posts","to","_id","caption","users","user","Appbar","query","setQuery","setSearchResult","searchHandler","length","fetchPostsService","fetchUsersService","src","customHomeIcon","alt","console","log","searchIcon","closeIcon","dp","title","chatIcon","EditPost","close","editingPost","CreatePost","ProtectedRoute","children","Home","lazy","SinglePost","Profile","Chat","MessengerPage","NotFound","Layout","closeEditing","setEditingPost","Backdrop","onClose","fallback","Router","authenticate","Comp","path","element","index","App","theme","message","conversationID","parse","getUsers","setPosts","io","on","addOnline","deleteChat","off","senderID","updateChats","lastMessage","addMessages","clearMessage","Online","combineReducers","userReducer","modalReducer","postReducer","messageReducer","socketReducer","usersReducer","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","ignoredPaths","ReactDOM","render","StrictMode","forEach","createPostService","likePostService","patch","commentPostService","deleteCommentService","delete","editCommentService","replyCommentService","deletePostService","updatePostService","navigate","useNavigate","useCallback","callback","response","status","require","allPosts","page","userPosts","singlePost","handleGuest","rejectWithValue","postSlice","setAllPosts","addPost","getState","updatePost","setSinglePost","updatePosts","likePost","isLiked","userId","add","commentPost","comment","deletePost","deleteComment","postId","commentId","replyId","editComment","replyComment","replyTo","setUserPosts","pop","unshift","likes","find","_post","createdBy","updatedName","userDetails","updatedImage","image","pending","fetchChatsService","createChatService","partnerId","fetchMessagesService","messages","chats","getAllChats","u","createChat","every","chat","cid","messageSlice","setChatID","setReceiverID","chatId","_data","setMessages","findIndex","members","updatingChat","send","sender","createdAt","String","usersOnline","usersSlice","newChildren","cloneElement","undefined","firstChild","contains","updateUserService","updateDPService","process","loading","preview","compress","Compress","compressImage","files","options","size","quality","maxWidth","maxHeight","resize","rotate","loadImage","input","reader","FileReader","onload","result","readAsDataURL","convertBase64ToFile","ext","submitHandler","FormData","append","trim","fileIcon","accept","sendIcon"],"mappings":"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","file":"static/js/main.c0bc1393.chunk.js","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { logout } from \"./userSlice\";\r\n\r\nconst initialState = {\r\n\tmodals: [],\r\n\tisSidebarVisible: false,\r\n\tisLoading: false,\r\n};\r\n\r\nexport const showModal = createAsyncThunk(\"modal/show\", async (props, thunkAPI) => {\r\n\tconst { fulfillWithValue, dispatch } = thunkAPI;\r\n\tconst msg = props.msg || \"Hold on I swear it won't take so long\";\r\n\tconst id = new Date().getTime();\r\n\tconst modal = { msg, id };\r\n\tsetTimeout(() => {\r\n\t\tdispatch(modalSlice.actions.hideModal(id));\r\n\t}, 10000);\r\n\treturn fulfillWithValue(modal);\r\n});\r\n\r\nconst modalSlice = createSlice({\r\n\tname: \"modal\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\thideModal: (state, action) => {\r\n\t\t\tstate.modals = state.modals.filter(ele => ele.id !== action.payload);\r\n\t\t},\r\n\t\ttoggleSidebar: (state, action) => {\r\n\t\t\tstate.isSidebarVisible = action.payload;\r\n\t\t},\r\n\t\tsetIsLoading: (state, action) => {\r\n\t\t\tstate.isLoading = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[showModal.fulfilled]: (state, action) => {\r\n\t\t\tstate.modals.push(action.payload);\r\n\t\t},\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { hideModal, toggleSidebar, setIsLoading } = modalSlice.actions;\r\n\r\nexport default modalSlice.reducer;\r\n","import axios from \"axios\";\r\nimport SERVER_URI from \"../serverUri\";\r\n\r\nconst axiosConfig = axios.create({\r\n\tbaseURL: `${SERVER_URI}/api/v1`,\r\n});\r\n\r\nexport default axiosConfig;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport Cookies from \"js-cookie\";\r\nimport axiosConfig from \"../services/axiosConfig\";\r\n\r\nconst initialState = {\r\n\tid: \"\",\r\n\tname: \"\",\r\n\tprofileImage: \"\",\r\n\ttoken: \"\",\r\n\tisGuest: \"\",\r\n};\r\n\r\nlet interceptor;\r\n\r\nconst userSlice = createSlice({\r\n\tname: \"user\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tlogin: (state, action) => {\r\n\t\t\tconst { id, name, profileImage, token, isGuest } = action.payload;\r\n\t\t\tCookies.set(\"user\", JSON.stringify(action.payload), { expires: 30 });\r\n\t\t\tinterceptor = axiosConfig.interceptors.request.use(\r\n\t\t\t\tconfig => {\r\n\t\t\t\t\tconfig.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t},\r\n\t\t\t\terror => Promise.reject(error)\r\n\t\t\t);\r\n\t\t\treturn { id, name, profileImage, token, isGuest: !!isGuest };\r\n\t\t},\r\n\t\tlogout: state => {\r\n\t\t\tCookies.remove(\"user\");\r\n\t\t\taxiosConfig.interceptors.request.eject(interceptor);\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\tupdate: (state, action) => {\r\n\t\t\tconst { payload } = action;\r\n\t\t\tObject.keys(payload).map(key => (state[key] = payload[key]));\r\n\t\t\tCookies.set(\"user\", JSON.stringify(state));\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { login, logout, update } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport \"./loading.css\";\r\n\r\nlet timeout;\r\nconst controller = new AbortController();\r\n\r\nconst Loading = ({ show }) => {\r\n\tconst [quote, setQuote] = useState(\"\"); // Change initialQuote to \"\"\r\n\r\n\tconst fetchQuote = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get(\"\", {\r\n\t\t\t\tsignal: controller.signal,\r\n\t\t\t});\r\n\t\t\tsetQuote(data.text);\r\n\t\t} catch (err) {\r\n\t\t\t// Handle errors if needed\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!show) {\r\n\t\t\tfetchQuote();\r\n\t\t\ttimeout = setTimeout(() => {\r\n\t\t\t\tsetQuote(q => {\r\n\t\t\t\t\tif (q !== \"408 session timeout\") return q; // Return current quote if already fetched\r\n\t\t\t\t\treturn \"\"; // Set message for slow internet\r\n\t\t\t\t});\r\n\t\t\t}, 3000);\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\tcontroller.abort();\r\n\t\t};\r\n\t}, [show]);\r\n\r\n\treturn (\r\n\t\t<section className=\"loading\">\r\n\t\t\t<div className=\"loading__circle\"></div>\r\n\t\t\t<h2>Loading</h2>\r\n\t\t\t{quote && <p>{quote}</p>} {/* Only render the <p> if quote is not an empty string */}\r\n\t\t</section>\r\n\t);\r\n};\r\n\r\nexport default Loading;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { logout } from \"./userSlice\";\r\n\r\nconst initialState = {\r\n\tsocket: null,\r\n};\r\n\r\nconst socketSlice = createSlice({\r\n\tname: \"socket\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetSocket: (state, action) => {\r\n\t\t\tstate.socket = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { setSocket } = socketSlice.actions;\r\n\r\nexport default socketSlice.reducer;\r\n","import extractParams from \"../utils/extractParams\";\r\nimport axiosConfig from \"./axiosConfig\";\r\n\r\nconst loginService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"email\", \"password\");\r\n\tconst { data } = await axiosConfig.post(\"/auth/login\", params);\r\n\treturn data;\r\n};\r\n\r\nconst registerService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"name\", \"email\", \"password\", \"dob\");\r\n\tconst { data } = await axiosConfig.post(\"/auth/register\", params);\r\n\treturn data;\r\n};\r\n\r\nexport { loginService, registerService };\r\n","import React, { useEffect, useState, useMemo } from \"react\";\r\n\r\nconst DataList = ({ email, setEmail }) => {\r\n\tconst [mailDomains, setMailDomains] = useState({});\r\n\r\n\tconst emailDomains = useMemo(\r\n\t\t() => [\r\n\t\t\t\"gmail\",\r\n\t\t\t\"hotmail\",\r\n\t\t\t\"outlook\",\r\n\t\t\t\"aol\",\r\n\t\t\t\"aim\",\r\n\t\t\t\"yahoo\",\r\n\t\t\t\"icloud\",\r\n\t\t\t\"protonmail\",\r\n\t\t\t\"zoho\",\r\n\t\t\t\"yandex\",\r\n\t\t\t\"gmx\",\r\n\t\t\t\"hubspot\",\r\n\t\t\t\"mail\",\r\n\t\t],\r\n\t\t[]\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tif (email.includes(\"@\")) {\r\n\t\t\tconst _email = email.split(\"@\")[0];\r\n\t\t\tlet domains = emailDomains.map(domain => `${mailDomains.mail || _email}@${domain}.com`);\r\n\t\t\tdomains = domains.filter(domain => domain.match(new RegExp(email)));\r\n\t\t\tsetMailDomains(prev => ({ show: true, mail: prev.mail || _email, domains }));\r\n\t\t} else if (!email.includes(\"@\")) {\r\n\t\t\tsetMailDomains({});\r\n\t\t}\r\n\t\tif (mailDomains.domains?.includes(email)) {\r\n\t\t\tsetMailDomains(prev => ({ ...prev, show: false }));\r\n\t\t}\r\n\t\t// eslint-disable-next-line\r\n\t}, [email, emailDomains]);\r\n\r\n\tconst updateEmail = e => {\r\n\t\tsetEmail(e.target.value);\r\n\t};\r\n\r\n\tif (mailDomains.show)\r\n\t\treturn (\r\n\t\t\t<datalist id=\"email-domains\" className=\"email-datalist\">\r\n\t\t\t\t{mailDomains.domains?.map(mail => (\r\n\t\t\t\t\t<option onClick={updateEmail} key={mail}>\r\n\t\t\t\t\t\t{mail}\r\n\t\t\t\t\t</option>\r\n\t\t\t\t))}\r\n\t\t\t</datalist>\r\n\t\t);\r\n\treturn null;\r\n};\r\n\r\nexport default DataList;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { login } from \"../../features/userSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { setIsLoading } from \"../../features/modalSlice\";\r\nimport { loginService } from \"../../services/authServices\";\r\nimport DataList from \"../DataList/DataList\";\r\nimport \"./Login.css\"; // Import the CSS file\r\n\r\nconst Login = ({ setIsRegistering }) => {\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tconst loginHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(setIsLoading(true));\r\n\t\tconst data = await customFetch(loginService, { email, password });\r\n\t\tif (data) dispatch(login(data));\r\n\t\tdispatch(setIsLoading(false));\r\n\t};\r\n\r\n\tconst guestHandler = () => {\r\n\t\tdispatch(login({ id: \"guest\", isGuest: true }));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={loginHandler} className=\"login\">\r\n\t\t\t<div className=\"email\">\r\n\t\t\t\t<label htmlFor=\"login-email\">Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tid=\"login-email\"\r\n\t\t\t\t\tplaceholder=\"johndoe@example.com\"\r\n\t\t\t\t\tvalue={email}\r\n\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t\t<DataList email={email} setEmail={setEmail} />\r\n\t\t\t</div>\r\n\t\t\t<label htmlFor=\"login-password\">Password</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tid=\"login-password\"\r\n\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\tvalue={password}\r\n\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t/>\r\n\t\t\t<button type=\"Enter\">Login</button>\r\n\t\t\t<p>\r\n\t\t\t\tDon't have an account? <br />\r\n\t\t\t\t<span onClick={() => setIsRegistering(true)}>Register</span> or{\" \"}\r\n\t\t\t\t<span onClick={guestHandler}>Browse signed out</span>\r\n\t\t\t</p>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setIsLoading } from \"../../features/modalSlice\";\r\nimport { login } from \"../../features/userSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport { registerService } from \"../../services/authServices\";\r\nimport DataList from \"../DataList/DataList\";\r\n\r\nconst initialForm = { name: \"\", password: \"\", email: \"\", dob: \"\" };\r\n\r\nconst Register = ({ setIsRegistering }) => {\r\n\tconst [form, setForm] = useState(initialForm);\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tconst registerHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(setIsLoading(true));\r\n\t\tconst data = await customFetch(registerService, form);\r\n\t\tif (data) dispatch(login(data));\r\n\t\tdispatch(setIsLoading(false));\r\n\t};\r\n\r\n\tconst updateForm = (key, e) => {\r\n\t\tsetForm(form => ({ ...form, [key]: e.target.value }));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={registerHandler} className=\"register\">\r\n\t\t\t<div className=\"email\">\r\n\t\t\t\t<label htmlFor=\"email\">Email</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\tplaceholder=\"johndoe@example.com\"\r\n\t\t\t\t\tvalue={form.email}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tonChange={e => updateForm(\"email\", e)}\r\n\t\t\t\t/>\r\n\t\t\t\t<DataList email={form.email} setEmail={value => setForm(form => ({ ...form, email: value }))} />\r\n\t\t\t</div>\r\n\t\t\t<label htmlFor=\"name\">Username</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\tid=\"name\"\r\n\t\t\t\tplaceholder=\"john doe\"\r\n\t\t\t\tvalue={form.name}\r\n\t\t\t\trequired\r\n\t\t\t\tonChange={e => updateForm(\"name\", e)}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"dob\">Date of birth</label>\r\n\t\t\t<input type=\"date\" id=\"dob\" required value={form.dob} onChange={e => updateForm(\"dob\", e)} />\r\n\t\t\t<label htmlFor=\"password\">Password</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"password\"\r\n\t\t\t\tid=\"password\"\r\n\t\t\t\tplaceholder=\"Top secret\"\r\n\t\t\t\trequired\r\n\t\t\t\tvalue={form.password}\r\n\t\t\t\tonChange={e => updateForm(\"password\", e)}\r\n\t\t\t/>\r\n\t\t\t<button type=\"submit\">Register</button>\r\n\t\t\t<p>\r\n\t\t\t\tAlready have an account? <span onClick={() => setIsRegistering(false)}>Login</span>\r\n\t\t\t</p>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState } from \"react\";\r\nimport Login from \"../../components/Login/Login\";\r\nimport Register from \"../../components/Register/Register\";\r\nimport \"./auth.css\";\r\n\r\nconst Auth = () => {\r\n   const [isRegistering, setIsRegistering] = useState(false);\r\n\r\n   return (\r\n      <section className={isRegistering ? \"auth signup\" : \"auth\"}>\r\n         <Login setIsRegistering={setIsRegistering} />\r\n         <Register setIsRegistering={setIsRegistering} />\r\n      </section>\r\n   );\r\n};\r\n\r\nexport default Auth;\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"./modal.css\";\r\n\r\nconst Modal = () => {\r\n\tconst { modals } = useSelector(state => state.modal);\r\n\tconst node = modals.map(modal => (\r\n\t\t<div className=\"modal\" key={modal.id}>\r\n\t\t\t<p>{modal.msg}</p>\r\n\t\t</div>\r\n\t));\r\n\treturn createPortal(node, document.getElementById(\"modals\"));\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\"; // Import the useLocation hook\r\nimport \"./themeSwitch.css\";\r\nimport { AiFillFormatPainter } from \"react-icons/ai\";\r\n\r\nconst ThemeSwitch = ({ setTheme }) => {\r\n  const location = useLocation(); // Use the useLocation hook\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const className = isOpen ? \"theme-switch open\" : \"theme-switch\";\r\n  const changeTheme = (e) => {\r\n    setTheme(e.currentTarget.classList[0]);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  // Check if the current location is the specific page where you want to show ThemeSwitch\r\n  const isSpecificPage = location.pathname === \"/specific-page\"; // Replace \"/specific-page\" with your desired page route\r\n\r\n  if (!isSpecificPage) {\r\n    return null; // Don't render the ThemeSwitch component if not on the specific page\r\n  }\r\n\r\n  return (\r\n\t\t<div className={className}>\r\n\t\t\t<div className=\"switch\" onClick={() => setIsOpen(!isOpen)}>\r\n\t\t\t\t<AiFillFormatPainter />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"themes\">\r\n\t\t\t\t<div className=\"dark\" onClick={changeTheme}>\r\n\t\t\t\t\t<p className=\"tooltip\">Dark</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"dark-contrast\" onClick={changeTheme}>\r\n\t\t\t\t\t<p className=\"tooltip\">Dark Contrast</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"dark-blue-tint\" onClick={changeTheme}>\r\n\t\t\t\t\t<p className=\"tooltip\">Dark Blue Tint</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ThemeSwitch;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./searchresult.css\";\r\n\r\nconst SearchResults = ({ searchResult, reset }) => {\r\n\treturn (\r\n\t\t<div className=\"search-results\">\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Posts</h3>\r\n\t\t\t\t{searchResult.posts?.map(post => (\r\n\t\t\t\t\t<Link to={`/post/${post._id}`} key={post._id}>\r\n\t\t\t\t\t\t<p onClick={reset}>{post.caption}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<h3>Users</h3>\r\n\t\t\t\t{searchResult.users?.map(user => (\r\n\t\t\t\t\t<Link to={`/user/${user._id}`} key={user._id}>\r\n\t\t\t\t\t\t<p onClick={reset}>{user.name}</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchResults;\r\n","export default __webpack_public_path__ + \"static/media/Shardslogoy.61cc1cf8.png\";","import React, { useState } from \"react\";\r\nimport { dp, closeIcon, searchIcon, hamburger, chatIcon, homeIcon } from \"../../assets\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setIsLoading, toggleSidebar } from \"../../features/modalSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport SearchResults from \"../SearchResults/SearchResults\";\r\nimport { fetchUsersService } from \"../../services/userServices\";\r\nimport { fetchPostsService } from \"../../services/postServices\";\r\nimport \"./appbar.css\";\r\nimport { logout } from \"../../features/userSlice\";\r\nimport customHomeIcon from \"../../assets/Shardslogoy.png\";\r\n\r\n\r\nconst Appbar = () => {\r\n\t\r\n\t\r\n\r\n\t//local states\r\n\tconst [query, setQuery] = useState(\"\");\r\n\tconst [searchResult, setSearchResult] = useState({});\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\r\n\tconst searchHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tif (query.length > 0) {\r\n\t\t\tdispatch(setIsLoading(true));\r\n\t\t\tconst { posts } = await customFetch(fetchPostsService, { query });\r\n\t\t\tconst { users } = await customFetch(fetchUsersService, { query });\r\n\t\t\tsetSearchResult({ posts, users });\r\n\t\t\tdispatch(setIsLoading(false));\r\n\t\t}\r\n\t};\r\n\r\n\tconst reset = () => {\r\n\t\tsetQuery(\"\");\r\n\t\tsetSearchResult({});\r\n\t};\r\n\r\n\r\n  const gotoLogin = () => dispatch(logout());\r\n\r\n  const handleLeftButton1 = () => {\r\n    // Functionality for left button 1\r\n    console.log(\"Left Button 1 clicked\");\r\n  };\r\n\r\n  const handleLeftButton2 = () => {\r\n    // Functionality for left button 2\r\n    console.log(\"Left Button 2 clicked\");\r\n  };\r\n\r\n  const handleLeftButton3 = () => {\r\n    // Functionality for left button 3\r\n    console.log(\"Left Button 3 clicked\");\r\n  };\r\n\r\n  const handleRightButton1 = () => {\r\n    // Functionality for right button 1\r\n    console.log(\"Right Button 1 clicked\");\r\n  };\r\n\r\n  const handleRightButton2 = () => {\r\n    // Functionality for right button 2\r\n    console.log(\"Right Button 2 clicked\");\r\n  };\r\n\r\n  const handleRightButton3 = () => {\r\n    // Functionality for right button 3\r\n    console.log(\"Right Button 3 clicked\");\r\n  };\r\n\r\n  const {\r\n    user: { id, profileImage, isGuest },\r\n    modal: { isSidebarVisible },\r\n  } = useSelector((state) => state);\r\n\r\n  return (\r\n\t<header className={searchResult.posts || searchResult.users ? \"appbar topZ\" : \"appbar\"}>\r\n\t  <div className=\"appbar__logo\">\r\n\t\t<Link to=\"/\">\r\n\t\t  <img src={customHomeIcon} alt=\"home\" className=\"home-icon\" />\r\n\t\t</Link>\r\n\t  </div>\r\n  \r\n\t  <div className=\"appbar__search\">\r\n\t\t<button className=\"button-left\" onClick={handleLeftButton1}>\r\n\t\t  Home\r\n\t\t</button>\r\n\t\t<button className=\"button-left\" onClick={handleLeftButton2}>\r\n\t\t  Videos\r\n\t\t</button>\r\n\t\t<button className=\"button-left\" onClick={handleLeftButton3}>\r\n\t\t Fourms\r\n\t\t</button>\r\n  \r\n\t\r\n\t\t<form onSubmit={searchHandler} className=\"searchform\">\r\n\t\t  <button type=\"submit\" aria-label=\"search\">\r\n\t\t\t<img src={searchIcon} alt=\"search\" />\r\n\t\t  </button>\r\n\t\t  <input\r\n\t\t\ttype=\"text\"\r\n\t\t\tplaceholder=\"Tap to search...\"\r\n\t\t\tvalue={query}\r\n\t\t\tonChange={(e) => setQuery(e.target.value)}\r\n\t\t  />\r\n\t\t  <button onClick={reset} type=\"button\" aria-label=\"clear search\">\r\n\t\t\t<img src={closeIcon} alt=\"close\" className=\"close\" />\r\n\t\t  </button>\r\n\t\t  {(searchResult.posts || searchResult.users) && (\r\n\t\t\t<SearchResults searchResult={searchResult} reset={reset} />\r\n\t\t  )}\r\n\t\t</form>\r\n  \r\n\t\t\r\n\t\t<button className=\"button-right\" onClick={handleRightButton1}>\r\n\t\t  Notifications\r\n\t\t</button>\r\n\t\t<button className=\"button-right\" onClick={handleRightButton2}>\r\n\t\t  Likes\r\n\t\t</button>\r\n\t\t<button className=\"button-right\" onClick={handleRightButton3}>\r\n\t\t  Messages\r\n\t\t</button>\r\n\t  </div>\r\n\r\n\r\n      <nav className=\"appbar__profile\">\r\n        {isGuest ? (\r\n          <button className=\"login-btn\" onClick={gotoLogin}>\r\n            Login\r\n          </button>\r\n        ) : (\r\n          <>\r\n            <Link to={`/user/${id}`}>\r\n              <img\r\n                src={profileImage || dp}\r\n                alt=\"profileImage\"\r\n                className=\"appbar__profile__dp\"\r\n                title=\"profile\"\r\n              />\r\n            </Link>\r\n            <Link to=\"/chat\">\r\n              <img src={chatIcon} alt=\"chat\" className=\"chat\" />\r\n            </Link>\r\n          </>\r\n        )}\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Appbar;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport CreatePost from \"../CreatePost/CreatePost\";\r\nimport \"./editpost.css\";\r\n\r\nconst EditPost = ({ close }) => {\r\n\tconst {\r\n\t\tpost: { editingPost },\r\n\t} = useSelector(state => state);\r\n\treturn (\r\n\t\t<div className=\"editPost\">\r\n\t\t\t<CreatePost post={editingPost} id=\"editpost-image\" close={close} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default EditPost;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n\tconst { isGuest } = useSelector(state => state.user);\r\n\treturn isGuest ? <Navigate to=\"/\" /> : children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import { Suspense, lazy } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Outlet, Route, Routes } from \"react-router-dom\";\r\nimport { setEditingPost } from \"../features/postSlice\";\r\nimport Appbar from \"../components/Appbar/Appbar\";\r\nimport Backdrop from \"../components/Backdrop/Backdrop\";\r\nimport EditPost from \"../components/EditPost/EditPost\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport ProgressBar from \"react-topbar-progress-indicator\";\r\n\r\nconst Home = lazy(() => import(\"../pages/Home/Home\"));\r\nconst SinglePost = lazy(() => import(\"../pages/Singlepost/SinglePost\"));\r\nconst Profile = lazy(() => import(\"../pages/Profile/Profile\"));\r\nconst Chat = lazy(() => import(\"../pages/Chat/Chat\"));\r\nconst MessengerPage = lazy(() => import(\"../pages/Messenger/Messenger\"));\r\nconst NotFound = lazy(() => import(\"../pages/NotFound/NotFound\"));\r\n\r\nconst Layout = () => {\r\n\tconst {\r\n\t\tpost: { editingPost },\r\n\t} = useSelector(state => state);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst closeEditing = () => {\r\n\t\tdispatch(setEditingPost({}));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Backdrop show={!!editingPost._id} onClose={closeEditing}>\r\n\t\t\t\t<EditPost close={closeEditing} />\r\n\t\t\t</Backdrop>\r\n\t\t\t<Appbar />\r\n\t\t\t<Suspense fallback={<ProgressBar />}>\r\n\t\t\t\t<Outlet />\r\n\t\t\t</Suspense>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst Router = () => {\r\n\tconst authenticate = Comp => (\r\n\t\t<ProtectedRoute>\r\n\t\t\t<Comp />\r\n\t\t</ProtectedRoute>\r\n\t);\r\n\treturn (\r\n\t\t<Routes>\r\n\t\t\t<Route path=\"/\" element={<Layout />}>\r\n\t\t\t\t<Route index element={<Home />} />\r\n\t\t\t\t<Route path=\"/post/:id\" element={<SinglePost />} />\r\n\t\t\t\t<Route path=\"/user/:id\" element={<Profile />} />\r\n\t\t\t\t<Route path=\"/chat\" element={authenticate(Chat)} />\r\n\t\t\t\t<Route path=\"/chat/messenger\" element={authenticate(MessengerPage)} />\r\n\t\t\t\t<Route path=\"*\" element={<NotFound />} />\r\n\t\t\t</Route>\r\n\t\t</Routes>\r\n\t);\r\n};\r\n\r\nexport default Router;\r\n","import React, { useEffect, useState } from \"react\";\r\n//utilities\r\nimport { io } from \"socket.io-client\";\r\nimport Cookies from \"js-cookie\";\r\nimport useFetch from \"./hooks/useFetch.js\";\r\nimport SERVER_URI from \"./serverUri\";\r\n//redux\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"./features/userSlice.js\";\r\nimport { setSocket } from \"./features/socketSlice\";\r\nimport { showModal } from \"./features/modalSlice.js\";\r\nimport { addMessages, clearMessage, deleteChat, updateChats } from \"./features/messageSlice.js\";\r\nimport { addOnline, getUsers } from \"./features/usersSlice.js\";\r\nimport { setPosts } from \"./features/postSlice.js\";\r\n//components\r\nimport Auth from \"./pages/Auth/Auth\";\r\nimport Modal from \"./components/Modal/Modal.jsx\";\r\nimport Loading from \"./components/Loading/Loading.jsx\";\r\nimport Backdrop from \"./components/Backdrop/Backdrop.jsx\";\r\nimport ThemeSwitch from \"./components/ThemeSwitch/ThemeSwitch.jsx\";\r\nimport Router from \"./routes\";\r\nimport Online from \"./components/Online/Online.jsx\";\r\n\r\nfunction App() {\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\tconst [theme, setTheme] = useState(\"dark\");\r\n\tconst {\r\n\t\tuser: { id, isGuest },\r\n\t\tmodal: { isLoading, isSidebarVisible },\r\n\t\tsocket: { socket },\r\n\t\tmessage: { to, conversationID },\r\n\t} = useSelector(state => state);\r\n\r\n\t//login\r\n\tuseEffect(() => {\r\n\t\tconst user = Cookies.get(\"user\");\r\n\t\tif (user) dispatch(login(JSON.parse(user)));\r\n\t\telse dispatch(login({ id: \"guest\", isGuest: true }));\r\n\t}, [dispatch]);\r\n\r\n\t//get users and chats and init socket\r\n\tuseEffect(() => {\r\n\t\tif (id) {\r\n\t\t\tconst query = `id=${id}`;\r\n\t\t\tdispatch(getUsers({ customFetch }));\r\n\t\t\tdispatch(setPosts({ customFetch }));\r\n\t\t\tif (!isGuest) dispatch(setSocket(io(SERVER_URI, { query })));\r\n\t\t}\r\n\t}, [id, customFetch, dispatch, isGuest]);\r\n\r\n\t//socket events\r\n\tuseEffect(() => {\r\n\t\tif (socket) {\r\n\t\t\tsocket.on(\"usersOnline\", users => dispatch(addOnline(users)));\r\n\t\t\tsocket.on(\"delete chat\", id => dispatch(deleteChat(id)));\r\n\t\t}\r\n\t}, [socket, dispatch]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (socket) {\r\n\t\t\tsocket.off(\"receive message\").on(\"receive message\", (message, senderID) => {\r\n\t\t\t\tdispatch(showModal({ msg: \"1 new message\" }));\r\n\t\t\t\tdispatch(updateChats({ lastMessage: message, id: senderID, customFetch }));\r\n\t\t\t\tsenderID === to && dispatch(addMessages({ text: message }));\r\n\t\t\t});\r\n\t\t\tsocket.off(\"clear chat\").on(\"clear chat\", id => dispatch(clearMessage({ conversationID: id })));\r\n\t\t}\r\n\t}, [customFetch, dispatch, socket, to, conversationID]);\r\n\r\n\treturn (\r\n\t\t<div className={\"app \" + theme}>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className={isSidebarVisible ? \"sidebar visible\" : \"sidebar\"}>\r\n\t\t\t\t\t<ThemeSwitch setTheme={setTheme} />\r\n\t\t\t\t\t<Online />\r\n\t\t\t\t</div>\r\n\t\t\t\t<ThemeSwitch setTheme={setTheme} />\r\n\t\t\t\t<Modal />\r\n\t\t\t\t{id ? <Router /> : <Auth />}\r\n\t\t\t</div>\r\n\t\t\t<Backdrop show={isLoading}>\r\n\t\t\t\t<Loading />\r\n\t\t\t</Backdrop>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { combineReducers } from 'redux';\r\nimport userReducer from '../features/userSlice';\r\nimport modalReducer from '../features/modalSlice';\r\nimport postReducer from '../features/postSlice';\r\nimport messageReducer from '../features/messageSlice';\r\nimport socketReducer from '../features/socketSlice';\r\nimport usersReducer from '../features/usersSlice';\r\n\r\nexport default combineReducers({\r\n\tuser: userReducer,\r\n\tmodal: modalReducer,\r\n\tpost: postReducer,\r\n\tmessage: messageReducer,\r\n\tsocket: socketReducer,\r\n\tusers: usersReducer,\r\n});\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport rootReducer from \"./rootReducer\";\r\n\r\nexport const store = configureStore({\r\n\treducer: rootReducer,\r\n\tmiddleware: getDefaultMiddleware =>\r\n\t\tgetDefaultMiddleware({\r\n\t\t\tserializableCheck: {\r\n\t\t\t\tignoredActions: [\"socket/setSocket\"],\r\n\t\t\t\tignoredPaths: [\"socket.socket\"],\r\n\t\t\t},\r\n\t\t}),\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store={store}>\r\n\t\t\t<Router>\r\n\t\t\t\t<App />\r\n\t\t\t</Router>\r\n\t\t</Provider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n","export default function extractParams(formData, ...keys) {\r\n\tconst params = {};\r\n\tkeys.forEach(key => (params[key] = formData[key]));\r\n\treturn params;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cake.2dfa279f.svg\";","export default __webpack_public_path__ + \"static/media/camera.317cfe4b.svg\";","export default __webpack_public_path__ + \"static/media/clock.334d8cdb.svg\";","export default __webpack_public_path__ + \"static/media/location.dabc97c6.svg\";","export default __webpack_public_path__ + \"static/media/mail.d0600757.svg\";","export default __webpack_public_path__ + \"static/media/plane.246c1c23.svg\";","export default __webpack_public_path__ + \"static/media/not-found.9b6b0dd6.svg\";","export default __webpack_public_path__ + \"static/media/search.8d276dc2.svg\";","export default __webpack_public_path__ + \"static/media/chat.eca453c5.svg\";","export default __webpack_public_path__ + \"static/media/close.375a9b21.svg\";","export default __webpack_public_path__ + \"static/media/file.87d67653.svg\";","export default __webpack_public_path__ + \"static/media/options.8bb0b253.svg\";","export default __webpack_public_path__ + \"static/media/hamburger.0610f104.svg\";","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Qm+aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+IDxkYzpjcmVhdG9yPiA8cmRmOlNlcT4gPHJkZjpsaT5WZWN0b3JTdG9jay5jb20vMTg5NDIzODE8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2RjOmNyZWF0b3I+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAD6AO4DAREAAhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAEHBAUG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\"","export default __webpack_public_path__ + \"static/media/logout.200f969c.svg\";","export default __webpack_public_path__ + \"static/media/home.38fec2ae.svg\";","import extractParams from \"../utils/extractParams\";\r\nimport axiosConfig from \"./axiosConfig\";\r\n\r\nconst createPostService = async (formData = {}) => {\r\n\tconst headers = { \"Content-Type\": \"multipart/form-data\" };\r\n\tconst { data } = await axiosConfig.post(\"/posts\", formData, { headers });\r\n\treturn data;\r\n};\r\n\r\nconst fetchPostsService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"id\", \"query\", \"page\", \"userId\");\r\n\tconst { data } = await axiosConfig.get(\"/posts\", { params });\r\n\treturn data;\r\n};\r\n\r\nconst likePostService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"id\", \"add\");\r\n\tconst { data } = await axiosConfig.patch(\"/posts/like\", params);\r\n\treturn data;\r\n};\r\n\r\nconst commentPostService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"id\", \"comment\");\r\n\tconst { data } = await axiosConfig.post(\"/posts/comment\", params);\r\n\treturn data;\r\n};\r\n\r\nconst deleteCommentService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"postId\", \"commentId\", \"replyId\");\r\n\tconst { data } = await axiosConfig.delete(`/posts/comment`, { params });\r\n\treturn data;\r\n};\r\n\r\nconst editCommentService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"postId\", \"commentId\", \"comment\", \"replyId\");\r\n\tconst { data } = await axiosConfig.patch(`/posts/comment`, params);\r\n\treturn data;\r\n};\r\n\r\nconst replyCommentService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"id\", \"commentId\", \"comment\", \"replyTo\");\r\n\tconst { data } = await axiosConfig.post(\"/posts/comment\", params);\r\n\treturn data;\r\n};\r\n\r\nconst deletePostService = async (formData = {}) => {\r\n\tconst { id } = formData;\r\n\tconst { data } = await axiosConfig.delete(`/posts/${id}`);\r\n\treturn data;\r\n};\r\n\r\nconst updatePostService = async (formData = {}) => {\r\n\tconst { id, form } = formData;\r\n\tconst { data } = await axiosConfig.patch(`/posts/${id}`, form);\r\n\treturn data;\r\n};\r\n\r\nexport {\r\n\tfetchPostsService,\r\n\tcreatePostService,\r\n\tlikePostService,\r\n\tcommentPostService,\r\n\tdeletePostService,\r\n\tupdatePostService,\r\n\tdeleteCommentService,\r\n\teditCommentService,\r\n\treplyCommentService,\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { showModal } from \"../features/modalSlice\";\r\n\r\nconst useFetch = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\treturn useCallback(\r\n\t\tasync (callback, ...props) => {\r\n\t\t\ttry {\r\n\t\t\t\treturn await callback(...props);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tif (error.response?.status === 404) navigate(\"/not-found\");\r\n\t\t\t\tconst msg = error.response?.data?.msg || \"Something went wrong\";\r\n\t\t\t\tdispatch(showModal({ msg }));\r\n\t\t\t}\r\n\t\t},\r\n\t\t//if I add navigate here, it will be re-rendered every time\r\n\t\t//eslint-disable-next-line\r\n\t\t[dispatch]\r\n\t);\r\n};\r\n\r\nexport default useFetch;\r\n","import {\r\n\tcommentPostService,\r\n\tcreatePostService,\r\n\tdeleteCommentService,\r\n\tdeletePostService,\r\n\teditCommentService,\r\n\tfetchPostsService,\r\n\tlikePostService,\r\n\treplyCommentService,\r\n\tupdatePostService,\r\n} from \"../services/postServices\";\r\nimport { showModal } from \"./modalSlice\";\r\nimport { logout, update } from \"./userSlice\";\r\n\r\nconst { createSlice, createAsyncThunk } = require(\"@reduxjs/toolkit\");\r\n\r\nconst initialState = {\r\n\tallPosts: { posts: [], page: 0, isLoading: false },\r\n\tuserPosts: { posts: [], page: 0 },\r\n\teditingPost: {},\r\n\tsinglePost: {},\r\n};\r\n\r\nconst handleGuest = (isGuest, dispatch) => {\r\n\tif (isGuest) {\r\n\t\tdispatch(showModal({ msg: \"You must login to use all features\" }));\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nexport const setPosts = createAsyncThunk(\"post/set\", async (props, thunkAPI) => {\r\n\tconst { customFetch } = props;\r\n\tconst { rejectWithValue, dispatch } = thunkAPI;\r\n\tconst data = await customFetch(fetchPostsService);\r\n\tif (!data) return rejectWithValue();\r\n\tdispatch(postSlice.actions.setAllPosts(data));\r\n\treturn;\r\n});\r\n\r\nexport const addPost = createAsyncThunk(\"post/add\", async (props, thunkAPI) => {\r\n\tconst { customFetch, formData } = props;\r\n\tconst { fulfillWithValue, dispatch, rejectWithValue, getState } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tdispatch(showModal({}));\r\n\tconst data = await customFetch(createPostService, formData);\r\n\tif (!data) return rejectWithValue();\r\n\tdispatch(showModal({ msg: \"Post created\" }));\r\n\treturn fulfillWithValue(data.post);\r\n});\r\n\r\nexport const updatePost = createAsyncThunk(\"post/update\", async (props, thunkAPI) => {\r\n\tconst { customFetch, formData, id } = props;\r\n\tconst { dispatch, rejectWithValue, getState } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t\tpost: { singlePost },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tdispatch(showModal({}));\r\n\tconst data = await customFetch(updatePostService, { id, form: formData });\r\n\tif (!data) return rejectWithValue();\r\n\tdispatch(showModal({ msg: \"Post updated\" }));\r\n\tif (singlePost._id === id) dispatch(postSlice.actions.setSinglePost(data.post));\r\n\tdispatch(postSlice.actions.updatePosts(data.post));\r\n});\r\n\r\nexport const likePost = createAsyncThunk(\"post/like\", async (props, thunkAPI) => {\r\n\tconst { customFetch, id, isLiked } = props;\r\n\tconst { dispatch, rejectWithValue, getState } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest, id: userId },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tcustomFetch(likePostService, { id, add: !isLiked });\r\n\treturn { id, userId, add: !isLiked };\r\n});\r\n\r\nexport const commentPost = createAsyncThunk(\"post/comment\", async (props, thunkAPI) => {\r\n\tconst { customFetch, id, comment } = props;\r\n\tconst { dispatch, rejectWithValue, getState } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t\tpost: { singlePost },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tconst data = await customFetch(commentPostService, { id, comment });\r\n\tif (!data) return rejectWithValue();\r\n\tif (singlePost._id === id) dispatch(postSlice.actions.setSinglePost(data.post));\r\n\tdispatch(postSlice.actions.updatePosts(data.post));\r\n});\r\n\r\nexport const deletePost = createAsyncThunk(\"post/delete\", async (props, thunkAPI) => {\r\n\tconst { customFetch, id } = props;\r\n\tconst { dispatch, fulfillWithValue, getState, rejectWithValue } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tawait customFetch(deletePostService, { id });\r\n\tdispatch(showModal({ msg: \"Post Deleted\" }));\r\n\treturn fulfillWithValue(id);\r\n});\r\n\r\nexport const deleteComment = createAsyncThunk(\"post/comment/delete\", async (props, thunkAPI) => {\r\n\tconst { customFetch, postId, commentId, replyId } = props;\r\n\tconst { dispatch, fulfillWithValue, getState, rejectWithValue } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tconst data = await customFetch(deleteCommentService, { postId, commentId, replyId });\r\n\tdispatch(showModal({ msg: \"Comment Deleted\" }));\r\n\treturn fulfillWithValue(data);\r\n});\r\n\r\nexport const editComment = createAsyncThunk(\"post/comment/edit\", async (props, thunkAPI) => {\r\n\tconst { customFetch, postId, commentId, comment, replyId } = props;\r\n\tconst { dispatch, rejectWithValue, getState, fulfillWithValue } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tconst data = await customFetch(editCommentService, { postId, commentId, comment, replyId });\r\n\tdispatch(showModal({ msg: \"Comment Edited\" }));\r\n\treturn fulfillWithValue(data);\r\n});\r\n\r\nexport const replyComment = createAsyncThunk(\"post/comment/reply\", async (props, thunkAPI) => {\r\n\tconst { customFetch, id, commentId, comment, replyTo } = props;\r\n\tconst { dispatch, rejectWithValue, getState, fulfillWithValue } = thunkAPI;\r\n\tconst {\r\n\t\tuser: { isGuest },\r\n\t} = getState();\r\n\tif (handleGuest(isGuest, dispatch)) return rejectWithValue();\r\n\tconst data = await customFetch(replyCommentService, { id, commentId, comment, replyTo });\r\n\treturn fulfillWithValue(data);\r\n});\r\n\r\nconst postSlice = createSlice({\r\n\tname: \"post\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetAllPosts: (state, action) => {\r\n\t\t\tstate.allPosts = action.payload;\r\n\t\t},\r\n\t\tsetUserPosts: (state, action) => {\r\n\t\t\tstate.userPosts = action.payload;\r\n\t\t},\r\n\t\tupdatePosts: (state, action) => {\r\n\t\t\tstate.allPosts.posts = state.allPosts.posts.map(post => {\r\n\t\t\t\tif (post._id === action.payload._id) return action.payload;\r\n\t\t\t\treturn post;\r\n\t\t\t});\r\n\t\t\tstate.userPosts.posts = state.userPosts.posts.map(post => {\r\n\t\t\t\tif (post._id === action.payload._id) return action.payload;\r\n\t\t\t\treturn post;\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetSinglePost: (state, action) => {\r\n\t\t\tstate.singlePost = action.payload;\r\n\t\t},\r\n\t\tsetEditingPost: (state, action) => {\r\n\t\t\tstate.editingPost = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[addPost.fulfilled]: (state, action) => {\r\n\t\t\tstate.allPosts.posts.pop();\r\n\t\t\tstate.userPosts.posts.pop();\r\n\t\t\tstate.allPosts.posts.unshift(action.payload);\r\n\t\t\tstate.userPosts.posts.unshift(action.payload);\r\n\t\t},\r\n\t\t[deletePost.fulfilled]: (state, action) => {\r\n\t\t\tstate.allPosts.posts = state.allPosts.posts.filter(post => post._id !== action.payload);\r\n\t\t\tstate.userPosts.posts = state.userPosts.posts.filter(post => post._id !== action.payload);\r\n\t\t},\r\n\t\t[likePost.fulfilled]: (state, { payload }) => {\r\n\t\t\tconst { singlePost, allPosts, userPosts } = state;\r\n\t\t\tconst { id, userId, add } = payload;\r\n\t\t\tif (singlePost._id === id) {\r\n\t\t\t\tadd\r\n\t\t\t\t\t? singlePost.likes.push(userId)\r\n\t\t\t\t\t: (singlePost.likes = singlePost.likes.filter(ele => ele !== userId));\r\n\t\t\t}\r\n\t\t\tlet post = allPosts.posts.find(post => post._id === id);\r\n\t\t\tlet _post = userPosts.posts.find(post => post._id === id);\r\n\t\t\tif (add) {\r\n\t\t\t\tpost?.likes.push(userId);\r\n\t\t\t\t_post?.likes.push(userId);\r\n\t\t\t} else {\r\n\t\t\t\tpost && (post.likes = post.likes.filter(ele => ele !== userId));\r\n\t\t\t\t_post && (_post.likes = _post.likes.filter(ele => ele !== userId));\r\n\t\t\t}\r\n\t\t},\r\n\t\t[update.type]: (state, action) => {\r\n\t\t\tconst { name, profileImage, id } = action.payload;\r\n\t\t\tstate.allPosts.posts = state.allPosts.posts.map(post => {\r\n\t\t\t\tif (post.createdBy === id) {\r\n\t\t\t\t\tconst updatedName = name || post.userDetails.name;\r\n\t\t\t\t\tconst updatedImage = profileImage || post.userDetails.image;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tuserDetails: { name: updatedName, image: updatedImage },\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn post;\r\n\t\t\t});\r\n\t\t\tstate.userPosts.posts = state.userPosts.posts.map(post => {\r\n\t\t\t\tif (post.createdBy === id) {\r\n\t\t\t\t\tconst updatedName = name || post.userDetails.name;\r\n\t\t\t\t\tconst updatedImage = profileImage || post.userDetails.image;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...post,\r\n\t\t\t\t\t\tuserDetails: { name: updatedName, image: updatedImage },\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn post;\r\n\t\t\t});\r\n\t\t},\r\n\t\t[deleteComment.fulfilled]: (state, action) => {\r\n\t\t\tconst { post } = action.payload;\r\n\t\t\tstate.singlePost = post;\r\n\t\t\tstate.allPosts.posts = state.allPosts.posts.map(_post => (_post._id === post._id ? post : _post));\r\n\t\t},\r\n\t\t[editComment.fulfilled]: (state, action) => {\r\n\t\t\tconst { post } = action.payload;\r\n\t\t\tstate.singlePost = post;\r\n\t\t},\r\n\t\t[replyComment.fulfilled]: (state, action) => {\r\n\t\t\tconst { post } = action.payload;\r\n\t\t\tstate.singlePost = post;\r\n\t\t},\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t\t[setPosts.pending]: state => {\r\n\t\t\tstate.allPosts.isLoading = true;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { setUserPosts, setAllPosts, setEditingPost, setSinglePost } = postSlice.actions;\r\n\r\nexport default postSlice.reducer;\r\n","import extractParams from \"../utils/extractParams\";\r\nimport axiosConfig from \"./axiosConfig\";\r\n\r\nconst fetchChatsService = async () => {\r\n\tconst { data } = await axiosConfig.get(\"/chats\");\r\n\treturn data;\r\n};\r\n\r\nconst createChatService = async (formData = {}) => {\r\n\tconst { partnerId } = formData;\r\n\tconst { data } = await axiosConfig.post(\"/chats\", { partnerId });\r\n\treturn data;\r\n};\r\n\r\nconst fetchMessagesService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"chatId\");\r\n\tconst { data } = await axiosConfig.get(\"/messages\", { params });\r\n\treturn data;\r\n};\r\n\r\nexport { fetchChatsService, createChatService, fetchMessagesService };\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { createChatService, fetchChatsService, fetchMessagesService } from \"../services/messageServices\";\r\nimport { logout } from \"./userSlice\";\r\n\r\nconst initialState = {\r\n\tconversationID: \"\",\r\n\tto: \"\",\r\n\tmessages: [],\r\n\tchats: [],\r\n};\r\n\r\nexport const getAllChats = createAsyncThunk(\"message/getAllChats\", async (props, thunkAPI) => {\r\n\tconst { customFetch, users } = props;\r\n\tconst { getState, rejectWithValue, fulfillWithValue } = thunkAPI;\r\n\tconst { user } = getState();\r\n\tconst data = await customFetch(fetchChatsService);\r\n\tif (!data) return rejectWithValue();\r\n\treturn fulfillWithValue({\r\n\t\tusers: users.filter(u => u._id !== user.id),\r\n\t\tchats: data.chats,\r\n\t});\r\n});\r\n\r\nexport const createChat = createAsyncThunk(\"message/createChat\", async (props, thunkAPI) => {\r\n\tconst { getState, dispatch, rejectWithValue } = thunkAPI;\r\n\tconst { customFetch, id } = props;\r\n\tconst { user, users, message } = getState();\r\n\tconst data = await customFetch(createChatService, { partnerId: id });\r\n\tif (!data) rejectWithValue();\r\n\tif (message.chats.every(chat => chat._id !== data.cid)) {\r\n\t\tdispatch(getAllChats({ customFetch, users: users.users }));\r\n\t}\r\n\tdispatch(messageSlice.actions.setChatID(data.cid));\r\n\tdispatch(messageSlice.actions.setReceiverID(id));\r\n\tconst _data = await customFetch(fetchMessagesService, { chatId: data.cid });\r\n\tdispatch(clearMessage());\r\n\tdispatch(setMessages({ messages: _data.messages, id: user.id }));\r\n});\r\n\r\nexport const updateChats = createAsyncThunk(\"message/updateChat\", async (props, thunkAPI) => {\r\n\tconst { getState, dispatch, fulfillWithValue } = thunkAPI;\r\n\tconst { lastMessage, id, chatId, customFetch } = props;\r\n\tconst { message, users } = getState();\r\n\tlet index;\r\n\tif (chatId) index = message.chats.findIndex(chat => chat._id === chatId);\r\n\telse index = message.chats.findIndex(chat => chat.members.includes(id));\r\n\tif (index >= 0) return fulfillWithValue({ index, lastMessage });\r\n\tdispatch(getAllChats({ customFetch, users: users.users }));\r\n});\r\n\r\nconst messageSlice = createSlice({\r\n\tname: \"message\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tclearMessage: (state, action) => {\r\n\t\t\tconst conversationID = action.payload?.conversationID;\r\n\t\t\tif (conversationID) {\r\n\t\t\t\tconst index = state.chats.findIndex(chat => chat._id === conversationID);\r\n\t\t\t\tconst updatingChat = state.chats[index];\r\n\t\t\t\tstate.chats = [\r\n\t\t\t\t\t{ ...updatingChat, lastMessage: \"\" },\r\n\t\t\t\t\t...state.chats.filter(chat => chat._id !== conversationID),\r\n\t\t\t\t];\r\n\t\t\t\tif (conversationID === state.conversationID) state.messages = [];\r\n\t\t\t} else {\r\n\t\t\t\tstate.messages = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetChatID: (state, action) => {\r\n\t\t\tstate.conversationID = action.payload;\r\n\t\t},\r\n\t\tsetReceiverID: (state, action) => {\r\n\t\t\tstate.to = action.payload;\r\n\t\t},\r\n\t\tsetMessages: (state, action) => {\r\n\t\t\tconst { messages, id } = action.payload;\r\n\t\t\tstate.messages = messages.map(message => {\r\n\t\t\t\treturn { text: message.text, send: message.sender === id, createdAt: message.createdAt };\r\n\t\t\t});\r\n\t\t},\r\n\t\taddMessages: (state, action) => {\r\n\t\t\tconst { text, send = false } = action.payload;\r\n\t\t\tstate.messages = [...state.messages, { text, send, createdAt: String(new Date()) }];\r\n\t\t},\r\n\t\tdeleteChat: (state, action) => {\r\n\t\t\tstate.chats = state.chats.filter(chat => chat._id !== action.payload);\r\n\t\t\tif (action.payload === state.conversationID) state.conversationID = \"\";\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[getAllChats.fulfilled]: (state, action) => {\r\n\t\t\tconst { users, chats } = action.payload;\r\n\t\t\tconst getUserDetails = members => users.find(user => members.includes(user._id));\r\n\t\t\tstate.chats = chats.map(chat => ({ ...chat, userDetails: getUserDetails(chat.members) }));\r\n\t\t},\r\n\t\t[updateChats.fulfilled]: (state, action) => {\r\n\t\t\tconst updatingChat = state.chats[action.payload?.index];\r\n\t\t\tif (updatingChat) {\r\n\t\t\t\tstate.chats = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...updatingChat,\r\n\t\t\t\t\t\tlastMessage: action.payload.lastMessage,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...state.chats.filter(chat => chat._id !== updatingChat._id),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t},\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { addMessages, clearMessage, setChatID, setReceiverID, setMessages, deleteChat } =\r\n\tmessageSlice.actions;\r\n\r\nexport default messageSlice.reducer;\r\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { fetchUsersService } from \"../services/userServices\";\r\nimport { getAllChats } from \"./messageSlice\";\r\nimport { logout } from \"./userSlice\";\r\n\r\nconst initialState = {\r\n\tusers: [],\r\n\tusersOnline: [],\r\n};\r\n\r\nexport const getUsers = createAsyncThunk(\"users/getUsers\", async (props, thunkAPI) => {\r\n\tconst { customFetch } = props;\r\n\tconst { fulfillWithValue, rejectWithValue, dispatch, getState } = thunkAPI;\r\n\tconst data = await customFetch(fetchUsersService);\r\n\tif (!data) return rejectWithValue();\r\n\tconst { users } = data;\r\n\tif (!getState().user.isGuest) dispatch(getAllChats({ customFetch, users }));\r\n\treturn fulfillWithValue(users);\r\n});\r\n\r\nconst usersSlice = createSlice({\r\n\tname: \"users\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\taddOnline: (state, action) => {\r\n\t\t\tstate.usersOnline = action.payload;\r\n\t\t},\r\n\t},\r\n\textraReducers: {\r\n\t\t[getUsers.fulfilled]: (state, action) => {\r\n\t\t\tstate.users = action.payload;\r\n\t\t},\r\n\t\t[logout.type]: (state, action) => {\r\n\t\t\treturn initialState;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const { addOnline } = usersSlice.actions;\r\nexport default usersSlice.reducer;\r\n","import React from \"react\";\r\nimport { cloneElement } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport \"./backdrop.css\";\r\n\r\nconst Backdrop = ({ children, show, onClose = () => {} }) => {\r\n\tconst newChildren = cloneElement(children, {\r\n\t\t...children.props,\r\n\t\tshow: show ? \"true\" : undefined,\r\n\t\tonClose,\r\n\t});\r\n\tconst closeModal = e => {\r\n\t\tconst isBackdrop = e.target.firstChild?.classList?.contains(\"backdrop__content\");\r\n\t\tif (isBackdrop) onClose();\r\n\t};\r\n\r\n\tconst node = (\r\n\t\t<div className={show ? \"backdrop show\" : \"backdrop\"} onClick={closeModal}>\r\n\t\t\t<div className=\"backdrop__content gradient-border\">{newChildren}</div>\r\n\t\t</div>\r\n\t);\r\n\treturn createPortal(node, document.getElementById(\"backdrops\"));\r\n};\r\n\r\nexport default Backdrop;\r\n","import extractParams from \"../utils/extractParams\";\r\nimport axiosConfig from \"./axiosConfig\";\r\n\r\nconst fetchUsersService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"id\", \"query\");\r\n\tconst { data } = await axiosConfig.get(\"/users\", { params });\r\n\treturn data;\r\n};\r\n\r\nconst updateUserService = async (formData = {}) => {\r\n\tconst params = extractParams(formData, \"name\", \"about\", \"location\");\r\n\tconst { data } = await axiosConfig.patch(\"/users\", params);\r\n\treturn data;\r\n};\r\n\r\nconst updateDPService = async (formData = {}) => {\r\n\tconst headers = { \"Content-Type\": \"multipart/form-data\" };\r\n\tconst { data } = await axiosConfig.patch(\"/users/dp\", formData, { headers });\r\n\treturn data;\r\n};\r\n\r\nexport { fetchUsersService, updateUserService, updateDPService };\r\n","export default process.env.NODE_ENV === \"development\"\r\n\t? \"http://localhost:5000\"\r\n\t: \"http://localhost:3000/\";\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toggleSidebar } from \"../../features/modalSlice\";\r\nimport { dp } from \"../../assets\";\r\nimport \"./online.css\";\r\n\r\nconst Online = () => {\r\n    const {\r\n        users: { users },\r\n    } = useSelector(state => state);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const allUsers = () => {\r\n        return users.map(user => (\r\n            <Link to={`/user/${user._id}`} key={user._id} onClick={() => dispatch(toggleSidebar(false))}>\r\n                <div className=\"user\">\r\n                    <div>\r\n                        <img\r\n                            src={user.profileImage || dp}\r\n                            loading=\"lazy\"\r\n                            alt={user.name + \" image\"}\r\n                            className=\"roundimage\"\r\n                        />\r\n                    </div>\r\n                    <h3>{user.name}</h3>\r\n                </div>\r\n            </Link>\r\n        ));\r\n    };\r\n\r\n    return (\r\n        <section className=\"online\">\r\n            <h2>All Users - {users.length}</h2>\r\n            {allUsers()}\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Online;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { sendIcon, fileIcon } from \"../../assets\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addPost, updatePost } from \"../../features/postSlice\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport Compress from \"compress.js\";\r\nimport { closeIcon } from \"../../assets/index\";\r\nimport \"./createpost.css\";\r\n\r\nconst initialForm = { image: null, preview: null, caption: \"\" };\r\n\r\nconst CreatePost = ({ post, id, close }) => {\r\n\t// local states\r\n\tconst [form, setForm] = useState(initialForm);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (post && post._id) {\r\n\t\t\tsetForm({ image: null, preview: post.image?.src, caption: post.caption });\r\n\t\t}\r\n\t}, [post]);\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst customFetch = useFetch();\r\n\tconst compress = new Compress();\r\n\r\n\tconst compressImage = async files => {\r\n\t\tconst options = { size: 1, quality: 0.75, maxWidth: 1920, maxHeight: 1920, resize: true, rotate: false };\r\n\t\tconst data = await compress.compress(files, options);\r\n\t\treturn data;\r\n\t};\r\n\r\n\tconst loadImage = async e => {\r\n\t\tconst input = e.target;\r\n\t\tif (!input) return;\r\n\t\tvar reader = new FileReader();\r\n\t\treader.onload = function (e) {\r\n\t\t\tsetForm(form => ({ ...form, preview: e.target.result }));\r\n\t\t};\r\n\t\tinput.files[0] && reader.readAsDataURL(input.files[0]);\r\n\t\tconst files = [...input.files];\r\n\t\tconst data = await compressImage(files);\r\n\t\tconst image = Compress.convertBase64ToFile(data[0]?.data, data[0]?.ext);\r\n\t\tsetForm(form => ({ ...form, image }));\r\n\t};\r\n\r\n\tconst submitHandler = async e => {\r\n\t\te.preventDefault();\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", form.image);\r\n\t\tformData.append(\"caption\", form.caption.trim());\r\n\t\tif (post?._id) {\r\n\t\t\tdispatch(updatePost({ customFetch, id: post._id, formData }));\r\n\t\t\tclose();\r\n\t\t} else {\r\n\t\t\tdispatch(addPost({ customFetch, formData }));\r\n\t\t}\r\n\t\tsetForm(initialForm);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<article className=\"createpost gradient-border\">\r\n\t\t\t<form onSubmit={submitHandler}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tplaceholder=\"What's on your mind?\"\r\n\t\t\t\t\tvalue={form.caption}\r\n\t\t\t\t\tonChange={e => setForm({ ...form, caption: e.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\t{form.preview && (\r\n\t\t\t\t\t<div className=\"uploaded-image\">\r\n\t\t\t\t\t\t<img src={form.preview} alt=\"uploaded file\" />\r\n\t\t\t\t\t\t<div className=\"close-icon\" onClick={() => setForm({ ...form, image: null, preview: null })}>\r\n\t\t\t\t\t\t\t<img src={closeIcon} alt=\"remove\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className=\"btns\">\r\n\t\t\t\t\t<label htmlFor={id || \"image\"} aria-label=\"select file\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<img src={fileIcon} alt=\"select file\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<input type=\"file\" id={id || \"image\"} accept=\"image/png, image/jpeg\" onChange={loadImage} />\r\n\t\t\t\t\t<button type=\"submit\" aria-label=\"submit\">\r\n\t\t\t\t\t\t<img src={sendIcon} alt=\"send\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nexport default CreatePost;\r\n"],"sourceRoot":""}